import{j as jsxRuntimeExports}from"./index-lko4Hfbd.js";import{r as reactExports,b as React}from"./vendor-WBEadHvS.js";import{l as Star,X,g as MapPin,P as Phone,O as Globe,f as Clock,a2 as Plus,p as Filter,v as Search}from"./ui-B24o0VU9.js";const PlaceDetailsModal=({place,isOpen,onClose,onAddToItinerary,showAddButton=!1})=>{if(!isOpen||!place)return null;const metadata={title:place.title||place.name||"Unknown Place",rating:place.rating,address:place.address||place.location||"Location not specified",phone:place.phone,website:place.website,hours:place.hours,description:place.description,category:place.category,thumbnail:place.thumbnail||place.serpapi_thumbnail,price:place.price_range,cuisine:place.cuisine,amenities:place.amenities,coordinates:place.gps_coordinates||place.coordinates},getMapUrl=()=>{if(metadata.coordinates&&"lat"in metadata.coordinates){const{lat,lng}=metadata.coordinates;return`https://www.google.com/maps/search/?api=1&query=${lat},${lng}`}return`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(metadata.title+" "+metadata.address)}`};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm transition-opacity duration-300",onClick:onClose,children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl max-h-[90vh] overflow-y-auto m-4 w-full shadow-2xl transform transition-all duration-300 scale-100",onClick:e=>e.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start p-6 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:metadata.title}),metadata.rating&&jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mb-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Star,{className:"w-5 h-5 text-yellow-400 fill-current"}),jsxRuntimeExports.jsx("span",{className:"ml-1 font-semibold text-gray-900 dark:text-white",children:metadata.rating})]})}),jsxRuntimeExports.jsx("div",{className:"inline-block px-3 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300 rounded-full text-sm font-medium",children:metadata.category})]}),jsxRuntimeExports.jsx("button",{onClick:onClose,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[metadata.thumbnail&&jsxRuntimeExports.jsx("div",{className:"w-full h-48 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:metadata.thumbnail,alt:metadata.title,className:"w-full h-full object-cover transition-opacity duration-300",onError:e=>{e.target.style.display="none"},onLoad:e=>{e.target.style.opacity="1"},style:{opacity:0}})}),metadata.description&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"About"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:metadata.description})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Address"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:metadata.address}),jsxRuntimeExports.jsx("a",{href:getMapUrl(),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm transition-colors",children:"View on Google Maps â†’"})]})]}),metadata.phone&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Phone,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Phone"}),jsxRuntimeExports.jsx("a",{href:`tel:${metadata.phone}`,className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:metadata.phone})]})]}),metadata.website&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Globe,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Website"}),jsxRuntimeExports.jsx("a",{href:metadata.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 break-all transition-colors",children:"Visit Website â†’"})]})]}),metadata.hours&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Clock,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Hours"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:metadata.hours})]})]})]}),place.operating_hours&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Operating Hours"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(place.operating_hours).filter(([,hours])=>hours).map(([day,hours])=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between py-1",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:day}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:String(hours)})]},day))})]}),metadata.amenities&&metadata.amenities.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Amenities"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:metadata.amenities.map((amenity,index)=>jsxRuntimeExports.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:amenity},index))})]}),metadata.price&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Price Range"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:metadata.price})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-between items-center",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[showAddButton&&onAddToItinerary&&jsxRuntimeExports.jsxs("button",{onClick:()=>onAddToItinerary(place),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"Add to Itinerary"]}),jsxRuntimeExports.jsx("button",{onClick:onClose,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})]})]})]})})},AdditionalPlaces=({additionalPlaces,onAddToItinerary,onPlaceHover,onPlaceHoverLeave,enablePagination=!0})=>{const[selectedPlace,setSelectedPlace]=reactExports.useState(null),[isModalOpen,setIsModalOpen]=reactExports.useState(!1),[currentPage,setCurrentPage]=reactExports.useState(1),placesPerPage=6,[selectedCategory,setSelectedCategory]=reactExports.useState("all"),[searchQuery,setSearchQuery]=reactExports.useState(""),[showFilters,setShowFilters]=reactExports.useState(!1),safeAdditionalPlaces=additionalPlaces||{hotels:[],restaurants:[],cafes:[],attractions:[],interest_based:[]},categories=reactExports.useMemo(()=>{var _a,_b,_c,_d,_e;const cats=[{id:"all",label:"All Places",count:0},{id:"hotels",label:"Hotels",count:((_a=safeAdditionalPlaces.hotels)==null?void 0:_a.length)||0},{id:"restaurants",label:"Restaurants",count:((_b=safeAdditionalPlaces.restaurants)==null?void 0:_b.length)||0},{id:"cafes",label:"Cafes",count:((_c=safeAdditionalPlaces.cafes)==null?void 0:_c.length)||0},{id:"attractions",label:"Attractions",count:((_d=safeAdditionalPlaces.attractions)==null?void 0:_d.length)||0},{id:"interest_based",label:"Interest Based",count:((_e=safeAdditionalPlaces.interest_based)==null?void 0:_e.length)||0}];return cats[0].count=cats.slice(1).reduce((sum,cat)=>sum+cat.count,0),cats},[safeAdditionalPlaces]),filteredPlaces=reactExports.useMemo(()=>{let places=[];if(selectedCategory==="all"?places=[...safeAdditionalPlaces.hotels||[],...safeAdditionalPlaces.restaurants||[],...safeAdditionalPlaces.cafes||[],...safeAdditionalPlaces.attractions||[],...safeAdditionalPlaces.interest_based||[]]:places=safeAdditionalPlaces[selectedCategory]||[],searchQuery.trim()){const query=searchQuery.toLowerCase();places=places.filter(place=>{const title=(place.title||place.name||"").toLowerCase(),description=(place.description||"").toLowerCase(),address=(place.address||place.location||"").toLowerCase(),category=(place.category||"").toLowerCase();return title.includes(query)||description.includes(query)||address.includes(query)||category.includes(query)})}return places},[selectedCategory,searchQuery,safeAdditionalPlaces]),totalPages=Math.ceil(filteredPlaces.length/placesPerPage),startIndex=(currentPage-1)*placesPerPage,endIndex=startIndex+placesPerPage,paginatedPlaces=filteredPlaces.slice(startIndex,endIndex);React.useEffect(()=>{setCurrentPage(1)},[selectedCategory,searchQuery]);const handlePlaceClick=place=>{setSelectedPlace(place),setIsModalOpen(!0)},handleAddToItinerary=place=>{onAddToItinerary&&onAddToItinerary(place),setIsModalOpen(!1)},PlaceCard=({place})=>{const placeTitle=place.title||place.name||"Unknown Place",placeRating=place.rating,placeAddress=place.address||place.location||"Location not specified",placeCategory=place.category,placeThumbnail=place.high_res_image||place.thumbnail||place.serpapi_thumbnail,getPlaceType=()=>{const category=(placeCategory==null?void 0:placeCategory.toLowerCase())||"";return category.includes("hotel")||category.includes("accommodation")?"hotel":category.includes("restaurant")||category.includes("food")||category.includes("cafe")?"restaurant":"attraction"};return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-lg cursor-pointer",onMouseEnter:e=>onPlaceHover==null?void 0:onPlaceHover(e,place,getPlaceType()),onMouseLeave:onPlaceHoverLeave,children:[jsxRuntimeExports.jsxs("div",{onClick:()=>handlePlaceClick(place),className:"p-3",children:[placeThumbnail?jsxRuntimeExports.jsxs("div",{className:"w-full h-24 bg-gray-200 rounded-lg mb-2 overflow-hidden relative",children:[jsxRuntimeExports.jsx("img",{src:placeThumbnail,alt:placeTitle,className:"w-full h-full object-cover",onError:e=>{console.log("Image failed to load:",placeThumbnail),e.target.style.display="none"},onLoad:e=>{console.log("Image loaded successfully:",placeThumbnail),e.target.style.opacity="1"},style:{opacity:0},loading:"lazy",decoding:"async"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}):jsxRuntimeExports.jsx("div",{className:"w-full h-24 bg-gray-200 dark:bg-gray-700 rounded-lg mb-2 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-500",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl mb-1",children:"ðŸ“·"}),jsxRuntimeExports.jsx("div",{className:"text-xs",children:"No Photo"})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-start gap-2",children:jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900 text-xs line-clamp-2 flex-1",children:placeTitle})}),placeRating&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Star,{className:"w-3 h-3 text-yellow-400 fill-current"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-gray-900",children:placeRating})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-1",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-3 h-3 text-gray-400 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 line-clamp-1",children:placeAddress})]}),place.description&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 line-clamp-1",children:place.description})]})]}),jsxRuntimeExports.jsx("div",{className:"px-3 pb-3",children:jsxRuntimeExports.jsxs("button",{onClick:e=>{e.stopPropagation(),onAddToItinerary&&onAddToItinerary(place)},className:"w-full flex items-center justify-center gap-1.5 px-2 py-1.5 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors text-xs",children:[jsxRuntimeExports.jsx(Plus,{className:"w-3 h-3"}),"Add to Itinerary"]})})]})};return filteredPlaces.length===0?jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:searchQuery||selectedCategory!=="all"?"No Places Found":"No Additional Places Found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:searchQuery||selectedCategory!=="all"?"Try adjusting your search or filter criteria.":"We couldn't find any additional places for this destination."}),(searchQuery||selectedCategory!=="all")&&jsxRuntimeExports.jsx("button",{onClick:()=>{setSearchQuery(""),setSelectedCategory("all")},className:"mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Clear Filters"})]})}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Additional Places to Explore"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mt-1",children:[jsxRuntimeExports.jsx(Filter,{className:"w-4 h-4"}),jsxRuntimeExports.jsxs("span",{children:[filteredPlaces.length," places"]}),(searchQuery||selectedCategory!=="all")&&jsxRuntimeExports.jsx("span",{className:"text-blue-600",children:"(filtered)"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 w-3 h-3"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search places...",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:"pl-8 pr-3 py-1.5 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent w-36"}),searchQuery&&jsxRuntimeExports.jsx("button",{onClick:()=>setSearchQuery(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>setShowFilters(!showFilters),className:`flex items-center gap-1 px-2 py-1.5 rounded-md text-xs font-medium transition-colors ${showFilters||selectedCategory!=="all"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[jsxRuntimeExports.jsx(Filter,{className:"w-3 h-3"}),"Filter"]})]})]}),showFilters&&jsxRuntimeExports.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:categories.map(category=>jsxRuntimeExports.jsxs("button",{onClick:()=>setSelectedCategory(category.id),className:`px-2 py-1.5 rounded-md text-xs font-medium transition-colors ${selectedCategory===category.id?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:[category.label," (",category.count,")"]},category.id))})}),jsxRuntimeExports.jsx("div",{className:enablePagination?"":"max-h-96 overflow-y-auto",children:jsxRuntimeExports.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-4 ${enablePagination?"":"pr-2"}`,children:(enablePagination?paginatedPlaces:filteredPlaces).map((place,index)=>{const placeId=place.place_id;return jsxRuntimeExports.jsx(PlaceCard,{place},`${placeId}-${index}`)})})}),enablePagination&&totalPages>1&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",startIndex+1,"-",Math.min(endIndex,filteredPlaces.length)," of ",filteredPlaces.length," places"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>setCurrentPage(prev=>Math.max(prev-1,1)),disabled:currentPage===1,className:"px-2.5 py-1 text-sm font-medium text-gray-500 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-1",children:(()=>{const pages=[];if(totalPages>7){const firstPages=[1,2,3],lastPages=[totalPages-2,totalPages-1,totalPages];firstPages.forEach(page=>{pages.push(jsxRuntimeExports.jsx("button",{onClick:()=>setCurrentPage(page),className:`px-2.5 py-1 text-sm font-medium rounded-lg ${currentPage===page?"bg-blue-600 text-white":"text-gray-500 bg-gray-100 hover:bg-gray-200"}`,children:page},page))}),totalPages>6&&pages.push(jsxRuntimeExports.jsx("span",{className:"px-2 text-gray-400",children:"..."},"ellipsis")),totalPages>6&&lastPages.forEach(page=>{page>3&&pages.push(jsxRuntimeExports.jsx("button",{onClick:()=>setCurrentPage(page),className:`px-2.5 py-1 text-sm font-medium rounded-lg ${currentPage===page?"bg-blue-600 text-white":"text-gray-500 bg-gray-100 hover:bg-gray-200"}`,children:page},page))})}else for(let i=1;i<=totalPages;i++)pages.push(jsxRuntimeExports.jsx("button",{onClick:()=>setCurrentPage(i),className:`px-2.5 py-1 text-sm font-medium rounded-lg ${currentPage===i?"bg-blue-600 text-white":"text-gray-500 bg-gray-100 hover:bg-gray-200"}`,children:i},i));return pages})()}),jsxRuntimeExports.jsx("button",{onClick:()=>setCurrentPage(prev=>Math.min(prev+1,totalPages)),disabled:currentPage===totalPages,className:"px-2.5 py-1 text-sm font-medium text-gray-500 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),jsxRuntimeExports.jsx(PlaceDetailsModal,{place:selectedPlace,isOpen:isModalOpen,onClose:()=>setIsModalOpen(!1),onAddToItinerary:handleAddToItinerary,showAddButton:!0})]})};export{AdditionalPlaces as A,PlaceDetailsModal as P};
