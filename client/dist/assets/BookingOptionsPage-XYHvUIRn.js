import{f as flightAPI,j as jsxRuntimeExports,m as motion,B as Button}from"./index-lko4Hfbd.js";import{r as reactExports}from"./vendor-WBEadHvS.js";import{C as Card}from"./Card-BWSuOQqg.js";import{c as useParams,u as useNavigate}from"./router-BTz3HJhu.js";import{J as AlertCircle,e as ArrowLeft,K as Info,c as CheckCircle,m as Calendar,P as Phone,N as Shield,i as Plane,f as Clock,l as Star,O as Globe,r as TrendingUp}from"./ui-B24o0VU9.js";const BookingOptionsPage=()=>{var _a,_b;const{bookingToken}=useParams(),navigate=useNavigate(),[bookingData,setBookingData]=reactExports.useState(null),[loading,setLoading]=reactExports.useState(!0),[error,setError]=reactExports.useState(null);reactExports.useEffect(()=>{bookingToken?loadBookingOptions():(setError("No booking token provided. Please select a flight first."),setLoading(!1))},[bookingToken]);const loadBookingOptions=async()=>{var _a2,_b2;try{setLoading(!0),setError(null),console.log("Loading booking options for token:",bookingToken);const data=await flightAPI.getBookingOptions(bookingToken);console.log("Received booking data:",data),console.log("Selected flights count:",((_a2=data.selected_flights)==null?void 0:_a2.length)||0),console.log("Booking options count:",((_b2=data.booking_options)==null?void 0:_b2.length)||0),setBookingData(data)}catch(err){console.error("Error loading booking options:",err),setError(err.message||"Failed to load booking options")}finally{setLoading(!1)}},handleBookNow=option=>{var _a2,_b2;(_b2=(_a2=option.together)==null?void 0:_a2.booking_request)!=null&&_b2.url&&window.open(option.together.booking_request.url,"_blank")},handleCallBooking=option=>{var _a2;(_a2=option.together)!=null&&_a2.booking_phone&&window.open(`tel:${option.together.booking_phone}`,"_self")},formatPrice=(price,currency="INR")=>`${currency==="INR"?"â‚¹":"$"}${price.toLocaleString()}`,renderFlightDetails=flight=>{var _a2,_b2,_c,_d,_e;return console.log("Rendering flight details:",flight),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:jsxRuntimeExports.jsxs(Card,{className:"overflow-hidden",shadow:"large",variant:"elevated",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-6 text-white",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:jsxRuntimeExports.jsx(Plane,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold font-heading",children:((_b2=(_a2=flight.flight_segments)==null?void 0:_a2[0])==null?void 0:_b2.airline)||"Multiple Airlines"}),jsxRuntimeExports.jsxs("p",{className:"text-primary-100 font-medium",children:["Flight ",((_d=(_c=flight.flight_segments)==null?void 0:_c[0])==null?void 0:_d.flight_number)||"N/A"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl font-bold font-heading",children:formatPrice(flight.price,flight.currency)}),jsxRuntimeExports.jsxs("div",{className:"text-primary-100 font-medium flex items-center justify-center",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4 mr-1"}),flight.total_duration]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 gap-6",children:(_e=flight.flight_segments)==null?void 0:_e.map((segment,index)=>{var _a3,_b3,_c2,_d2,_e2,_f;return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:index*.1},className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-secondary-50 to-primary-50 dark:from-secondary-800 dark:to-primary-900/20 border border-secondary-200 dark:border-secondary-700 rounded-2xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:((_a3=segment.departure)==null?void 0:_a3.time)||"N/A"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-secondary-700 dark:text-secondary-300",children:((_b3=segment.departure)==null?void 0:_b3.airport)||"N/A"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:((_c2=segment.departure)==null?void 0:_c2.airport_name)||""})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full",children:[jsxRuntimeExports.jsx("div",{className:"h-0.5 bg-gradient-to-r from-primary-300 to-primary-500 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-primary-500 rounded-full border-4 border-white dark:border-secondary-800 shadow-lg"})}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:jsxRuntimeExports.jsx(Plane,{className:"w-4 h-4 text-primary-500"})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:((_d2=segment.arrival)==null?void 0:_d2.time)||"N/A"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-secondary-700 dark:text-secondary-300",children:((_e2=segment.arrival)==null?void 0:_e2.airport)||"N/A"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:((_f=segment.arrival)==null?void 0:_f.airport_name)||""})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 text-secondary-600 dark:text-secondary-400",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:segment.duration||"N/A"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 text-secondary-600 dark:text-secondary-400",children:[jsxRuntimeExports.jsx(Plane,{className:"w-4 h-4"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:["Flight ",segment.flight_number||"N/A"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 text-success-600",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Confirmed"})]})]})]})},index)})}),flight.amenities&&flight.amenities.length>0&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},className:"mt-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-3 flex items-center",children:[jsxRuntimeExports.jsx(Star,{className:"w-5 h-5 text-warning-500 mr-2"}),"Flight Amenities"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:flight.amenities.map((amenity,index)=>jsxRuntimeExports.jsx(motion.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.4+index*.1},className:"px-3 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 text-xs font-semibold rounded-full border border-primary-200 dark:border-primary-700",children:amenity},index))})]})]})]})},flight.id)},renderBookingOption=(option,index)=>{var _a2,_b2,_c,_d,_e,_f,_g,_h,_i;const isRecommended=(_b2=(_a2=option.together)==null?void 0:_a2.booking_request)==null?void 0:_b2.url;return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:index*.1},whileHover:{y:-5},children:jsxRuntimeExports.jsxs(Card,{className:`relative overflow-hidden ${isRecommended?"ring-2 ring-primary-500 shadow-xl":""}`,shadow:"large",variant:"elevated",children:[isRecommended&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.2},className:"absolute top-4 right-4 z-10",children:jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-warning-500 to-warning-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg flex items-center space-x-1",children:[jsxRuntimeExports.jsx(Star,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:"RECOMMENDED"})]})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-50/50 to-secondary-50/50 dark:from-primary-900/10 dark:to-secondary-900/10"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx(motion.div,{className:`w-16 h-16 rounded-2xl flex items-center justify-center shadow-lg ${isRecommended?"bg-gradient-to-br from-primary-500 to-primary-600":"bg-gradient-to-br from-secondary-500 to-secondary-600"}`,whileHover:{scale:1.1,rotate:5},transition:{duration:.2},children:isRecommended?jsxRuntimeExports.jsx(Globe,{className:"w-8 h-8 text-white"}):jsxRuntimeExports.jsx(Phone,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-xl font-bold text-secondary-900 dark:text-white font-heading",children:(_d=(_c=option.together)==null?void 0:_c.booking_request)!=null&&_d.url?"Online Booking":"Phone Booking"}),jsxRuntimeExports.jsx("p",{className:"text-secondary-600 dark:text-secondary-300 font-medium",children:(_f=(_e=option.together)==null?void 0:_e.booking_request)!=null&&_f.url?"Book directly online":"Call to book"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 text-success-600",children:[jsxRuntimeExports.jsx(Shield,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:"Secure"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 text-primary-600",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:"Best Price"})]})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 text-sm text-secondary-600 dark:text-secondary-400",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 text-success-500"}),jsxRuntimeExports.jsx("span",{children:"Instant Confirmation"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 text-sm text-secondary-600 dark:text-secondary-400",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 text-success-500"}),jsxRuntimeExports.jsx("span",{children:"24/7 Support"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 text-sm text-secondary-600 dark:text-secondary-400",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 text-success-500"}),jsxRuntimeExports.jsx("span",{children:"Free Cancellation"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 text-sm text-secondary-600 dark:text-secondary-400",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 text-success-500"}),jsxRuntimeExports.jsx("span",{children:"Mobile Ticket"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[((_h=(_g=option.together)==null?void 0:_g.booking_request)==null?void 0:_h.url)&&jsxRuntimeExports.jsx(motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:jsxRuntimeExports.jsx(Button,{onClick:()=>handleBookNow(option),icon:Globe,className:"w-full",size:"lg",children:"Book Now Online"})}),((_i=option.together)==null?void 0:_i.booking_phone)&&jsxRuntimeExports.jsx(motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:jsxRuntimeExports.jsxs(Button,{onClick:()=>handleCallBooking(option),variant:"outline",icon:Phone,className:"w-full",size:"lg",children:["Call to Book: ",option.together.booking_phone]})})]})]})]})},index)};return loading?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 dark:from-dark-bg dark:via-dark-bg dark:to-secondary-800",children:jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-6",children:jsxRuntimeExports.jsx("div",{className:"w-full h-full border-4 border-primary-200 border-t-primary-500 rounded-full"})}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-secondary-900 dark:text-white mb-4 font-heading",children:"Loading Booking Options"}),jsxRuntimeExports.jsx("p",{className:"text-secondary-600 dark:text-secondary-300 text-lg",children:"Please wait while we fetch the best booking options for you..."}),jsxRuntimeExports.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:[0,1,2].map(i=>jsxRuntimeExports.jsx(motion.div,{animate:{y:[0,-10,0]},transition:{duration:.6,repeat:1/0,delay:i*.2},className:"w-3 h-3 bg-primary-500 rounded-full"},i))})]})})}):error?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-error-50 via-white to-secondary-50 dark:from-error-900/20 dark:via-dark-bg dark:to-secondary-800",children:jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},className:"w-20 h-20 bg-error-100 dark:bg-error-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:jsxRuntimeExports.jsx(AlertCircle,{className:"w-10 h-10 text-error-600 dark:text-error-400"})}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-secondary-900 dark:text-white mb-4 font-heading",children:"Error Loading Booking Options"}),jsxRuntimeExports.jsx("p",{className:"text-secondary-600 dark:text-secondary-300 mb-8 text-lg",children:error}),jsxRuntimeExports.jsx(motion.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:jsxRuntimeExports.jsx(Button,{onClick:()=>navigate(-1),icon:ArrowLeft,size:"lg",children:"Back to Search"})})]})})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 dark:from-dark-bg dark:via-dark-bg dark:to-secondary-800",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsx(motion.div,{whileHover:{x:-5},whileTap:{scale:.95},children:jsxRuntimeExports.jsx(Button,{onClick:()=>navigate(-1),variant:"ghost",icon:ArrowLeft,size:"sm",children:"Back"})}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-secondary-900 dark:text-white font-heading",children:"Booking Options"}),jsxRuntimeExports.jsx("p",{className:"text-secondary-600 dark:text-secondary-300 mt-2",children:"Choose your preferred booking method"})]}),jsxRuntimeExports.jsx("div",{className:"w-24"})," "]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:(_a=bookingData==null?void 0:bookingData.selected_flights)==null?void 0:_a.map(flight=>renderFlightDetails(flight))}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mt-12",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-secondary-900 dark:text-white font-heading mb-4",children:"Choose Your Booking Method"}),jsxRuntimeExports.jsx("p",{className:"text-secondary-600 dark:text-secondary-300 text-lg",children:"Select the most convenient way to book your flight"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:(_b=bookingData==null?void 0:bookingData.booking_options)==null?void 0:_b.map((option,index)=>renderBookingOption(option,index))})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"mt-12",children:jsxRuntimeExports.jsxs(Card,{className:"p-8",shadow:"large",variant:"elevated",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-2xl flex items-center justify-center",children:jsxRuntimeExports.jsx(Info,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-secondary-900 dark:text-white font-heading",children:"Important Information"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-success-100 dark:bg-success-900/30 rounded-full flex items-center justify-center mt-0.5",children:jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 text-success-600 dark:text-success-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-secondary-900 dark:text-white",children:"Price Changes"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-300",children:"Prices are subject to change until booking is confirmed"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-warning-100 dark:bg-warning-900/30 rounded-full flex items-center justify-center mt-0.5",children:jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 text-warning-600 dark:text-warning-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-secondary-900 dark:text-white",children:"Travel Documents"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-300",children:"Please have your travel documents ready when booking"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center mt-0.5",children:jsxRuntimeExports.jsx(Phone,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-secondary-900 dark:text-white",children:"Phone Bookings"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-300",children:"For phone bookings, please mention you found this deal on SafarBot"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-info-100 dark:bg-info-900/30 rounded-full flex items-center justify-center mt-0.5",children:jsxRuntimeExports.jsx(Shield,{className:"w-4 h-4 text-info-600 dark:text-info-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-secondary-900 dark:text-white",children:"Secure Booking"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-300",children:"All bookings are processed through secure, trusted partners"})]})]})]})]})]})})]})})};export{BookingOptionsPage as default};
