import{j as jsxRuntimeExports,m as motion,A as AnimatePresence}from"./index-lko4Hfbd.js";import{r as reactExports,a as reactDomExports}from"./vendor-WBEadHvS.js";import{c as constructFrom,l as isSameDay,b as addMonths,g as format,p as startOfMonth,f as endOfMonth,q as startOfWeek,e as endOfWeek,m as isSameMonth,j as isBefore,a as addDays}from"./isSameMonth-BdiPiSPU.js";function CalendarDaysIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const ForwardRef$2=reactExports.forwardRef(CalendarDaysIcon);function ChevronLeftIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const ForwardRef$1=reactExports.forwardRef(ChevronLeftIcon);function ChevronRightIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const ForwardRef=reactExports.forwardRef(ChevronRightIcon);function constructNow(date){return constructFrom(date,Date.now())}function isToday(date,options){return isSameDay(constructFrom(date,date),constructNow(date))}function subMonths(date,amount,options){return addMonths(date,-1,options)}const CustomDatePicker=({value,onChange,placeholder="Select date",minDate,maxDate,className="",label})=>{const[isOpen,setIsOpen]=reactExports.useState(!1),[currentMonth,setCurrentMonth]=reactExports.useState(value||new Date),[selectedDate,setSelectedDate]=reactExports.useState(value),[showAbove,setShowAbove]=reactExports.useState(!1),[calendarPosition,setCalendarPosition]=reactExports.useState({top:0,left:0}),containerRef=reactExports.useRef(null),buttonRef=reactExports.useRef(null),calendarRef=reactExports.useRef(null);reactExports.useEffect(()=>{value&&(setSelectedDate(value),setCurrentMonth(value))},[value]),reactExports.useEffect(()=>{const handleClickOutside=event=>{var _a,_b;const targetNode=event.target,clickedInsideTrigger=(_a=containerRef.current)==null?void 0:_a.contains(targetNode),clickedInsideCalendar=(_b=calendarRef.current)==null?void 0:_b.contains(targetNode);clickedInsideTrigger||clickedInsideCalendar||setIsOpen(!1)},handleResize=()=>{isOpen&&checkPositioning()};return document.addEventListener("mousedown",handleClickOutside),window.addEventListener("resize",handleResize),window.addEventListener("scroll",handleResize),()=>{document.removeEventListener("mousedown",handleClickOutside),window.removeEventListener("resize",handleResize),window.removeEventListener("scroll",handleResize)}},[isOpen]);const checkPositioning=()=>{if(!buttonRef.current)return;const buttonRect=buttonRef.current.getBoundingClientRect(),viewportHeight=window.innerHeight,viewportWidth=window.innerWidth,calendarHeight=380,calendarWidth=288,buffer=20,spaceBelow=viewportHeight-buttonRect.bottom-buffer,spaceAbove=buttonRect.top-buffer,shouldShowAbove=spaceBelow<calendarHeight&&spaceAbove>=calendarHeight;setShowAbove(shouldShowAbove);let top=shouldShowAbove?buttonRect.top-calendarHeight-12:buttonRect.bottom+12,left=buttonRect.left+buttonRect.width/2-calendarWidth/2;left<buffer?left=buffer:left+calendarWidth>viewportWidth-buffer&&(left=viewportWidth-calendarWidth-buffer),top<buffer?top=buffer:top+calendarHeight>viewportHeight-buffer&&(top=viewportHeight-calendarHeight-buffer),setCalendarPosition({top,left})},handleDateSelect=date=>{minDate&&isBefore(date,minDate)||maxDate&&isBefore(maxDate,date)||(setSelectedDate(date),onChange==null||onChange(date),setIsOpen(!1))},navigateMonth=direction=>{setCurrentMonth(prev=>direction==="prev"?subMonths(prev):addMonths(prev,1))},renderCalendar=()=>{const monthStart=startOfMonth(currentMonth),monthEnd=endOfMonth(monthStart),startDate=startOfWeek(monthStart),endDate=endOfWeek(monthEnd),dateFormat="d",rows=[];let days=[],day=startDate;for(;day<=endDate;){for(let i=0;i<7;i++){const cloneDay=day,isCurrentMonth=isSameMonth(day,monthStart),isSelected=selectedDate&&isSameDay(day,selectedDate),isCurrentDay=isToday(day),isDisabled=minDate&&isBefore(day,minDate)||maxDate&&isBefore(maxDate,day);days.push(jsxRuntimeExports.jsxs(motion.button,{type:"button",whileHover:{scale:isCurrentMonth&&!isDisabled?1.1:1},whileTap:{scale:isCurrentMonth&&!isDisabled?.95:1},onClick:()=>isCurrentMonth&&!isDisabled&&handleDateSelect(cloneDay),disabled:isDisabled,className:`
              relative w-8 h-8 rounded-lg text-xs font-semibold transition-all duration-200
              ${isSelected?"bg-gradient-to-br from-cyan-500 to-blue-600 text-white shadow-lg ring-2 ring-cyan-200 dark:ring-cyan-700":isCurrentDay?"bg-gradient-to-br from-cyan-50 to-blue-50 text-cyan-600 border-2 border-cyan-200 dark:bg-cyan-900/30 dark:text-cyan-400 dark:border-cyan-700":isCurrentMonth?"text-gray-700 dark:text-gray-300 hover:bg-gradient-to-br hover:from-cyan-50 hover:to-blue-50 dark:hover:bg-gray-700 hover:text-cyan-600 dark:hover:text-cyan-400":"text-gray-400 dark:text-gray-600"}
              ${isDisabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}
              ${isCurrentMonth?"":"opacity-40"}
            `,children:[format(day,dateFormat),isCurrentDay&&!isSelected&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]},day.toString())),day=addDays(day,1)}rows.push(jsxRuntimeExports.jsx("div",{className:"grid grid-cols-7 gap-0.5",children:days},day.toString())),days=[]}return rows},weekDays=["Su","Mo","Tu","We","Th","Fr","Sa"];return jsxRuntimeExports.jsxs("div",{ref:containerRef,className:`relative ${className}`,children:[label&&jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:label}),jsxRuntimeExports.jsxs(motion.button,{ref:buttonRef,type:"button",whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>{checkPositioning(),setIsOpen(!isOpen)},className:`
          relative w-full px-4 py-2.5 text-left border-2 rounded-xl transition-all duration-300 group overflow-hidden
          ${isOpen?"border-cyan-500 ring-4 ring-cyan-500/20 shadow-lg":"border-gray-200 dark:border-gray-600 hover:border-cyan-400 dark:hover:border-cyan-500"}
          bg-white/90 dark:bg-gray-700/90 backdrop-blur-sm text-gray-900 dark:text-white
          focus:outline-none focus:border-cyan-500 focus:ring-4 focus:ring-cyan-500/20 shadow-sm hover:shadow-md
        `,children:[jsxRuntimeExports.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-xl bg-gradient-to-r from-cyan-500/5 to-blue-500/5 opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(ForwardRef$2,{className:`w-4 h-4 transition-colors duration-200 ${isOpen?"text-cyan-500":"text-gray-400 group-hover:text-cyan-500"}`}),jsxRuntimeExports.jsx("span",{className:`text-sm font-medium ${selectedDate?"text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400"}`,children:selectedDate?format(selectedDate,"MMM dd, yyyy"):placeholder})]}),jsxRuntimeExports.jsx(motion.div,{animate:{rotate:isOpen?180:0},transition:{duration:.2},children:jsxRuntimeExports.jsx(ForwardRef,{className:"w-4 h-4 text-gray-400"})})]})]}),isOpen&&reactDomExports.createPortal(jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>setIsOpen(!1)}),jsxRuntimeExports.jsxs(motion.div,{ref:calendarRef,initial:{opacity:0,y:showAbove?-10:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:showAbove?-10:10,scale:.95},transition:{duration:.3},className:"fixed bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 p-4 w-72",style:{filter:"drop-shadow(0 25px 25px rgb(0 0 0 / 0.15))",zIndex:9999,top:calendarPosition.top,left:calendarPosition.left},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1,backgroundColor:"rgba(6, 182, 212, 0.1)"},whileTap:{scale:.9},onClick:()=>navigateMonth("prev"),className:"p-3 rounded-xl hover:bg-cyan-50 dark:hover:bg-cyan-900/30 transition-all duration-200 border border-transparent hover:border-cyan-200 dark:hover:border-cyan-700",children:jsxRuntimeExports.jsx(ForwardRef$1,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 hover:text-cyan-600 dark:hover:text-cyan-400 transition-colors"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent",children:format(currentMonth,"MMMM yyyy")}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1,backgroundColor:"rgba(6, 182, 212, 0.1)"},whileTap:{scale:.9},onClick:()=>navigateMonth("next"),className:"p-3 rounded-xl hover:bg-cyan-50 dark:hover:bg-cyan-900/30 transition-all duration-200 border border-transparent hover:border-cyan-200 dark:hover:border-cyan-700",children:jsxRuntimeExports.jsx(ForwardRef,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 hover:text-cyan-600 dark:hover:text-cyan-400 transition-colors"})})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-7 gap-0.5 mb-2",children:weekDays.map(day=>jsxRuntimeExports.jsx("div",{className:"h-8 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:day})},day))}),jsxRuntimeExports.jsx("div",{className:"space-y-0.5",children:renderCalendar()}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between pt-4 mt-4 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>handleDateSelect(new Date),className:"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors duration-200",children:"Today"}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>setIsOpen(!1),className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",children:"Cancel"})]})]})]})}),document.body)]})};export{CustomDatePicker as C};
