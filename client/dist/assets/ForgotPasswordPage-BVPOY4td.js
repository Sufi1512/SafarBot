import{u as useAuth,j as jsxRuntimeExports,m as motion,a as ModernCard,x as logoImage,M as ModernButton}from"./index-lko4Hfbd.js";import{r as reactExports}from"./vendor-WBEadHvS.js";import{u as useNavigate,a as useLocation}from"./router-BTz3HJhu.js";import{e as ArrowLeft,C as Check,A as AlertTriangle,M as Mail,b as Loader2}from"./ui-B24o0VU9.js";const ForgotPasswordPage=()=>{const{forgotPassword,isAuthenticated}=useAuth(),navigate=useNavigate(),location=useLocation(),[email,setEmail]=reactExports.useState(""),[isSubmitting,setIsSubmitting]=reactExports.useState(!1),[error,setError]=reactExports.useState(null),[success,setSuccess]=reactExports.useState(null),redirectInfo=location.state||JSON.parse(sessionStorage.getItem("authRedirect")||"{}"),redirectPath=redirectInfo.from||"/dashboard",redirectMessage=redirectInfo.message||"Reset your password";reactExports.useEffect(()=>{isAuthenticated&&(sessionStorage.removeItem("authRedirect"),navigate(redirectPath,{replace:!0}))},[isAuthenticated,navigate,redirectPath]);const handleInputChange=e=>{setEmail(e.target.value),error&&setError(null)},validateEmail=email2=>{const emailTrimmed=email2.trim();return emailTrimmed?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailTrimmed)?emailTrimmed.length>254?"Email address is too long":null:"Please enter a valid email address":"Please enter your email address"},handleSubmit=async e=>{e.preventDefault();const validationError=validateEmail(email);if(validationError){setError(validationError);return}try{setIsSubmitting(!0),setError(null),setSuccess(null),await forgotPassword(email),setSuccess("Password reset instructions sent to your email! Check your inbox and follow the link to reset your password.")}catch(err){console.error("Forgot password error:",err),setError(err.message||"Failed to send reset instructions. Please try again.")}finally{setIsSubmitting(!1)}},handleGoBack=()=>{navigate("/login")};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-cyan-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md",children:[jsxRuntimeExports.jsxs(motion.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:handleGoBack,className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors mb-6",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Back to Sign In"})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:jsxRuntimeExports.jsxs(ModernCard,{className:"p-8 shadow-2xl border-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.2},className:"w-24 h-24 mx-auto mb-2 flex items-center justify-center",children:jsxRuntimeExports.jsx("img",{src:logoImage,alt:"SafarBot",className:"w-24 h-24 object-contain"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Forgot Password?"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:redirectMessage})]}),success&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-xl flex items-center space-x-3",children:[jsxRuntimeExports.jsx(Check,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),jsxRuntimeExports.jsx("span",{className:"text-green-700 dark:text-green-300 font-medium",children:success})]}),error&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-xl flex items-center space-x-3",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),jsxRuntimeExports.jsx("span",{className:"text-red-700 dark:text-red-300 font-medium",children:error})]}),jsxRuntimeExports.jsxs("form",{onSubmit:handleSubmit,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"email",name:"email",type:"email",value:email,onChange:handleInputChange,placeholder:"Enter your email address",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 placeholder:text-sm transition-all duration-200",required:!0,disabled:isSubmitting})]})]}),jsxRuntimeExports.jsx(ModernButton,{type:"submit",loading:isSubmitting,icon:isSubmitting?Loader2:Mail,className:"w-full bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",size:"md",disabled:isSubmitting,children:isSubmitting?"Sending...":"Send Reset Instructions"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-center space-y-4",children:[jsxRuntimeExports.jsxs("button",{onClick:handleGoBack,className:"inline-flex items-center justify-center w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 text-sm rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>navigate("/signup"),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors",children:"Sign up here"})]})]})]})})]})})};export{ForgotPasswordPage as default};
