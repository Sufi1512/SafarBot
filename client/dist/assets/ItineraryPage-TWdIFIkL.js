import{j as jsxRuntimeExports,L as LoadingSpinner,g as ModernHeader}from"./index-lko4Hfbd.js";import{r as reactExports}from"./vendor-WBEadHvS.js";import{C as Card}from"./Card-BWSuOQqg.js";import{a as useLocation,u as useNavigate}from"./router-BTz3HJhu.js";import{e as ArrowLeft,g as MapPin,m as Calendar,Q as DollarSign}from"./ui-B24o0VU9.js";const ItineraryPage=()=>{var _a,_b,_c;const location=useLocation(),navigate=useNavigate(),[itineraryData,setItineraryData]=reactExports.useState(null),[daySchedules,setDaySchedules]=reactExports.useState([]),[isLoading,setIsLoading]=reactExports.useState(!0),[error,setError]=reactExports.useState(null),[selectedDay,setSelectedDay]=reactExports.useState(1),[hoveredEvent,setHoveredEvent]=reactExports.useState(null),[hoverPosition,setHoverPosition]=reactExports.useState(null),[isScrolled,setIsScrolled]=reactExports.useState(!1);reactExports.useEffect(()=>{const state=location.state;state!=null&&state.itineraryData?(setItineraryData(state.itineraryData),processItineraryData(state.itineraryData)):setError("No itinerary data found"),setIsLoading(!1)},[location.state]),reactExports.useEffect(()=>{const handleScroll=()=>{const scrollTop=window.pageYOffset||document.documentElement.scrollTop;setIsScrolled(scrollTop>100)};return window.addEventListener("scroll",handleScroll),()=>window.removeEventListener("scroll",handleScroll)},[]);const processItineraryData=data=>{const schedules=data.itinerary.daily_plans.map(plan=>{var _a2,_b2,_c2,_d,_e,_f,_g,_h;const events=[];return plan.day===1&&events.push({time:"12:00",type:"checkin",title:"Hotel Check-in",description:"Arrive at your accommodation",location:((_b2=(_a2=data.itinerary.accommodation_suggestions)==null?void 0:_a2[0])==null?void 0:_b2.location)||"Hotel",cost:"0",placeId:(_d=(_c2=data.itinerary.accommodation_suggestions)==null?void 0:_c2[0])==null?void 0:_d.place_id}),plan.day===data.itinerary.total_days&&events.push({time:"09:00",type:"checkout",title:"Hotel Check-out",description:"Depart from your accommodation",location:((_f=(_e=data.itinerary.accommodation_suggestions)==null?void 0:_e[0])==null?void 0:_f.location)||"Hotel",cost:"0",placeId:(_h=(_g=data.itinerary.accommodation_suggestions)==null?void 0:_g[0])==null?void 0:_h.place_id}),plan.activities.forEach(activity=>{var _a3;const placeDetails=(_a3=data.place_details)==null?void 0:_a3[activity.place_id];events.push({time:activity.time,type:"activity",title:activity.title,description:(placeDetails==null?void 0:placeDetails.description)||activity.title,location:(placeDetails==null?void 0:placeDetails.address)||activity.title,duration:activity.duration,cost:activity.estimated_cost,placeId:activity.place_id,rating:placeDetails==null?void 0:placeDetails.rating,photo:placeDetails==null?void 0:placeDetails.photos_link,website:placeDetails==null?void 0:placeDetails.website,phone:placeDetails==null?void 0:placeDetails.phone,openingHours:placeDetails!=null&&placeDetails.operating_hours?JSON.stringify(placeDetails.operating_hours):void 0,reviews:placeDetails==null?void 0:placeDetails.reviews,types:placeDetails==null?void 0:placeDetails.types})}),plan.meals.forEach(meal=>{var _a3;const placeDetails=(_a3=data.place_details)==null?void 0:_a3[meal.place_id];events.push({time:meal.time,type:"meal",title:meal.name,description:(placeDetails==null?void 0:placeDetails.description)||`Great ${meal.cuisine} cuisine`,location:(placeDetails==null?void 0:placeDetails.address)||meal.name,cuisine:meal.cuisine,priceRange:meal.price_range,placeId:meal.place_id,rating:placeDetails==null?void 0:placeDetails.rating,photo:placeDetails==null?void 0:placeDetails.photos_link,website:placeDetails==null?void 0:placeDetails.website,phone:placeDetails==null?void 0:placeDetails.phone,openingHours:placeDetails!=null&&placeDetails.operating_hours?JSON.stringify(placeDetails.operating_hours):void 0,reviews:placeDetails==null?void 0:placeDetails.reviews,types:placeDetails==null?void 0:placeDetails.types})}),plan.transportation.forEach(transport=>{events.push({time:transport.from==="Hotel"?"Before next activity":"After previous activity",type:"transport",title:`${transport.method} to ${transport.to}`,description:`Travel from ${transport.from} to ${transport.to}`,duration:transport.duration,cost:transport.cost})}),events.sort((a,b)=>a.time==="Before next activity"?-1:b.time==="Before next activity"||a.time==="After previous activity"?1:b.time==="After previous activity"?-1:a.time.localeCompare(b.time)),{day:plan.day,date:plan.date,theme:plan.theme,events}});setDaySchedules(schedules)},getEventIcon=type=>{switch(type){case"activity":return"ðŸŽ¯";case"meal":return"ðŸ½ï¸";case"transport":return"ðŸš—";case"checkin":return"ðŸ¨";case"checkout":return"âœˆï¸";default:return"ðŸ“"}},getEventColor=type=>{switch(type){case"activity":return"bg-blue-100 text-blue-800 border-blue-200";case"meal":return"bg-green-100 text-green-800 border-green-200";case"transport":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"checkin":return"bg-purple-100 text-purple-800 border-purple-200";case"checkout":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},formatDate=dateString=>new Date(dateString).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),calculateTotalCost=()=>{if(!itineraryData)return 0;let total=0;return itineraryData.itinerary.daily_plans.forEach(plan=>{plan.activities.forEach(activity=>{const cost=parseFloat(activity.estimated_cost.replace("$",""))||0;total+=cost}),plan.transportation.forEach(transport=>{const cost=parseFloat(transport.cost.replace("$",""))||0;total+=cost})}),total},handleEventHover=(event,mouseEvent)=>{setHoveredEvent(event),setHoverPosition({x:mouseEvent.clientX,y:mouseEvent.clientY})},handleEventHoverLeave=()=>{setHoveredEvent(null),setHoverPosition(null)};if(isLoading)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:jsxRuntimeExports.jsx(LoadingSpinner,{size:"lg",text:"Loading your itinerary..."})});if(error||!itineraryData)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:jsxRuntimeExports.jsxs(Card,{className:"p-8 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Error"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:error||"No itinerary data found"}),jsxRuntimeExports.jsx("button",{onClick:()=>navigate("/"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Go Back Home"})]})});const currentDay=daySchedules.find(day=>day.day===selectedDay);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[isScrolled&&jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 right-0 z-50",children:jsxRuntimeExports.jsx(ModernHeader,{})}),jsxRuntimeExports.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50 w-full",children:jsxRuntimeExports.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between py-1.5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>navigate("/results"),className:"p-3 rounded-xl bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-all duration-200 group",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5 text-gray-600 dark:text-gray-300 group-hover:text-gray-800 dark:group-hover:text-white"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(MapPin,{className:"w-6 h-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[itineraryData.itinerary.destination," Itinerary"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[itineraryData.itinerary.total_days," days â€¢ $",calculateTotalCost().toFixed(0)," estimated cost"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>navigate("/results",{state:{injectedEnhancedResponse:itineraryData}}),className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-1.5 text-xs",children:[jsxRuntimeExports.jsx("span",{children:"ðŸ“…"}),jsxRuntimeExports.jsx("span",{children:"View Itinerary"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>navigate("/edit-itinerary",{state:{itineraryData}}),className:"bg-orange-600 text-white px-3 py-1.5 rounded-lg hover:bg-orange-700 transition-colors flex items-center space-x-1.5 text-xs",children:[jsxRuntimeExports.jsx("span",{children:"âœï¸"}),jsxRuntimeExports.jsx("span",{children:"Edit"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>navigate("/"),className:"bg-blue-600 text-white px-3 py-1.5 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-1.5 text-xs",children:[jsxRuntimeExports.jsx("span",{children:"ðŸ”"}),jsxRuntimeExports.jsx("span",{children:"New Search"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsxs("span",{className:"hidden sm:inline",children:[new Date(((_a=itineraryData.itinerary.daily_plans[0])==null?void 0:_a.date)||"").toLocaleDateString()," - ",new Date(((_b=itineraryData.itinerary.daily_plans[itineraryData.itinerary.daily_plans.length-1])==null?void 0:_b.date)||"").toLocaleDateString()]}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:new Date(((_c=itineraryData.itinerary.daily_plans[0])==null?void 0:_c.date)||"").toLocaleDateString()})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(DollarSign,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsxs("span",{className:"hidden sm:inline",children:["Total: $",calculateTotalCost().toFixed(0)]}),jsxRuntimeExports.jsxs("span",{className:"sm:hidden",children:["$",calculateTotalCost().toFixed(0)]})]})]})]})})}),jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-1",children:[jsxRuntimeExports.jsxs(Card,{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Daily Schedule"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:daySchedules.map(day=>jsxRuntimeExports.jsxs("button",{onClick:()=>setSelectedDay(day.day),className:`w-full text-left p-3 rounded-lg transition-colors ${selectedDay===day.day?"bg-blue-100 text-blue-900 border border-blue-200":"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[jsxRuntimeExports.jsxs("div",{className:"font-medium",children:["Day ",day.day]}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-75",children:formatDate(day.date)}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-60",children:day.theme})]},day.day))})]}),jsxRuntimeExports.jsxs(Card,{className:"p-6 mt-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Trip Summary"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Destination:"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:itineraryData.itinerary.destination})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Duration:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[itineraryData.itinerary.total_days," days"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Cost:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["$",calculateTotalCost().toFixed(0)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Places:"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:itineraryData.metadata.places_used_in_itinerary})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"lg:col-span-3",children:currentDay&&jsxRuntimeExports.jsxs(Card,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Day ",currentDay.day,": ",currentDay.theme]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:formatDate(currentDay.date)})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:currentDay.events.map((event,index)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",onMouseEnter:e=>handleEventHover(event,e),onMouseLeave:handleEventHoverLeave,children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-xl ${getEventColor(event.type)}`,children:getEventIcon(event.type)})}),event.photo&&jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("img",{src:event.photo,alt:event.title,className:"w-16 h-16 rounded-lg object-cover",onError:e=>{e.currentTarget.style.display="none"}})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:event.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[event.time&&jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:event.time}),event.cost&&event.cost!=="0"&&jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:event.cost})]})]}),event.description&&jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:event.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[event.location&&jsxRuntimeExports.jsxs("span",{children:["ðŸ“ ",event.location]}),event.duration&&jsxRuntimeExports.jsxs("span",{children:["â±ï¸ ",event.duration]}),event.cuisine&&jsxRuntimeExports.jsxs("span",{children:["ðŸ½ï¸ ",event.cuisine]}),event.priceRange&&jsxRuntimeExports.jsxs("span",{children:["ðŸ’° ",event.priceRange]}),event.rating&&jsxRuntimeExports.jsxs("span",{children:["â­ ",event.rating]}),event.reviews&&jsxRuntimeExports.jsxs("span",{children:["ðŸ‘¥ ",event.reviews," reviews"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-400 dark:text-gray-500",children:[event.website&&jsxRuntimeExports.jsx("a",{href:event.website,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 dark:hover:text-blue-400",children:"ðŸŒ Website"}),event.phone&&jsxRuntimeExports.jsxs("span",{children:["ðŸ“ž ",event.phone]}),event.openingHours&&jsxRuntimeExports.jsxs("span",{children:["ðŸ•’ ",event.openingHours]})]})]})]},index))})]})})]})}),hoveredEvent&&hoverPosition&&jsxRuntimeExports.jsxs("div",{className:"fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl p-4 max-w-sm",style:{left:hoverPosition.x+10,top:hoverPosition.y-10,transform:"translateY(-100%)"},children:[hoveredEvent.photo&&jsxRuntimeExports.jsx("img",{src:hoveredEvent.photo,alt:hoveredEvent.title,className:"w-full h-32 object-cover rounded-lg mb-3",onError:e=>{e.currentTarget.style.display="none"}}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:getEventIcon(hoveredEvent.type)}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:hoveredEvent.title})]}),hoveredEvent.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:hoveredEvent.description}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-xs text-gray-500 dark:text-gray-400",children:[hoveredEvent.location&&jsxRuntimeExports.jsxs("div",{children:["ðŸ“ ",hoveredEvent.location]}),hoveredEvent.duration&&jsxRuntimeExports.jsxs("div",{children:["â±ï¸ ",hoveredEvent.duration]}),hoveredEvent.cuisine&&jsxRuntimeExports.jsxs("div",{children:["ðŸ½ï¸ ",hoveredEvent.cuisine]}),hoveredEvent.priceRange&&jsxRuntimeExports.jsxs("div",{children:["ðŸ’° ",hoveredEvent.priceRange]}),hoveredEvent.rating&&jsxRuntimeExports.jsxs("div",{children:["â­ ",hoveredEvent.rating," rating"]}),hoveredEvent.reviews&&jsxRuntimeExports.jsxs("div",{children:["ðŸ‘¥ ",hoveredEvent.reviews," reviews"]}),hoveredEvent.cost&&hoveredEvent.cost!=="0"&&jsxRuntimeExports.jsxs("div",{children:["ðŸ’µ ",hoveredEvent.cost]}),hoveredEvent.phone&&jsxRuntimeExports.jsxs("div",{children:["ðŸ“ž ",hoveredEvent.phone]}),hoveredEvent.openingHours&&jsxRuntimeExports.jsxs("div",{children:["ðŸ•’ ",hoveredEvent.openingHours]}),hoveredEvent.website&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("a",{href:hoveredEvent.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"ðŸŒ Visit Website"})}),hoveredEvent.types&&hoveredEvent.types.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:hoveredEvent.types.slice(0,3).map((type,index)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs",children:type},index))})]})]})]})};export{ItineraryPage as default};
