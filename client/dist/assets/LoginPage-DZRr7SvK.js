import{u as useAuth,j as jsxRuntimeExports,m as motion,a as ModernCard,x as logoImage,M as ModernButton,y as GoogleSignIn}from"./index-lko4Hfbd.js";import{r as reactExports}from"./vendor-WBEadHvS.js";import{u as useNavigate,a as useLocation}from"./router-BTz3HJhu.js";import{e as ArrowLeft,C as Check,A as AlertTriangle,M as Mail,L as Lock,E as EyeOff,a as Eye,b as Loader2,U as User}from"./ui-B24o0VU9.js";const LoginPage=()=>{const{login,isAuthenticated}=useAuth(),navigate=useNavigate(),location=useLocation(),[formData,setFormData]=reactExports.useState({email:"",password:""}),[showPassword,setShowPassword]=reactExports.useState(!1),[errors,setErrors]=reactExports.useState({}),[isLoading,setIsLoading]=reactExports.useState(!1),[showSuccess,setShowSuccess]=reactExports.useState(!1),handleGoogleLoginSuccess=()=>{setShowSuccess(!0),sessionStorage.removeItem("authRedirect"),navigate(redirectPath,{replace:!0})},handleGoogleLoginError=error=>{setErrors({general:error})},redirectInfo=location.state||JSON.parse(sessionStorage.getItem("authRedirect")||"{}"),redirectPath=redirectInfo.from||"/dashboard",redirectMessage=redirectInfo.message||"Welcome back!";reactExports.useEffect(()=>{isAuthenticated&&(sessionStorage.removeItem("authRedirect"),navigate(redirectPath,{replace:!0}))},[isAuthenticated,navigate,redirectPath]);const validateForm=()=>{const newErrors={},emailTrimmed=formData.email.trim();return emailTrimmed?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailTrimmed)?emailTrimmed.length>254&&(newErrors.email="Email address is too long"):newErrors.email="Please enter a valid email address":newErrors.email="Email is required",formData.password.trim()?formData.password.length<6?newErrors.password="Password must be at least 6 characters":formData.password.length>128&&(newErrors.password="Password is too long"):newErrors.password="Password is required",setErrors(newErrors),Object.keys(newErrors).length===0},handleSubmit=async e=>{if(e.preventDefault(),!!validateForm()){setIsLoading(!0),setErrors({});try{await login(formData.email,formData.password),setShowSuccess(!0),setTimeout(()=>{sessionStorage.removeItem("authRedirect"),navigate(redirectPath,{replace:!0})},1500)}catch(error){console.error("Login error:",error),setErrors({general:error.message||"Login failed. Please try again."})}finally{setIsLoading(!1)}}},handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value})),errors[name]&&setErrors(prev=>({...prev,[name]:void 0}))},handleGoBack=()=>{navigate(redirectPath!=="/dashboard"?redirectPath:"/")};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-cyan-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md",children:[jsxRuntimeExports.jsxs(motion.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:handleGoBack,className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors mb-6",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Back"})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:jsxRuntimeExports.jsxs(ModernCard,{className:"p-8 shadow-2xl border-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.2},className:"w-24 h-24 mx-auto mb-2 flex items-center justify-center",children:jsxRuntimeExports.jsx("img",{src:logoImage,alt:"SafarBot",className:"w-24 h-24 object-contain"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome Back"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:redirectMessage}),redirectPath!=="/dashboard"&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-2",children:["You'll be redirected to: ",redirectPath]})]}),showSuccess&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-xl flex items-center space-x-3",children:[jsxRuntimeExports.jsx(Check,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),jsxRuntimeExports.jsx("span",{className:"text-green-700 dark:text-green-300 font-medium",children:"Login successful! Redirecting..."})]}),errors.general&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-xl flex items-center space-x-3",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),jsxRuntimeExports.jsx("span",{className:"text-red-700 dark:text-red-300 font-medium",children:errors.general})]}),jsxRuntimeExports.jsxs("form",{onSubmit:handleSubmit,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:formData.email,onChange:handleInputChange,className:`w-full pl-12 pr-4 py-2.5 border-2 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 placeholder:text-sm focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 ${errors.email?"border-red-300 dark:border-red-600":"border-gray-200 dark:border-gray-600"}`,placeholder:"Enter your email",disabled:isLoading})]}),errors.email&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:errors.email})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:showPassword?"text":"password",name:"password",value:formData.password,onChange:handleInputChange,className:`w-full pl-12 pr-12 py-2.5 border-2 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 placeholder:text-sm focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 ${errors.password?"border-red-300 dark:border-red-600":"border-gray-200 dark:border-gray-600"}`,placeholder:"Enter your password",disabled:isLoading}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>setShowPassword(!showPassword),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",disabled:isLoading,children:showPassword?jsxRuntimeExports.jsx(EyeOff,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Eye,{className:"w-5 h-5"})})]}),errors.password&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:errors.password})]}),jsxRuntimeExports.jsx(ModernButton,{type:"submit",variant:"solid",size:"md",className:"w-full text-sm",disabled:isLoading,children:isLoading?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Signing In..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(User,{className:"w-4 h-4 mr-2"}),"Sign In"]})})]}),jsxRuntimeExports.jsxs("div",{className:"relative my-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center text-sm",children:jsxRuntimeExports.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Or continue with"})})]}),jsxRuntimeExports.jsx(GoogleSignIn,{onSuccess:handleGoogleLoginSuccess,onError:handleGoogleLoginError,className:"w-full"}),jsxRuntimeExports.jsxs("div",{className:"mt-8 text-center space-y-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>navigate("/signup"),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors",children:"Sign up here"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>navigate("/forgot-password"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"Forgot your password?"})]})]})})]})})};export{LoginPage as default};
