var __defProp=Object.defineProperty;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value;var __publicField=(obj,key,value)=>__defNormalProp(obj,typeof key!="symbol"?key+"":key,value);import{j as jsxRuntimeExports,L as LoadingSpinner,w as weatherAPI,u as useAuth,i as itineraryAPI,g as ModernHeader}from"./index-lko4Hfbd.js";import{r as reactExports}from"./vendor-WBEadHvS.js";import{G as GoogleMaps}from"./GoogleMaps-CPmUycxa.js";import{A as AdditionalPlaces,P as PlaceDetailsModal}from"./AdditionalPlaces-C2L1Yjet.js";import{b as Loader2,Q as DollarSign,f as Clock,B as Utensils,g as MapPin,l as Star,P as Phone,O as Globe,q as Hotel,e as ArrowLeft,m as Calendar,J as AlertCircle,ap as IndianRupee}from"./ui-B24o0VU9.js";import{C as Card}from"./Card-BWSuOQqg.js";import{a as useLocation,u as useNavigate}from"./router-BTz3HJhu.js";const QUALITY_TO_WIDTH={low:200,medium:320,high:480},QUALITY_TO_HEIGHT={low:150,medium:240,high:360},prefetchCache=new Map,buildGooglePhotoUrl=(url,quality)=>{const width=QUALITY_TO_WIDTH[quality],height=QUALITY_TO_HEIGHT[quality];if(/=s\d+/.test(url))return url.replace(/=s\d+/,`=s${width}`);if(/=w\d+-h\d+/.test(url))return url.replace(/=w\d+-h\d+/,`=w${width}-h${height}`);if(/=w\d+/.test(url))return url.replace(/=w\d+/,`=w${width}`);if(/=h\d+/.test(url))return url.replace(/=h\d+/,`=h${height}`);if(url.includes("?")){const separator=url.endsWith("&")||url.endsWith("?")?"":"&";return`${url}${separator}w=${width}`}return url.includes("=")?`${url}=w${width}-h${height}`:`${url}?w=${width}&h=${height}`},getOptimizedImageUrl=(originalSrc,quality="medium")=>originalSrc?originalSrc.includes("maps.googleapis.com")?buildGooglePhotoUrl(originalSrc,quality):originalSrc:"",prefetchImage=(originalSrc,quality="medium")=>{if(typeof window>"u"||typeof Image>"u")return Promise.resolve();const optimizedSrc=getOptimizedImageUrl(originalSrc,quality);if(!optimizedSrc)return Promise.resolve();if(prefetchCache.has(optimizedSrc))return prefetchCache.get(optimizedSrc);const promise=new Promise(resolve=>{const img=new Image;img.decoding="async",img.loading="eager",img.src=optimizedSrc;const done=()=>resolve();img.onload=done,img.onerror=done});return prefetchCache.set(optimizedSrc,promise),promise},prefetchPlaceMedia=({placeDetails=[],additionalPlaces=[]})=>{const imageUrls=new Set;placeDetails.forEach(place=>{[place.high_res_image,place.thumbnail,place.serpapi_thumbnail,place.photos_link].filter(url=>!!url).forEach(url=>imageUrls.add(url))}),additionalPlaces.forEach(place=>{[place.high_res_image,place.thumbnail,place.serpapi_thumbnail].filter(url=>!!url).forEach(url=>imageUrls.add(url))});const promises=[];return imageUrls.forEach(url=>{const quality=url.includes("high_res")?"high":"medium";promises.push(prefetchImage(url,quality))}),Promise.all(promises).then(()=>({totalRequested:imageUrls.size}))},OptimizedImage=({src,alt,className="",fallbackSrc,loading="lazy",quality="medium",onLoad,onError})=>{const[imageState,setImageState]=reactExports.useState("loading"),[currentSrc,setCurrentSrc]=reactExports.useState(src),imgRef=reactExports.useRef(null),[isInView,setIsInView]=reactExports.useState(!1);reactExports.useEffect(()=>{src!==currentSrc&&(setImageState("loading"),setCurrentSrc(src))},[src]),reactExports.useEffect(()=>{if(loading==="lazy"&&imgRef.current){const observer=new IntersectionObserver(([entry])=>{entry.isIntersecting&&(setIsInView(!0),observer.disconnect())},{threshold:.1});return observer.observe(imgRef.current),()=>observer.disconnect()}else setIsInView(!0)},[loading]);const handleLoad=()=>{setImageState("loaded"),onLoad==null||onLoad()},handleError=()=>{fallbackSrc&&currentSrc!==fallbackSrc?(setCurrentSrc(fallbackSrc),setImageState("loading")):(setImageState("error"),onError==null||onError())},optimizedSrc=isInView?getOptimizedImageUrl(currentSrc,quality):"";return jsxRuntimeExports.jsxs("div",{className:`relative overflow-hidden ${className}`,children:[imageState==="loading"&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:jsxRuntimeExports.jsx(Loader2,{className:"w-6 h-6 animate-spin text-gray-400"})}),imageState==="error"&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-500",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl mb-1",children:"ðŸ“·"}),jsxRuntimeExports.jsx("div",{className:"text-xs",children:"Image unavailable"})]})}),optimizedSrc&&jsxRuntimeExports.jsx("img",{ref:imgRef,src:optimizedSrc,alt,className:`w-full h-full object-cover transition-all duration-300 ${imageState==="loaded"?"opacity-100 scale-100":"opacity-0 scale-105"}`,onLoad:handleLoad,onError:handleError,loading,decoding:"async"})]})},EnhancedHoverPopup=({place,position,type,isVisible,onMouseEnter,onMouseLeave})=>{const popupRef=reactExports.useRef(null),[adjustedPosition,setAdjustedPosition]=reactExports.useState(null),[isAnimating,setIsAnimating]=reactExports.useState(!1),[orientation,setOrientation]=reactExports.useState("right"),isPlaceDetails=p=>"title"in p,getPlaceMetadata=()=>place?{title:isPlaceDetails(place)?place.title:place.name,rating:place.rating,address:isPlaceDetails(place)?place.address:place.location,phone:place.phone,website:place.website,hours:(isPlaceDetails(place),place.hours),description:place.description,category:place.category,thumbnail:isPlaceDetails(place)?place.high_res_image||place.thumbnail||place.serpapi_thumbnail:void 0,reviews:isPlaceDetails(place)?place.reviews:void 0,price:isPlaceDetails(place)?place.price:place.price_range,cuisine:isPlaceDetails(place)?void 0:place.cuisine,amenities:isPlaceDetails(place)?void 0:place.amenities,operatingHours:isPlaceDetails(place)?place.operating_hours:void 0,coordinates:isPlaceDetails(place)?place.gps_coordinates:place.coordinates}:null,metadata=reactExports.useMemo(()=>getPlaceMetadata(),[place]);reactExports.useEffect(()=>{if(!position)return;const estimatedWidth=420,estimatedHeight=320,viewportWidth=window.innerWidth,viewportHeight=window.innerHeight,padding=20;let x=position.x,y=position.y,nextOrientation="right";x+estimatedWidth>viewportWidth-padding&&(x=position.x-estimatedWidth-16,nextOrientation="left"),x<padding&&(x=padding,nextOrientation="right"),y=position.y-estimatedHeight/2,y+estimatedHeight>viewportHeight-padding&&(y=viewportHeight-estimatedHeight-padding),y<padding&&(y=padding),setOrientation(nextOrientation),setAdjustedPosition({x,y})},[position]),reactExports.useEffect(()=>{if(isVisible)setIsAnimating(!0);else{const timer=setTimeout(()=>setIsAnimating(!1),200);return()=>clearTimeout(timer)}},[isVisible]);const highlightTags=reactExports.useMemo(()=>{if(!metadata)return[];const tags=[];return metadata.price&&tags.push({key:"price",icon:jsxRuntimeExports.jsx(DollarSign,{className:"w-3.5 h-3.5 text-emerald-500"}),value:metadata.price}),metadata.hours&&tags.push({key:"hours",icon:jsxRuntimeExports.jsx(Clock,{className:"w-3.5 h-3.5 text-blue-500"}),value:metadata.hours}),metadata.cuisine&&tags.push({key:"cuisine",icon:jsxRuntimeExports.jsx(Utensils,{className:"w-3.5 h-3.5 text-amber-500"}),value:metadata.cuisine}),metadata.category&&tags.push({key:"category",icon:jsxRuntimeExports.jsx(MapPin,{className:"w-3.5 h-3.5 text-indigo-500"}),value:metadata.category}),tags},[metadata]);if(!isVisible||!place||!adjustedPosition||!metadata)return null;const getMapUrl=()=>{if(metadata.coordinates){if("latitude"in metadata.coordinates){const{latitude,longitude}=metadata.coordinates;return`https://www.google.com/maps/search/?api=1&query=${latitude},${longitude}`}else if("lat"in metadata.coordinates){const{lat,lng}=metadata.coordinates;return`https://www.google.com/maps/search/?api=1&query=${lat},${lng}`}}return`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(metadata.title+" "+(metadata.address||""))}`},getTypeIcon=()=>{var _a;const category=((_a=metadata.category)==null?void 0:_a.toLowerCase())||"";return type==="hotel"||category.includes("hotel")||category.includes("accommodation")?jsxRuntimeExports.jsx(Hotel,{className:"w-4 h-4"}):type==="restaurant"||category.includes("restaurant")||category.includes("food")?jsxRuntimeExports.jsx(Utensils,{className:"w-4 h-4"}):type==="activity"||type==="attraction"||category.includes("attraction")||category.includes("museum")?jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4"})},getTypeLabel=()=>{var _a;const category=((_a=metadata.category)==null?void 0:_a.toLowerCase())||"";return type==="hotel"||category.includes("hotel")||category.includes("accommodation")?"ðŸ¨ Accommodation":type==="restaurant"||category.includes("restaurant")||category.includes("food")?"ðŸ½ï¸ Restaurant":type==="activity"||category.includes("activity")?"ðŸŽ¯ Activity":type==="attraction"||category.includes("attraction")||category.includes("museum")?"ðŸ›ï¸ Attraction":metadata.category||"ðŸ“ Place"};return jsxRuntimeExports.jsxs("div",{ref:popupRef,className:`fixed z-50 bg-white/95 dark:bg-slate-900/95 backdrop-blur-md rounded-2xl shadow-xl border border-gray-200/70 dark:border-slate-700/60 min-w-[320px] max-w-[420px] overflow-hidden transition-all duration-200 ease-out ${isAnimating?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-2"}`,style:{left:adjustedPosition.x,top:adjustedPosition.y},onMouseEnter,onMouseLeave,children:[jsxRuntimeExports.jsx("div",{className:`absolute top-1/2 w-3.5 h-3.5 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 transform -translate-y-1/2 rotate-45 ${orientation==="left"?"right-[-7px]":"left-[-7px]"}`,"aria-hidden":"true"}),metadata.thumbnail?jsxRuntimeExports.jsxs("div",{className:"w-full h-44 bg-gray-200 dark:bg-gray-800 overflow-hidden relative",children:[jsxRuntimeExports.jsx(OptimizedImage,{src:metadata.thumbnail??"",alt:metadata.title||"",className:"w-full h-full",quality:"medium",loading:"eager",fallbackSrc:"/api/placeholder/400/300"},metadata.thumbnail),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent"}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-x-4 bottom-4 flex items-end justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-white drop-shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/20 backdrop-blur-sm text-xs font-medium uppercase tracking-wide",children:[getTypeIcon(),jsxRuntimeExports.jsx("span",{children:getTypeLabel()})]}),jsxRuntimeExports.jsx("h4",{className:"text-lg font-semibold leading-tight max-w-[260px]",children:metadata.title})]}),metadata.rating&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 bg-black/60 px-2.5 py-1.5 rounded-full text-sm font-semibold text-white",children:[jsxRuntimeExports.jsx(Star,{className:"w-4 h-4 text-amber-400 fill-current"}),jsxRuntimeExports.jsx("span",{children:metadata.rating}),metadata.reviews&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-white/80",children:["(",metadata.reviews,")"]})]})]})]}):jsxRuntimeExports.jsx("div",{className:"w-full h-44 bg-gradient-to-br from-gray-200 via-gray-300 to-gray-400 dark:from-slate-700 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center text-gray-600 dark:text-slate-300 text-sm",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-1",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:"ðŸ“·"}),jsxRuntimeExports.jsx("div",{children:"No Photo Available"})]})}),jsxRuntimeExports.jsxs("div",{className:"p-5 space-y-4",children:[metadata.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed line-clamp-3",children:metadata.description}),highlightTags.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:highlightTags.map(tag=>jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100/80 dark:bg-slate-800/80 text-xs font-medium text-gray-700 dark:text-slate-200 shadow-sm",children:[tag.icon,jsxRuntimeExports.jsx("span",{className:"truncate max-w-[120px]",children:tag.value})]},tag.key))}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[metadata.address&&jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 mt-0.5",children:jsxRuntimeExports.jsx("div",{className:"p-1 rounded-md bg-blue-50 dark:bg-blue-900/40",children:jsxRuntimeExports.jsx(MapPin,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-300"})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-snug",children:metadata.address}),jsxRuntimeExports.jsxs("a",{href:getMapUrl(),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs font-semibold text-blue-600 hover:text-blue-700 dark:text-blue-300",children:["View on Maps",jsxRuntimeExports.jsx("span",{"aria-hidden":!0,children:"â†’"})]})]})]}),metadata.phone&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-1 rounded-md bg-emerald-50 dark:bg-emerald-900/30",children:jsxRuntimeExports.jsx(Phone,{className:"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-300"})}),jsxRuntimeExports.jsx("a",{href:`tel:${metadata.phone}`,className:"text-sm font-medium text-emerald-700 hover:text-emerald-800 dark:text-emerald-300",children:metadata.phone})]}),metadata.website&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-1 rounded-md bg-indigo-50 dark:bg-indigo-900/30",children:jsxRuntimeExports.jsx(Globe,{className:"w-3.5 h-3.5 text-indigo-600 dark:text-indigo-300"})}),jsxRuntimeExports.jsx("a",{href:metadata.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-indigo-600 hover:text-indigo-700 truncate max-w-[220px]",children:"Visit Website"})]})]}),metadata.amenities&&metadata.amenities.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Amenities"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[metadata.amenities.slice(0,4).map((amenity,idx)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-200 text-xs rounded-full",children:amenity},`${amenity}-${idx}`)),metadata.amenities.length>4&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-400",children:["+",metadata.amenities.length-4," more"]})]})]}),metadata.operatingHours&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Operating Hours"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-300",children:Object.entries(metadata.operatingHours).filter(([,hours])=>!!hours).slice(0,4).map(([day,hours])=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-3 capitalize",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-500 dark:text-gray-400",children:day}),jsxRuntimeExports.jsx("span",{children:hours})]},day))}),Object.keys(metadata.operatingHours).length>4&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400",children:["+",Object.keys(metadata.operatingHours).length-4," more days"]})]})]})]})},WeatherCard=({city,countryCode,className="",compact=!1})=>{var _a;const[weatherData,setWeatherData]=reactExports.useState(null),[loading,setLoading]=reactExports.useState(!0),[error,setError]=reactExports.useState(null);reactExports.useEffect(()=>{city&&(async()=>{try{setLoading(!0),setError(null);const data=await weatherAPI.getCurrentWeather(city,countryCode);setWeatherData(data)}catch(err){setError(err.message||"Failed to fetch weather")}finally{setLoading(!1)}})()},[city,countryCode]);const getWeatherIcon=iconCode=>`https://openweathermap.org/img/wn/${iconCode}@2x.png`,getTemperatureColor=temp=>temp<10?"text-blue-600":temp<20?"text-green-600":temp<30?"text-yellow-600":"text-red-600";return loading?jsxRuntimeExports.jsx(Card,{className:`p-3 ${className}`,children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-16",children:jsxRuntimeExports.jsx(LoadingSpinner,{size:"sm"})})}):error?jsxRuntimeExports.jsx(Card,{className:`p-3 ${className}`,children:jsxRuntimeExports.jsxs("div",{className:"text-center text-red-600",children:[jsxRuntimeExports.jsx("div",{className:"text-lg",children:"ðŸŒ¤ï¸"}),jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Weather unavailable"})]})}):weatherData?compact?jsxRuntimeExports.jsxs(Card,{className:`p-3 ${className}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("img",{src:getWeatherIcon(weatherData.current.icon||weatherData.current.condition||""),alt:weatherData.current.description||weatherData.current.condition,className:"w-8 h-8"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:`text-lg font-bold ${getTemperatureColor(weatherData.current.temperature)}`,children:[Math.round(weatherData.current.temperature),"Â°C"]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 capitalize",children:weatherData.current.description})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-800",children:weatherData.location.city}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600",children:[weatherData.current.humidity,"% humidity"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Wind:"}),jsxRuntimeExports.jsxs("span",{children:[weatherData.current.wind_speed," m/s"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Pressure:"}),jsxRuntimeExports.jsxs("span",{children:[weatherData.current.pressure," hPa"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Visibility:"}),jsxRuntimeExports.jsxs("span",{children:[weatherData.current.visibility," km"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Feels like:"})," ",weatherData.current.feels_like?Math.round(weatherData.current.feels_like):Math.round(weatherData.current.temperature),"Â°C"]})]})]}):jsxRuntimeExports.jsxs(Card,{className:`p-4 ${className}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[weatherData.location.city,", ",weatherData.location.country]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Current weather"})]}),jsxRuntimeExports.jsx("img",{src:getWeatherIcon(weatherData.current.icon||weatherData.current.condition||""),alt:weatherData.current.description||weatherData.current.condition||"",className:"w-12 h-12"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:`text-2xl font-bold ${getTemperatureColor(weatherData.current.temperature)}`,children:[Math.round(weatherData.current.temperature),"Â°C"]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:["Feels like ",weatherData.current.feels_like?Math.round(weatherData.current.feels_like):Math.round(weatherData.current.temperature),"Â°C"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-medium capitalize text-gray-800",children:weatherData.current.description}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:[weatherData.current.humidity,"% humidity"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs text-gray-600",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Wind"}),jsxRuntimeExports.jsxs("div",{children:[weatherData.current.wind_speed," m/s"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Pressure"}),jsxRuntimeExports.jsxs("div",{children:[weatherData.current.pressure," hPa"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Visibility"}),jsxRuntimeExports.jsxs("div",{children:[weatherData.current.visibility," km"]})]})]}),weatherData.recommendations&&weatherData.recommendations.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-blue-800 mb-1",children:"ðŸ’¡ Travel Tip"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-blue-700",children:typeof weatherData.recommendations[0]=="string"?weatherData.recommendations[0]:(_a=weatherData.recommendations[0])==null?void 0:_a.message})]})]}):null},WeatherDisplay=({weatherData,className="",compact=!1})=>{if(!weatherData)return null;const{location,current,recommendations}=weatherData,getWeatherIcon=description=>{const desc=description.toLowerCase();return desc.includes("clear")?"â˜€ï¸":desc.includes("cloud")?"â˜ï¸":desc.includes("rain")?"ðŸŒ§ï¸":desc.includes("snow")?"â„ï¸":desc.includes("storm")?"â›ˆï¸":desc.includes("fog")||desc.includes("mist")?"ðŸŒ«ï¸":"ðŸŒ¤ï¸"},getTemperatureColor=temp=>temp<10?"text-blue-600 dark:text-blue-400":temp<20?"text-green-600 dark:text-green-400":temp<30?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return compact?jsxRuntimeExports.jsxs("div",{className:`bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800 ${className}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:getWeatherIcon(current.description||current.condition)}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[location.city,", ",location.country]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:current.description})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("p",{className:`text-2xl font-bold ${getTemperatureColor(current.temperature)}`,children:[Math.round(current.temperature),"Â°C"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Feels like ",current.feels_like?Math.round(current.feels_like):Math.round(current.temperature),"Â°C"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-blue-200 dark:border-blue-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Humidity:"}),jsxRuntimeExports.jsxs("span",{children:[current.humidity,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Wind:"}),jsxRuntimeExports.jsxs("span",{children:[current.wind_speed," m/s"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Pressure:"}),jsxRuntimeExports.jsxs("span",{children:[current.pressure," hPa"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Visibility:"}),jsxRuntimeExports.jsxs("span",{children:[current.visibility," km"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Location:"})," ",location.coordinates?`${location.coordinates.lat.toFixed(2)}, ${location.coordinates.lon.toFixed(2)}`:location.lat&&location.lon?`${location.lat.toFixed(2)}, ${location.lon.toFixed(2)}`:"N/A"]})]})]}):jsxRuntimeExports.jsx(Card,{className:`bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800 ${className}`,children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("span",{className:"text-4xl",children:getWeatherIcon(current.description||current.condition)}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[location.city,", ",location.country]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 capitalize",children:current.description})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("p",{className:`text-4xl font-bold ${getTemperatureColor(current.temperature)}`,children:[Math.round(current.temperature),"Â°C"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Feels like ",current.feels_like?Math.round(current.feels_like):Math.round(current.temperature),"Â°C"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Humidity"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[current.humidity,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Wind Speed"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[current.wind_speed," m/s"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pressure"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[current.pressure," hPa"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Visibility"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[current.visibility," km"]})]})]}),recommendations&&recommendations.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-amber-800 dark:text-amber-200 mb-2 flex items-center",children:"ðŸ’¡ Weather Recommendations"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:recommendations.map((recommendation,index)=>jsxRuntimeExports.jsxs("li",{className:"text-sm text-amber-700 dark:text-amber-300 flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:"â€¢"}),typeof recommendation=="string"?recommendation:recommendation.message]},index))})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 text-center",children:["ðŸ“ ",location.coordinates?`${location.coordinates.lat.toFixed(4)}, ${location.coordinates.lon.toFixed(4)}`:location.lat&&location.lon?`${location.lat.toFixed(4)}, ${location.lon.toFixed(4)}`:"N/A"]})]})})},extractCityName=formattedAddress=>formattedAddress?formattedAddress.split(",").map(part=>part.trim())[0]||formattedAddress:"",extractCountryCode=formattedAddress=>{if(!formattedAddress)return;const parts=formattedAddress.split(",").map(part=>part.trim()),lastPart=parts[parts.length-1];return{India:"IN",USA:"US","United States":"US",UK:"GB","United Kingdom":"GB",England:"GB",Canada:"CA",Australia:"AU",Germany:"DE",France:"FR",Italy:"IT",Spain:"ES",Japan:"JP",China:"CN",Brazil:"BR",Mexico:"MX",Russia:"RU","South Korea":"KR",Thailand:"TH",Indonesia:"ID",Malaysia:"MY",Singapore:"SG",Philippines:"PH",Vietnam:"VN",Turkey:"TR",Egypt:"EG","South Africa":"ZA",Nigeria:"NG",Kenya:"KE",Morocco:"MA",Argentina:"AR",Chile:"CL",Peru:"PE",Colombia:"CO",Venezuela:"VE",Ecuador:"EC",Bolivia:"BO",Paraguay:"PY",Uruguay:"UY",Guyana:"GY",Suriname:"SR","French Guiana":"GF","Falkland Islands":"FK","South Georgia":"GS",Antarctica:"AQ"}[lastPart]||void 0},parseLocationForWeather=formattedAddress=>({city:extractCityName(formattedAddress),countryCode:extractCountryCode(formattedAddress)});class PhotoPrefetcher{constructor(){__publicField(this,"prefetchedUrls",new Set);__publicField(this,"prefetchQueue",[]);__publicField(this,"isProcessing",!1);__publicField(this,"maxConcurrent",6)}async prefetchPhotos(metadata){if(!metadata||!metadata.photo_urls||metadata.photo_urls.length===0){console.log("ðŸ“¸ No photos to prefetch");return}console.log(`ðŸ“¸ Starting prefetch for ${metadata.total_photos} photos`);const newUrls=metadata.photo_urls.filter(url=>!this.prefetchedUrls.has(url));if(newUrls.length===0){console.log("ðŸ“¸ All photos already prefetched");return}console.log(`ðŸ“¸ Prefetching ${newUrls.length} new photos`),this.prefetchQueue.push(...newUrls),this.isProcessing||await this.processQueue()}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.prefetchQueue.length>0;){const batch=this.prefetchQueue.splice(0,this.maxConcurrent);await Promise.allSettled(batch.map(url=>this.prefetchSinglePhoto(url)))}this.isProcessing=!1,console.log("ðŸ“¸ Photo prefetch complete")}}async prefetchSinglePhoto(url){if(!this.prefetchedUrls.has(url))try{await fetch(url,{method:"GET",mode:"cors",cache:"force-cache",priority:"low"}),this.prefetchedUrls.add(url),console.log(`âœ… Prefetched: ${url.substring(0,50)}...`)}catch(error){console.warn(`âš ï¸  Failed to prefetch: ${url.substring(0,50)}...`,error)}}prefetchViaLinkTag(urls){urls.forEach(url=>{if(this.prefetchedUrls.has(url))return;const link=document.createElement("link");link.rel="prefetch",link.as="image",link.href=url,link.crossOrigin="anonymous",document.head.appendChild(link),this.prefetchedUrls.add(url)}),console.log(`ðŸ“¸ Added ${urls.length} link prefetch tags`)}preloadCriticalImages(urls){urls.forEach(url=>{const link=document.createElement("link");link.rel="preload",link.as="image",link.href=url,link.crossOrigin="anonymous",document.head.appendChild(link)}),console.log(`ðŸš€ Preloaded ${urls.length} critical images`)}clearCache(){this.prefetchedUrls.clear(),this.prefetchQueue=[],console.log("ðŸ—‘ï¸  Prefetch cache cleared")}getStats(){return{prefetched:this.prefetchedUrls.size,queued:this.prefetchQueue.length}}}const photoPrefetcher=new PhotoPrefetcher,USD_TO_INR_RATE=83,ResultsPage=()=>{const location=useLocation(),navigate=useNavigate(),{isAuthenticated,user,isLoading:authLoading}=useAuth(),[itineraryData,setItineraryData]=reactExports.useState(null),formatINR=reactExports.useCallback(amount=>!amount||Number.isNaN(amount)?"â‚¹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Math.round(amount)),[]),convertCostToINR=reactExports.useCallback(value=>{if(value==null||value==="")return{display:"",numeric:0};if(typeof value=="number"&&!Number.isNaN(value)){const amountInInr=value*USD_TO_INR_RATE;return{display:formatINR(amountInInr),numeric:amountInInr}}const raw=String(value).trim();if(!raw)return{display:"",numeric:0};if(/free/i.test(raw))return{display:"Free",numeric:0};const alreadyINR=/â‚¹|INR|Rs\.?/i.test(raw),digitMatches=[...raw.matchAll(/\d+(?:\.\d+)?/g)],leadingText=digitMatches.length>0?raw.slice(0,digitMatches[0].index||0).trim():raw,trailingText=digitMatches.length>0?raw.slice((digitMatches[digitMatches.length-1].index||0)+digitMatches[digitMatches.length-1][0].length).trim():"";if(alreadyINR){const numbers2=digitMatches.map(match=>parseFloat(match[0])).filter(num=>!Number.isNaN(num)),numeric2=numbers2.length?numbers2.reduce((sum,num)=>sum+num,0)/numbers2.length:0;return{display:raw.replace(/Rs\.?/gi,"â‚¹").replace(/INR/gi,"â‚¹").replace(/\$/g,"â‚¹"),numeric:numeric2}}const numbers=digitMatches.map(match=>parseFloat(match[0])).filter(num=>!Number.isNaN(num));if(!numbers.length)return{display:raw.replace(/\$/g,"â‚¹"),numeric:0};const convertedAmounts=numbers.map(num=>num*USD_TO_INR_RATE),separator=raw.toLowerCase().includes(" to ")?" to ":raw.includes("-")?" - ":numbers.length>1?", ":"",displayCore=convertedAmounts.map(amount=>formatINR(amount)).join(separator),display=[leadingText,displayCore,trailingText].filter(Boolean).join(" ").replace(/\s+/g," ").trim(),numeric=convertedAmounts.reduce((sum,amount)=>sum+amount,0)/convertedAmounts.length;return{display,numeric}},[formatINR]),[enhancedResponse,setEnhancedResponse]=reactExports.useState(null),[allPlaceDetails,setAllPlaceDetails]=reactExports.useState({}),[weatherData,setWeatherData]=reactExports.useState(null),[dailyPlans,setDailyPlans]=reactExports.useState([]),[hotels,setHotels]=reactExports.useState([]),[isLoading,setIsLoading]=reactExports.useState(!1),[error,setError]=reactExports.useState(null),[activeTab,setActiveTab]=reactExports.useState("itinerary"),[itinerarySummary,setItinerarySummary]=reactExports.useState(null),[tips,setTips]=reactExports.useState([]),hasGeneratedRef=reactExports.useRef(!1),abortControllerRef=reactExports.useRef(null),previousLocationStateRef=reactExports.useRef(location.state),isInitializedRef=reactExports.useRef(!1),itineraryBudgetDisplay=reactExports.useMemo(()=>{var _a;const enhancedBudget=(_a=enhancedResponse==null?void 0:enhancedResponse.itinerary)==null?void 0:_a.budget_estimate;return typeof enhancedBudget=="number"&&!Number.isNaN(enhancedBudget)?formatINR(enhancedBudget):itinerarySummary!=null&&itinerarySummary.budget_estimate&&!Number.isNaN(itinerarySummary.budget_estimate)?formatINR(itinerarySummary.budget_estimate):"N/A"},[enhancedResponse,itinerarySummary,formatINR]),userBudgetDisplay=reactExports.useMemo(()=>{const rawBudgetValue=itineraryData==null?void 0:itineraryData.budget;if(typeof rawBudgetValue=="number"&&!Number.isNaN(rawBudgetValue))return formatINR(rawBudgetValue);if(typeof rawBudgetValue=="string"){const parsed=Number(rawBudgetValue.replace(/[^0-9.]/g,""));if(!Number.isNaN(parsed))return formatINR(parsed)}return"N/A"},[itineraryData,formatINR]),navbarBudgetDisplay=reactExports.useMemo(()=>isLoading?userBudgetDisplay:itineraryBudgetDisplay!=="N/A"?itineraryBudgetDisplay:userBudgetDisplay,[isLoading,itineraryBudgetDisplay,userBudgetDisplay]),[selectedPlace,setSelectedPlace]=reactExports.useState(null),[isPlaceModalOpen,setIsPlaceModalOpen]=reactExports.useState(!1),[hoveredPlace,setHoveredPlace]=reactExports.useState(null),[hoveredPlaceType,setHoveredPlaceType]=reactExports.useState(null),[hoverPosition,setHoverPosition]=reactExports.useState(null),[isHoverPopupVisible,setIsHoverPopupVisible]=reactExports.useState(!1),hoverTimeoutRef=reactExports.useRef(null),[hoveredLocationId,setHoveredLocationId]=reactExports.useState(null),[isScrolled,setIsScrolled]=reactExports.useState(!1),[hoveredItem,setHoveredItem]=reactExports.useState(null),[hoveredItemType,setHoveredItemType]=reactExports.useState(null),handlePlaceHover=reactExports.useCallback((e,place,type)=>{hoverTimeoutRef.current&&clearTimeout(hoverTimeoutRef.current);const rect=e.currentTarget.getBoundingClientRect(),viewportWidth=window.innerWidth,viewportHeight=window.innerHeight;let x=rect.right+15,y=rect.top+rect.height/2;x+400>viewportWidth-20&&(x=rect.left-415),y+300>viewportHeight-20&&(y=viewportHeight-320),y<20&&(y=20),setHoverPosition({x,y}),setHoveredPlace(place),setHoveredPlaceType(type),setIsHoverPopupVisible(!0);const placeId=place.place_id||place.id;placeId&&allPlaceDetails[placeId]?setHoveredLocationId(placeId):setHoveredLocationId(null)},[allPlaceDetails]),handlePlaceHoverLeave=reactExports.useCallback(()=>{hoverTimeoutRef.current=setTimeout(()=>{setHoveredPlace(null),setHoveredPlaceType(null),setHoverPosition(null),setIsHoverPopupVisible(!1),setHoveredLocationId(null)},150)},[]),extractLocations=reactExports.useMemo(()=>{var _a;const locations=[];let defaultCoordinates={lat:40.7128,lng:-74.006};const getDestinationCoordinates=destination2=>{const cityCoordinates={"new york":{lat:40.7128,lng:-74.006},london:{lat:51.5074,lng:-.1278},paris:{lat:48.8566,lng:2.3522},tokyo:{lat:35.6762,lng:139.6503},rome:{lat:41.9028,lng:12.4964},barcelona:{lat:41.3851,lng:2.1734},sydney:{lat:-33.8688,lng:151.2093},dubai:{lat:25.2048,lng:55.2708},riyadh:{lat:24.7136,lng:46.6753},singapore:{lat:1.3521,lng:103.8198},mumbai:{lat:19.076,lng:72.8777},delhi:{lat:28.7041,lng:77.1025},bangalore:{lat:12.9716,lng:77.5946},istanbul:{lat:41.0082,lng:28.9784},amsterdam:{lat:52.3676,lng:4.9041},berlin:{lat:52.52,lng:13.405},madrid:{lat:40.4168,lng:-3.7038},"los angeles":{lat:34.0522,lng:-118.2437},"san francisco":{lat:37.7749,lng:-122.4194},chicago:{lat:41.8781,lng:-87.6298},toronto:{lat:43.651,lng:-79.347},vancouver:{lat:49.2827,lng:-123.1207},beijing:{lat:39.9042,lng:116.4074},shanghai:{lat:31.2304,lng:121.4737},"hong kong":{lat:22.3193,lng:114.1694},seoul:{lat:37.5665,lng:126.978},bangkok:{lat:13.7563,lng:100.5018},"kuala lumpur":{lat:3.139,lng:101.6869},jakarta:{lat:-6.2088,lng:106.8456},manila:{lat:14.5995,lng:120.9842},moscow:{lat:55.7558,lng:37.6176},"st petersburg":{lat:59.9311,lng:30.3609},cairo:{lat:30.0444,lng:31.2357},"cape town":{lat:-33.9249,lng:18.4241},johannesburg:{lat:-26.2041,lng:28.0473},lagos:{lat:6.5244,lng:3.3792},nairobi:{lat:-1.2921,lng:36.8219},"rio de janeiro":{lat:-22.9068,lng:-43.1729},"sao paulo":{lat:-23.5558,lng:-46.6396},"buenos aires":{lat:-34.6118,lng:-58.396},"mexico city":{lat:19.4326,lng:-99.1332},lima:{lat:-12.0464,lng:-77.0428}},destLower=destination2.toLowerCase().trim();return cityCoordinates[destLower]||defaultCoordinates},destination=(itineraryData==null?void 0:itineraryData.destination)||((_a=enhancedResponse==null?void 0:enhancedResponse.itinerary)==null?void 0:_a.destination);destination&&(defaultCoordinates=getDestinationCoordinates(destination));const getCoordinatesFromPlace=(placeDetails,fallbackIndex=0)=>placeDetails!=null&&placeDetails.gps_coordinates?{lat:placeDetails.gps_coordinates.latitude,lng:placeDetails.gps_coordinates.longitude}:{lat:defaultCoordinates.lat+fallbackIndex*.01,lng:defaultCoordinates.lng+fallbackIndex*.01};return destination&&locations.push({id:"destination",name:destination,type:"destination",position:defaultCoordinates,description:"Your travel destination"}),allPlaceDetails&&Object.keys(allPlaceDetails).length>0?Object.entries(allPlaceDetails).forEach(([placeId,placeDetails],index)=>{if(!placeDetails.title||!placeDetails.title.trim())return;let position=defaultCoordinates;if(placeDetails.gps_coordinates&&typeof placeDetails.gps_coordinates.latitude=="number"&&typeof placeDetails.gps_coordinates.longitude=="number"?position={lat:placeDetails.gps_coordinates.latitude,lng:placeDetails.gps_coordinates.longitude}:placeDetails.coordinates&&typeof placeDetails.coordinates.lat=="number"&&typeof placeDetails.coordinates.lng=="number"?position={lat:placeDetails.coordinates.lat,lng:placeDetails.coordinates.lng}:position={lat:defaultCoordinates.lat+index*.01,lng:defaultCoordinates.lng+index*.01},isNaN(position.lat)||isNaN(position.lng)||Math.abs(position.lat)>90||Math.abs(position.lng)>180)return;let placeType="activity";if(placeDetails.category){const categoryLower=placeDetails.category.toLowerCase();categoryLower.includes("hotel")||categoryLower.includes("lodging")?placeType="hotel":(categoryLower.includes("restaurant")||categoryLower.includes("cafe")||categoryLower.includes("food"))&&(placeType="restaurant")}locations.push({id:placeId,name:placeDetails.title,type:placeType,position,description:placeDetails.description||placeDetails.address,rating:placeDetails.rating,price:placeDetails.price_range||placeDetails.price,address:placeDetails.address,website:placeDetails.website,phone:placeDetails.phone,open_state:placeDetails.open_state,hours:placeDetails.hours||placeDetails.operating_hours,thumbnail:placeDetails.thumbnail||placeDetails.serpapi_thumbnail})}):enhancedResponse!=null&&enhancedResponse.place_details&&Object.entries(enhancedResponse.place_details).forEach(([placeId,placeDetails],index)=>{const place=placeDetails;if(!place.title||!place.title.trim())return;const position=getCoordinatesFromPlace(place,index);if(isNaN(position.lat)||isNaN(position.lng)||Math.abs(position.lat)>90||Math.abs(position.lng)>180)return;let placeType="activity";if(place.category){const categoryLower=place.category.toLowerCase();categoryLower.includes("hotel")||categoryLower.includes("lodging")?placeType="hotel":(categoryLower.includes("restaurant")||categoryLower.includes("cafe")||categoryLower.includes("food"))&&(placeType="restaurant")}locations.push({id:placeId,name:place.title,type:placeType,position,description:place.description||place.address,rating:place.rating,price:place.price_range||place.price,thumbnail:place.thumbnail||place.serpapi_thumbnail})}),hotels.forEach((hotel,index)=>{if(hotel.location){const position={lat:defaultCoordinates.lat+index*.01,lng:defaultCoordinates.lng+index*.01};!isNaN(position.lat)&&!isNaN(position.lng)&&Math.abs(position.lat)<=90&&Math.abs(position.lng)<=180&&locations.push({id:`hotel-${index}`,name:hotel.name,type:"hotel",position,description:hotel.description,rating:hotel.rating,price:hotel.price})}}),dailyPlans.forEach((plan,planIndex)=>{plan.activities.forEach((activity,activityIndex)=>{if(activity.location&&activity.location!==destination){const position={lat:defaultCoordinates.lat+planIndex*.02+activityIndex*.005,lng:defaultCoordinates.lng+planIndex*.02+activityIndex*.005};!isNaN(position.lat)&&!isNaN(position.lng)&&Math.abs(position.lat)<=90&&Math.abs(position.lng)<=180&&locations.push({id:`activity-${planIndex}-${activityIndex}`,name:activity.title,type:"activity",position,description:activity.description})}})}),dailyPlans.forEach((plan,planIndex)=>{plan.meals.forEach((meal,mealIndex)=>{var _a2;const mealPlaceId=meal.place_id,mealPlaceDetails=((_a2=enhancedResponse==null?void 0:enhancedResponse.place_details)==null?void 0:_a2[mealPlaceId])||allPlaceDetails[mealPlaceId];if(mealPlaceDetails&&mealPlaceDetails.gps_coordinates){const position={lat:mealPlaceDetails.gps_coordinates.latitude,lng:mealPlaceDetails.gps_coordinates.longitude};!isNaN(position.lat)&&!isNaN(position.lng)&&Math.abs(position.lat)<=90&&Math.abs(position.lng)<=180&&locations.push({id:`restaurant-${planIndex}-${mealIndex}`,name:meal.name,type:"restaurant",position,description:meal.description||mealPlaceDetails.description,rating:meal.rating||mealPlaceDetails.rating,price:meal.priceRange||meal.price_range})}else if(meal.location){const position={lat:defaultCoordinates.lat+planIndex*.015+mealIndex*.003,lng:defaultCoordinates.lng+planIndex*.015+mealIndex*.003};!isNaN(position.lat)&&!isNaN(position.lng)&&Math.abs(position.lat)<=90&&Math.abs(position.lng)<=180&&locations.push({id:`restaurant-${planIndex}-${mealIndex}`,name:meal.name,type:"restaurant",position,description:meal.description,rating:meal.rating,price:meal.priceRange||meal.price_range})}})}),locations},[enhancedResponse,allPlaceDetails,dailyPlans,hotels,itineraryData]);reactExports.useEffect(()=>{if(!hoveredPlace){setHoveredLocationId(null);return}const placeId=hoveredPlace.place_id||hoveredPlace.id;if(placeId&&extractLocations.find(loc=>loc.id===placeId)){setHoveredLocationId(placeId);return}const placeTitle=hoveredPlace.title||hoveredPlace.title||hoveredPlace.name;if(placeTitle){const matchingLocation=extractLocations.find(loc=>loc.name.toLowerCase()===placeTitle.toLowerCase()||loc.name.toLowerCase().includes(placeTitle.toLowerCase())||placeTitle.toLowerCase().includes(loc.name.toLowerCase()));if(matchingLocation){setHoveredLocationId(matchingLocation.id);return}}setHoveredLocationId(null)},[hoveredPlace,extractLocations]);const handleMouseEnter=(e,item,type)=>{hoverTimeoutRef.current&&clearTimeout(hoverTimeoutRef.current);const rect=e.currentTarget.getBoundingClientRect();setHoverPosition({x:rect.right+10,y:rect.top}),setHoveredItem(item),setHoveredItemType(type)},handleMouseLeave=()=>{hoverTimeoutRef.current=setTimeout(()=>{setHoveredItem(null),setHoveredItemType(null),setHoverPosition(null)},300)};reactExports.useEffect(()=>{if(!enhancedResponse)return;const placeDetailsList=Object.values(enhancedResponse.place_details||{}),additionalPlacesList=[];if(enhancedResponse.additional_places&&Object.values(enhancedResponse.additional_places).forEach(group=>{Array.isArray(group)&&additionalPlacesList.push(...group)}),placeDetailsList.length===0&&additionalPlacesList.length===0)return;(async()=>{try{const summary=await prefetchPlaceMedia({placeDetails:placeDetailsList,additionalPlaces:additionalPlacesList});console.debug("Prefetched hover media",summary)}catch(prefetchError){console.warn("Image prefetch skipped:",prefetchError)}})()},[enhancedResponse]);const handleAddToItinerary=_place=>{setIsPlaceModalOpen(!1)};reactExports.useEffect(()=>{var _a,_b,_c,_d,_e,_f;if(authLoading)return;if(!isAuthenticated||!user){setError("Please log in to access your itinerary results."),navigate("/login",{state:{from:"/results",message:"Please log in to access your itinerary results."}});return}if(isInitializedRef.current)return;if(!location.state){navigate("/");return}if(isLoading||hasGeneratedRef.current)return;isInitializedRef.current=!0;const injected=(_a=location.state)==null?void 0:_a.injectedEnhancedResponse;if(injected){const injectedMeta=location.state,dataFromInjected={destination:((_b=injected.itinerary)==null?void 0:_b.destination)||injectedMeta.destination||"Trip",startDate:injectedMeta.startDate||new Date().toISOString(),endDate:injectedMeta.endDate||new Date().toISOString(),days:((_c=injected.itinerary)==null?void 0:_c.total_days)||injectedMeta.days||((_e=(_d=injected.itinerary)==null?void 0:_d.daily_plans)==null?void 0:_e.length)||1,travelers:injectedMeta.travelers||1,budget:((_f=injected.itinerary)==null?void 0:_f.budget_estimate)||injectedMeta.budget||0,interests:injectedMeta.interests||[]};setItineraryData(dataFromInjected);try{processEnhancedItineraryResponse(injected,dataFromInjected)}catch(e){console.error("Failed to process injected itinerary:",e),setError(e instanceof Error?e.message:"Failed to render provided itinerary")}return}setItineraryData(location.state),generateRealItinerary(location.state)},[authLoading,location.state]),reactExports.useEffect(()=>{previousLocationStateRef.current!==location.state&&(previousLocationStateRef.current=location.state,hasGeneratedRef.current=!1,isInitializedRef.current=!1,abortControllerRef.current&&(abortControllerRef.current.abort(),abortControllerRef.current=null))},[location.state]),reactExports.useEffect(()=>{const handleScroll=()=>{const scrollTop=window.pageYOffset||document.documentElement.scrollTop;setIsScrolled(scrollTop>100)};return window.addEventListener("scroll",handleScroll),()=>window.removeEventListener("scroll",handleScroll)},[]);const generateRealItinerary=async data=>{var _a,_b,_c;if(!isAuthenticated||!user){setError("Please log in to generate your itinerary."),localStorage.setItem("pendingItineraryData",JSON.stringify(data)),navigate("/login",{state:{from:"/results",message:"Please log in to generate your itinerary."}});return}if(isLoading||hasGeneratedRef.current)return;abortControllerRef.current&&(abortControllerRef.current.abort(),abortControllerRef.current=null),hasGeneratedRef.current=!0,setIsLoading(!0),setError(null);const controller=new AbortController;abortControllerRef.current=controller;try{const apiRequest={...data.apiRequest||{destination:data.destination,start_date:data.startDate,end_date:data.endDate,budget:data.budget,interests:data.interests,travelers:data.travelers,accommodation_type:"hotel"},dietary_preferences:((_a=data.apiRequest)==null?void 0:_a.dietary_preferences)||[]};let enhancedItineraryResponse;try{enhancedItineraryResponse=await itineraryAPI.generateEnhancedItinerary(apiRequest,{signal:controller.signal})}catch(apiError){if((apiError==null?void 0:apiError.code)==="ERR_CANCELED"||(apiError==null?void 0:apiError.name)==="CanceledError"){hasGeneratedRef.current=!1,setError("Itinerary generation cancelled.");return}if((_b=apiError.message)!=null&&_b.includes("Network Error")||(_c=apiError.message)!=null&&_c.includes("timeout")||apiError.code==="ECONNABORTED"){setError("Network error while generating enhanced itinerary. Please check your connection and try again.");return}throw apiError}processEnhancedItineraryResponse(enhancedItineraryResponse,data)}catch(error2){console.error("Error generating itinerary:",error2);const errorMessage=error2 instanceof Error?error2.message:"Failed to generate itinerary. Please try again.";setError(errorMessage),errorMessage==="Itinerary generation cancelled."&&(hasGeneratedRef.current=!1)}finally{setIsLoading(!1),abortControllerRef.current===controller&&(abortControllerRef.current=null)}},handleCancelGeneration=reactExports.useCallback(()=>{abortControllerRef.current&&(abortControllerRef.current.abort(),abortControllerRef.current=null),hasGeneratedRef.current=!1,setIsLoading(!1),setError("Itinerary generation cancelled.")},[]),processEnhancedItineraryResponse=(enhancedItineraryResponse,dataFallback)=>{var _a;setEnhancedResponse(enhancedItineraryResponse),setAllPlaceDetails((enhancedItineraryResponse==null?void 0:enhancedItineraryResponse.place_details)||{}),enhancedItineraryResponse!=null&&enhancedItineraryResponse.photo_prefetch&&photoPrefetcher.prefetchPhotos(enhancedItineraryResponse.photo_prefetch).catch(()=>{}),enhancedItineraryResponse!=null&&enhancedItineraryResponse.weather&&setWeatherData(enhancedItineraryResponse.weather);const itineraryDataInner=enhancedItineraryResponse==null?void 0:enhancedItineraryResponse.itinerary;if(itineraryDataInner&&itineraryDataInner.daily_plans!==void 0){if(itineraryDataInner.daily_plans.length===0)throw console.warn("Received empty daily_plans from enhanced API"),new Error("AI could not generate a detailed itinerary. This might be due to complex requirements or server issues.");const normalizedDailyPlans=itineraryDataInner.daily_plans.map(plan=>{var _a2,_b;const normalizedTransport=((_a2=plan.transportation)==null?void 0:_a2.map(transport=>{const titleFallback=[transport.from,transport.to].filter(Boolean).join(" â†’ "),locationFallback=[transport.from,transport.to].filter(Boolean).join(" to "),costResult=convertCostToINR(transport.cost??transport.estimated_cost??"");return{...transport,title:transport.title||(titleFallback?`Travel: ${titleFallback}`:"Transportation"),description:transport.description||(transport.method?`Take ${transport.method}`:"Getting around"),location:transport.location||locationFallback||itineraryDataInner.destination,cost:costResult.display,costValue:costResult.numeric,duration:transport.duration||transport.time||transport.estimated_duration||""}}))||[];return{...plan,activities:plan.activities.map(activity=>{var _a3;const placeDetails=(_a3=enhancedItineraryResponse==null?void 0:enhancedItineraryResponse.place_details)==null?void 0:_a3[activity.place_id],primaryCost=convertCostToINR(activity.estimated_cost??activity.cost??null),fallbackCost=!primaryCost.display&&(placeDetails!=null&&placeDetails.price)?convertCostToINR(placeDetails.price):{display:"",numeric:0},costDisplay=primaryCost.display||fallbackCost.display,costNumeric=primaryCost.display?primaryCost.numeric:fallbackCost.numeric;return{...activity,cost:costDisplay,costValue:costNumeric,type:activity.type||"sightseeing",location:(placeDetails==null?void 0:placeDetails.address)||activity.location||itineraryDataInner.destination,description:(placeDetails==null?void 0:placeDetails.description)||activity.title}}),meals:((_b=plan.meals)==null?void 0:_b.map(meal=>{var _a3;const placeDetails=(_a3=enhancedItineraryResponse==null?void 0:enhancedItineraryResponse.place_details)==null?void 0:_a3[meal.place_id],priceResult=convertCostToINR(meal.price_range||(placeDetails==null?void 0:placeDetails.price)||meal.priceRange||meal.price);return{...meal,priceRange:priceResult.display||meal.price_range||"$$",priceValue:priceResult.numeric,description:(placeDetails==null?void 0:placeDetails.description)||`Great ${meal.cuisine} cuisine`,location:(placeDetails==null?void 0:placeDetails.address)||meal.location||itineraryDataInner.destination,rating:(placeDetails==null?void 0:placeDetails.rating)||4}}))||[],transport:normalizedTransport,transportation:normalizedTransport}});if(setDailyPlans(normalizedDailyPlans),setItinerarySummary({total_days:itineraryDataInner.total_days||(dataFallback==null?void 0:dataFallback.days),budget_estimate:itineraryDataInner.budget_estimate||0,destination:itineraryDataInner.destination||(dataFallback==null?void 0:dataFallback.destination)}),itineraryDataInner.accommodation_suggestions){const hotelsFromAccommodation=itineraryDataInner.accommodation_suggestions.map(acc=>{var _a2;const placeDetails=(_a2=enhancedItineraryResponse==null?void 0:enhancedItineraryResponse.place_details)==null?void 0:_a2[acc.place_id],priceResult=convertCostToINR(acc.price_range||(placeDetails==null?void 0:placeDetails.price)||acc.price);return{name:acc.name,rating:(placeDetails==null?void 0:placeDetails.rating)||4,price_range:priceResult.display||acc.price_range,amenities:["WiFi"],location:(placeDetails==null?void 0:placeDetails.address)||acc.location,description:(placeDetails==null?void 0:placeDetails.description)||`Great ${acc.type} in ${itineraryDataInner.destination}`,place_id:acc.place_id}});setHotels(hotelsFromAccommodation)}let allTips=[];itineraryDataInner.travel_tips&&(allTips=[...itineraryDataInner.travel_tips]),(_a=enhancedItineraryResponse==null?void 0:enhancedItineraryResponse.weather)!=null&&_a.recommendations&&(allTips=[...allTips,...enhancedItineraryResponse.weather.recommendations]),setTips(allTips),hasGeneratedRef.current=!0}else throw console.error("âŒ Invalid enhanced response format. Expected daily_plans but got:",{hasItinerary:!!(enhancedItineraryResponse!=null&&enhancedItineraryResponse.itinerary),hasPlaceDetails:!!(enhancedItineraryResponse!=null&&enhancedItineraryResponse.place_details),itineraryKeys:Object.keys(itineraryDataInner||{}),itineraryData:itineraryDataInner}),new Error("Invalid enhanced response format from server - missing itinerary data")},memoizedTabContent=reactExports.useMemo(()=>{var _a,_b,_c,_d,_e;if(activeTab==="additional"&&enhancedResponse){const additionalPlaces={hotels:((_a=enhancedResponse.additional_places)==null?void 0:_a.hotels)||[],restaurants:((_b=enhancedResponse.additional_places)==null?void 0:_b.restaurants)||[],cafes:((_c=enhancedResponse.additional_places)==null?void 0:_c.cafes)||[],attractions:((_d=enhancedResponse.additional_places)==null?void 0:_d.attractions)||[],interest_based:((_e=enhancedResponse.additional_places)==null?void 0:_e.interest_based)||[]};return jsxRuntimeExports.jsx(AdditionalPlaces,{additionalPlaces,onAddToItinerary:handleAddToItinerary,onPlaceHover:handlePlaceHover,onPlaceHoverLeave:handlePlaceHoverLeave,enablePagination:!0})}return null},[activeTab,enhancedResponse,handleAddToItinerary,handlePlaceHover,handlePlaceHoverLeave]);return itineraryData?jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full bg-white dark:bg-gray-900 overflow-x-hidden",children:[isScrolled&&jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 right-0 z-50",children:jsxRuntimeExports.jsx(ModernHeader,{})}),jsxRuntimeExports.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50 w-full",children:jsxRuntimeExports.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between py-1.5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>navigate("/trip-planner"),className:"p-3 rounded-xl bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-all duration-200 group",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5 text-gray-600 dark:text-gray-300 group-hover:text-gray-800 dark:group-hover:text-white"})}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-3",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[(enhancedResponse==null?void 0:enhancedResponse.itinerary.destination)||itineraryData.destination," Itinerary"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[(enhancedResponse==null?void 0:enhancedResponse.itinerary.total_days)||itineraryData.days," days â€¢ ",itineraryData.travelers," traveler",itineraryData.travelers>1?"s":""]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsxs("span",{className:"hidden sm:inline",children:[new Date(itineraryData.startDate).toLocaleDateString()," - ",new Date(itineraryData.endDate).toLocaleDateString()]}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:new Date(itineraryData.startDate).toLocaleDateString()})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("span",{className:"hidden sm:inline",children:["Budget: ",navbarBudgetDisplay]}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:navbarBudgetDisplay})]})]})]})})}),jsxRuntimeExports.jsx("main",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 pt-8",children:isLoading?jsxRuntimeExports.jsxs("div",{className:"text-center py-20",children:[jsxRuntimeExports.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-100 dark:bg-blue-900/20 rounded-full mb-8",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-blue-600 border-t-transparent"})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Crafting Your Perfect Journey"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400 max-w-lg mx-auto text-lg",children:["Our AI is analyzing ",itineraryData.destination," and creating a personalized itinerary just for you."]}),jsxRuntimeExports.jsxs("div",{className:"mt-8 flex items-center justify-center space-x-8 text-sm text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),jsxRuntimeExports.jsx("span",{children:"Analyzing destinations"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),jsxRuntimeExports.jsx("span",{children:"Finding accommodations"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse",style:{animationDelay:"1s"}}),jsxRuntimeExports.jsx("span",{children:"Selecting restaurants"})]})]}),jsxRuntimeExports.jsx("button",{onClick:handleCancelGeneration,className:"mt-10 inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 rounded-lg transition-all duration-200",children:"Cancel generation"})]}):error?jsxRuntimeExports.jsxs("div",{className:"text-center py-20",children:[jsxRuntimeExports.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-red-100 dark:bg-red-900/20 rounded-full mb-8",children:jsxRuntimeExports.jsx(AlertCircle,{className:"w-10 h-10 text-red-600 dark:text-red-400"})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:error.includes("timeout")?"Request Timed Out":"Something went wrong"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-lg mx-auto text-lg",children:error}),error.includes("timeout")&&jsxRuntimeExports.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-6 mb-8 max-w-lg mx-auto",children:jsxRuntimeExports.jsxs("p",{className:"text-amber-800 dark:text-amber-200",children:["ðŸ’¡ ",jsxRuntimeExports.jsx("strong",{children:"Tip:"})," AI itinerary generation can take time. Try simplifying your request or check your internet connection."]})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>{itineraryData&&(hasGeneratedRef.current=!1,generateRealItinerary(itineraryData))},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-all duration-200 shadow-md hover:shadow-lg text-sm",children:"Try Again"})})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2 space-y-6 w-full",children:[activeTab==="itinerary"&&itinerarySummary&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 shadow-md border border-gray-200 dark:border-gray-700 w-full",children:[jsxRuntimeExports.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white mb-2 text-center",children:"Journey Overview"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mx-auto mb-1",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:itinerarySummary.total_days})}),jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:"Days"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-bold text-green-600 dark:text-green-400 mb-1",children:formatINR(itinerarySummary.budget_estimate)}),jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:"Budget"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center mx-auto mb-1",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:dailyPlans.length})}),jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:"Planned"})]})]}),weatherData?jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-2 text-center",children:"ðŸŒ¤ï¸ Current Weather"}),jsxRuntimeExports.jsx("div",{className:"max-w-2xl mx-auto",children:jsxRuntimeExports.jsx(WeatherDisplay,{weatherData,compact:!0,className:"shadow-sm"})})]}):jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-2 text-center",children:"ðŸŒ¤ï¸ Current Weather"}),jsxRuntimeExports.jsx("div",{className:"max-w-lg mx-auto",children:jsxRuntimeExports.jsx(WeatherCard,{...parseLocationForWeather(itinerarySummary.destination),compact:!0,className:"shadow-sm"})})]})]}),jsxRuntimeExports.jsx("div",{className:"mb-8",children:jsxRuntimeExports.jsx("div",{className:"flex space-x-1 bg-white dark:bg-gray-800 p-0.5 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[{id:"itinerary",label:"Itinerary",icon:"ðŸ—“ï¸"},{id:"additional",label:"Explore More",icon:"âœ¨"},{id:"map",label:"Map View",icon:"ðŸ—ºï¸"}].map(tab=>jsxRuntimeExports.jsxs("button",{onClick:()=>setActiveTab(tab.id),className:`flex-1 flex items-center justify-center px-2 py-1.5 rounded-md font-medium transition-all duration-300 text-xs ${activeTab===tab.id?"bg-blue-600 text-white shadow-md shadow-blue-600/25":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[jsxRuntimeExports.jsx("span",{className:"mr-1 text-xs",children:tab.icon}),tab.label]},tab.id))})}),activeTab==="itinerary"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[tips.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 shadow-lg border border-gray-200 dark:border-gray-700 w-full",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:"ðŸ’¡ Travel Tips"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:tips.map((tip,index)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-2xl",children:[jsxRuntimeExports.jsx("span",{className:"text-amber-500 mt-1 text-sm",children:"â€¢"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:tip})]},index))})]}),dailyPlans.map(plan=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:["Day ",plan.day]}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:plan.date}),plan.theme&&jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium mt-1",children:plan.theme})]}),plan.accommodation&&jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Staying at"}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:plan.accommodation.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end text-amber-500",children:[jsxRuntimeExports.jsx(Star,{className:"w-4 h-4 mr-1 fill-current"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:plan.accommodation.rating})]})]})]}),plan.accommodation&&jsxRuntimeExports.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-200 dark:border-blue-800",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"ðŸ¨ Accommodation"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:plan.accommodation.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:plan.accommodation.location}),plan.accommodation.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:plan.accommodation.description})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center text-amber-500 mb-1",children:[jsxRuntimeExports.jsx(Star,{className:"w-4 h-4 mr-1 fill-current"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:plan.accommodation.rating})]}),plan.accommodation.price&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["$",plan.accommodation.price,"/night"]})]})]}),plan.accommodation.amenities&&plan.accommodation.amenities.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:plan.accommodation.amenities.map((amenity,idx)=>jsxRuntimeExports.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs rounded-full font-medium",children:amenity},idx))})]}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:plan.activities.map((activity,index)=>{var _a;const enhancedPlaceDetails=(_a=enhancedResponse==null?void 0:enhancedResponse.place_details)==null?void 0:_a[activity.place_id];return jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-6 p-6 bg-gray-50 dark:bg-gray-700/50 rounded-2xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-all duration-200 transform hover:scale-[1.02]",onMouseEnter:e=>{enhancedPlaceDetails?handlePlaceHover(e,enhancedPlaceDetails,"activity"):handleMouseEnter(e,activity,"activity")},onMouseLeave:enhancedPlaceDetails?handlePlaceHoverLeave:handleMouseLeave,onClick:()=>{enhancedPlaceDetails&&(setSelectedPlace(enhancedPlaceDetails),setIsPlaceModalOpen(!0))},children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-blue-100 dark:bg-blue-900/50 rounded-2xl flex items-center justify-center",children:jsxRuntimeExports.jsx(Clock,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"text-base font-semibold text-gray-900 dark:text-white",children:activity.title}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-full text-xs font-medium",children:activity.time})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:activity.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:activity.location})]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:activity.duration})]}),activity.cost&&jsxRuntimeExports.jsxs("span",{className:"flex items-center space-x-1 text-green-600 dark:text-green-400 font-medium",children:[jsxRuntimeExports.jsx(IndianRupee,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:activity.cost})]})]})]})]},index)})}),plan.transport&&plan.transport.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"ðŸš— Transportation"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:plan.transport.map((transport,index)=>jsxRuntimeExports.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-2xl p-4 border border-green-200 dark:border-green-800",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:transport.title||`Transport ${index+1}`}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:transport.description}),transport.location&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-3 h-3 inline mr-1"}),transport.location]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[transport.cost&&jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:transport.cost}),transport.duration&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:transport.duration})]})]})},index))})]}),jsxRuntimeExports.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[jsxRuntimeExports.jsx(Utensils,{className:"w-5 h-5 mr-2"}),"Dining"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:plan.meals.map((restaurant,index)=>{var _a;const mealTimes=["Breakfast","Lunch","Dinner"],enhancedPlaceDetails=(_a=enhancedResponse==null?void 0:enhancedResponse.place_details)==null?void 0:_a[restaurant.place_id];return jsxRuntimeExports.jsxs("div",{className:"p-5 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-2xl cursor-pointer hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-all duration-200 transform hover:scale-[1.02]",onMouseEnter:e=>{enhancedPlaceDetails?handlePlaceHover(e,enhancedPlaceDetails,"restaurant"):handleMouseEnter(e,restaurant,"restaurant")},onMouseLeave:enhancedPlaceDetails?handlePlaceHoverLeave:handleMouseLeave,onClick:()=>{enhancedPlaceDetails&&(setSelectedPlace(enhancedPlaceDetails),setIsPlaceModalOpen(!0))},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h5",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:mealTimes[index]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-amber-500",children:[jsxRuntimeExports.jsx(Star,{className:"w-3 h-3 fill-current mr-1"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:restaurant.rating})]})]}),jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:restaurant.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:[restaurant.cuisine," â€¢ ",restaurant.priceRange]}),restaurant.description&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:restaurant.description}),restaurant.location&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-3 h-3 inline mr-1"}),restaurant.location]})]},index)})})]})]},plan.day)),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-6 mt-8",children:[jsxRuntimeExports.jsx("button",{onClick:()=>navigate("/itinerary",{state:{itineraryData:enhancedResponse}}),className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg text-base font-medium transition-colors",children:"View Timeline"}),jsxRuntimeExports.jsx("button",{onClick:()=>navigate("/itinerary-generation",{state:{itineraryData:enhancedResponse}}),className:"px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white rounded-lg text-base font-medium transition-colors",children:"Save Itinerary"}),jsxRuntimeExports.jsx("button",{onClick:()=>navigate("/edit-itinerary",{state:{itineraryData:enhancedResponse}}),className:"px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg text-base font-medium transition-colors",children:"Edit Itinerary"})]})]}),memoizedTabContent,activeTab==="map"&&jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-96 lg:h-[600px]",children:jsxRuntimeExports.jsx(GoogleMaps,{locations:extractLocations,hoveredLocationId,onLocationHover:setHoveredLocationId})})})]}),jsxRuntimeExports.jsx("div",{className:"lg:col-span-1 w-full",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-lg border border-gray-200 dark:border-gray-700 h-[600px] sticky top-4 w-full",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:"ðŸ—ºï¸ Interactive Map"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:"Explore all locations from your itinerary"}),(()=>{const locations=extractLocations;return jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:["ðŸ“ ",locations.length," location",locations.length!==1?"s":""," found"]})})(),jsxRuntimeExports.jsx("div",{className:"h-full w-full min-h-0 flex-1",style:{minHeight:"500px"},children:(()=>{const locations=extractLocations;if(locations.length===0&&(itineraryData!=null&&itineraryData.destination)){const destination=itineraryData.destination,fallbackLocation={id:"fallback-destination",name:destination,type:"destination",position:(dest=>({"new york":{lat:40.7128,lng:-74.006},london:{lat:51.5074,lng:-.1278},paris:{lat:48.8566,lng:2.3522},tokyo:{lat:35.6762,lng:139.6503},mumbai:{lat:19.076,lng:72.8777},delhi:{lat:28.7041,lng:77.1025},dubai:{lat:25.2048,lng:55.2708},singapore:{lat:1.3521,lng:103.8198}})[dest.toLowerCase().trim()]||{lat:40.7128,lng:-74.006})(destination),description:"Your travel destination"};return jsxRuntimeExports.jsx(GoogleMaps,{locations:[fallbackLocation]})}return jsxRuntimeExports.jsx(GoogleMaps,{locations:locations.length>0?locations:[],hoveredLocationId,onLocationHover:setHoveredLocationId})})()})]})})]})})}),hoveredItem&&hoverPosition&&hoveredItemType&&jsxRuntimeExports.jsx("div",{className:"fixed z-50 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 min-w-[280px] max-w-[400px] pointer-events-none",style:{left:hoverPosition.x,top:hoverPosition.y,transform:"translateY(-50%)"},onMouseEnter:()=>{hoverTimeoutRef.current&&clearTimeout(hoverTimeoutRef.current)},children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[hoveredItemType==="activity"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[hoveredItem.image&&jsxRuntimeExports.jsx("div",{className:"mb-3 -m-4 -mt-4",children:jsxRuntimeExports.jsx("img",{src:hoveredItem.image,alt:hoveredItem.title,className:"w-full h-32 object-cover rounded-t-lg",onError:e=>{const target=e.target;target.style.display="none"}})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:hoveredItem.title}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded text-sm font-medium",children:hoveredItem.time})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:hoveredItem.description}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:hoveredItem.location})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:hoveredItem.duration})]}),hoveredItem.cost&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 font-medium",children:[jsxRuntimeExports.jsx(IndianRupee,{className:"w-3 h-3"}),jsxRuntimeExports.jsxs("span",{children:["$",hoveredItem.cost]})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 capitalize pt-1 border-t border-gray-100 dark:border-gray-700",children:[hoveredItem.type," activity"]})]}),hoveredItemType==="hotel"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:hoveredItem.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-amber-500",children:[jsxRuntimeExports.jsx(Star,{className:"w-4 h-4 fill-current mr-1"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:hoveredItem.rating})]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:hoveredItem.description}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:hoveredItem.location})]}),hoveredItem.price&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 font-medium",children:[jsxRuntimeExports.jsx(IndianRupee,{className:"w-3 h-3"}),jsxRuntimeExports.jsxs("span",{children:["$",hoveredItem.price,"/night"]})]})]}),hoveredItem.amenities&&hoveredItem.amenities.length>0&&jsxRuntimeExports.jsxs("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 mb-1",children:"Amenities:"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-1",children:[hoveredItem.amenities.slice(0,4).map((amenity,idx)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 text-xs rounded",children:amenity},idx)),hoveredItem.amenities.length>4&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-400",children:["+",hoveredItem.amenities.length-4," more"]})]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 capitalize pt-1 border-t border-gray-100 dark:border-gray-700",children:"ðŸ¨ Accommodation"})]}),hoveredItemType==="restaurant"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:hoveredItem.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-amber-500",children:[jsxRuntimeExports.jsx(Star,{className:"w-4 h-4 fill-current mr-1"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:hoveredItem.rating})]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:hoveredItem.description}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:hoveredItem.location})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Utensils,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:hoveredItem.cuisine})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 font-medium",children:[jsxRuntimeExports.jsx(IndianRupee,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:hoveredItem.priceRange||hoveredItem.price_range})]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 capitalize pt-1 border-t border-gray-100 dark:border-gray-700",children:"ðŸ½ï¸ Restaurant"})]})]})}),jsxRuntimeExports.jsx(EnhancedHoverPopup,{place:hoveredPlace,position:hoverPosition,type:hoveredPlaceType,isVisible:isHoverPopupVisible,onMouseEnter:()=>{hoverTimeoutRef.current&&clearTimeout(hoverTimeoutRef.current)},onMouseLeave:handlePlaceHoverLeave}),jsxRuntimeExports.jsx(PlaceDetailsModal,{place:selectedPlace,isOpen:isPlaceModalOpen,onClose:()=>setIsPlaceModalOpen(!1),onAddToItinerary:handleAddToItinerary,showAddButton:!0})]}):null};export{ResultsPage as default};
