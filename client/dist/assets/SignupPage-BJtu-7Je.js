import{u as useAuth,j as jsxRuntimeExports,m as motion,a as ModernCard,x as logoImage,M as ModernButton}from"./index-lko4Hfbd.js";import{r as reactExports}from"./vendor-WBEadHvS.js";import{u as useNavigate,a as useLocation}from"./router-BTz3HJhu.js";import{e as ArrowLeft,C as Check,A as AlertTriangle,U as User,M as Mail,L as Lock,E as EyeOff,a as Eye,c as CheckCircle,b as Loader2,d as UserPlus}from"./ui-B24o0VU9.js";const SignupPage=()=>{const{signup,isAuthenticated}=useAuth(),navigate=useNavigate(),location=useLocation(),[formData,setFormData]=reactExports.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[showPassword,setShowPassword]=reactExports.useState(!1),[showConfirmPassword,setShowConfirmPassword]=reactExports.useState(!1),[isSubmitting,setIsSubmitting]=reactExports.useState(!1),[errors,setErrors]=reactExports.useState({}),[success,setSuccess]=reactExports.useState(null),[passwordStrength,setPasswordStrength]=reactExports.useState({score:0,feedback:"",color:"text-gray-400"}),redirectInfo=location.state||JSON.parse(sessionStorage.getItem("authRedirect")||"{}"),redirectPath=redirectInfo.from||"/dashboard",redirectMessage=redirectInfo.message||"Welcome to SafarBot!";reactExports.useEffect(()=>{isAuthenticated&&(sessionStorage.removeItem("authRedirect"),navigate(redirectPath,{replace:!0}))},[isAuthenticated,navigate,redirectPath]);const calculatePasswordStrength=password=>{let score=0,feedback="";return password.length===0?{score:0,feedback:"",color:"text-gray-400"}:(password.length>=8&&(score+=1),password.length>=12&&(score+=1),/[a-z]/.test(password)&&(score+=1),/[A-Z]/.test(password)&&(score+=1),/[0-9]/.test(password)&&(score+=1),/[^A-Za-z0-9]/.test(password)&&(score+=1),score<=2?(feedback="Weak password",{score,feedback,color:"text-red-500"}):score<=4?(feedback="Medium strength",{score,feedback,color:"text-yellow-500"}):(feedback="Strong password",{score,feedback,color:"text-green-500"}))},handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value})),errors[name]&&setErrors(prev=>({...prev,[name]:void 0})),errors.general&&setErrors(prev=>({...prev,general:void 0})),name==="password"&&setPasswordStrength(calculatePasswordStrength(value))},validateForm=()=>{const newErrors={},firstNameTrimmed=formData.firstName.trim();firstNameTrimmed?firstNameTrimmed.length<2?newErrors.firstName="First name must be at least 2 characters long":firstNameTrimmed.length>50?newErrors.firstName="First name is too long (max 50 characters)":/^[a-zA-Z\s'-]+$/.test(firstNameTrimmed)||(newErrors.firstName="First name contains invalid characters"):newErrors.firstName="Please enter your first name";const lastNameTrimmed=formData.lastName.trim();lastNameTrimmed?lastNameTrimmed.length<2?newErrors.lastName="Last name must be at least 2 characters long":lastNameTrimmed.length>50?newErrors.lastName="Last name is too long (max 50 characters)":/^[a-zA-Z\s'-]+$/.test(lastNameTrimmed)||(newErrors.lastName="Last name contains invalid characters"):newErrors.lastName="Please enter your last name";const emailTrimmed=formData.email.trim();return emailTrimmed?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailTrimmed)?emailTrimmed.length>254&&(newErrors.email="Email address is too long"):newErrors.email="Please enter a valid email address":newErrors.email="Please enter your email address",formData.password.trim()?formData.password.length<6?newErrors.password="Password must be at least 6 characters long":formData.password.length>128&&(newErrors.password="Password is too long (max 128 characters)"):newErrors.password="Please enter your password",formData.confirmPassword.trim()?formData.password!==formData.confirmPassword&&(newErrors.confirmPassword="Passwords do not match"):newErrors.confirmPassword="Please confirm your password",newErrors},handleSubmit=async e=>{e.preventDefault();const validationErrors=validateForm();if(Object.keys(validationErrors).length>0){setErrors(validationErrors);return}try{setIsSubmitting(!0),setErrors({}),setSuccess(null),await signup({first_name:formData.firstName,last_name:formData.lastName,email:formData.email,password:formData.password,confirm_password:formData.confirmPassword}),setSuccess("Account created successfully! Please check your email for verification."),setTimeout(()=>{sessionStorage.removeItem("authRedirect"),navigate(redirectPath,{replace:!0})},2e3)}catch(err){console.error("Signup error:",err),setErrors({general:err.message||"Signup failed. Please try again."})}finally{setIsSubmitting(!1)}},handleGoBack=()=>{navigate(redirectPath!=="/dashboard"?redirectPath:"/")};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-cyan-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-lg",children:[jsxRuntimeExports.jsxs(motion.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:handleGoBack,className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors mb-6",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Back"})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:jsxRuntimeExports.jsxs(ModernCard,{className:"p-8 shadow-2xl border-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.2},className:"w-24 h-24 mx-auto mb-2 flex items-center justify-center",children:jsxRuntimeExports.jsx("img",{src:logoImage,alt:"SafarBot",className:"w-24 h-24 object-contain"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Create Account"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:redirectMessage}),redirectPath!=="/dashboard"&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-2",children:["You'll be redirected to: ",redirectPath]})]}),success&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-xl flex items-center space-x-3",children:[jsxRuntimeExports.jsx(Check,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),jsxRuntimeExports.jsx("span",{className:"text-green-700 dark:text-green-300 font-medium",children:success})]}),errors.general&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-xl flex items-center space-x-3",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),jsxRuntimeExports.jsx("span",{className:"text-red-700 dark:text-red-300 font-medium",children:errors.general})]}),jsxRuntimeExports.jsxs("form",{onSubmit:handleSubmit,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"firstName",name:"firstName",type:"text",value:formData.firstName,onChange:handleInputChange,placeholder:"First name",className:`w-full pl-10 pr-4 py-2.5 border-2 rounded-xl focus:ring-4 focus:ring-primary-500/20 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 placeholder:text-sm transition-all duration-200 ${errors.firstName?"border-red-300 dark:border-red-600":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,required:!0,disabled:isSubmitting})]}),errors.firstName&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:errors.firstName})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"lastName",name:"lastName",type:"text",value:formData.lastName,onChange:handleInputChange,placeholder:"Last name",className:`w-full pl-10 pr-4 py-2.5 border-2 rounded-xl focus:ring-4 focus:ring-primary-500/20 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 placeholder:text-sm transition-all duration-200 ${errors.lastName?"border-red-300 dark:border-red-600":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,required:!0,disabled:isSubmitting})]}),errors.lastName&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:errors.lastName})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"email",name:"email",type:"email",value:formData.email,onChange:handleInputChange,placeholder:"Enter your email",className:`w-full pl-10 pr-4 py-2.5 border-2 rounded-xl focus:ring-4 focus:ring-primary-500/20 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 placeholder:text-sm transition-all duration-200 ${errors.email?"border-red-300 dark:border-red-600":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,required:!0,disabled:isSubmitting})]}),errors.email&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:errors.email})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"password",name:"password",type:showPassword?"text":"password",value:formData.password,onChange:handleInputChange,placeholder:"Create a password",className:`w-full pl-10 pr-12 py-2.5 border-2 rounded-xl focus:ring-4 focus:ring-primary-500/20 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 placeholder:text-sm transition-all duration-200 ${errors.password?"border-red-300 dark:border-red-600":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,required:!0,disabled:isSubmitting}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>setShowPassword(!showPassword),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",disabled:isSubmitting,children:showPassword?jsxRuntimeExports.jsx(EyeOff,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4"})})]}),formData.password&&jsxRuntimeExports.jsx(motion.div,{className:"mt-2",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${passwordStrength.score<=2?"bg-red-400":passwordStrength.score<=4?"bg-yellow-400":"bg-green-400"}`,style:{width:`${passwordStrength.score/6*100}%`}})}),jsxRuntimeExports.jsx("span",{className:`text-sm ${passwordStrength.color}`,children:passwordStrength.feedback})]})}),errors.password&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:errors.password})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:showConfirmPassword?"text":"password",value:formData.confirmPassword,onChange:handleInputChange,placeholder:"Confirm your password",className:`w-full pl-10 pr-12 py-2.5 border-2 rounded-xl focus:ring-4 focus:ring-primary-500/20 focus:border-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 placeholder:text-sm transition-all duration-200 ${errors.confirmPassword?"border-red-300 dark:border-red-600":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,required:!0,disabled:isSubmitting}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>setShowConfirmPassword(!showConfirmPassword),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",disabled:isSubmitting,children:showConfirmPassword?jsxRuntimeExports.jsx(EyeOff,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4"})})]}),formData.confirmPassword&&formData.password&&jsxRuntimeExports.jsx(motion.div,{className:"mt-2 flex items-center space-x-2",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:formData.password===formData.confirmPassword?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 text-green-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Passwords match"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-4 h-4 text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-red-500 dark:text-red-400",children:"Passwords do not match"})]})}),errors.confirmPassword&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:errors.confirmPassword})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("input",{id:"terms",name:"terms",type:"checkbox",className:"h-4 w-4 text-primary-500 focus:ring-primary-500 border-gray-300 rounded mt-1",required:!0,disabled:isSubmitting}),jsxRuntimeExports.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:["I agree to the"," ",jsxRuntimeExports.jsx("button",{type:"button",className:"text-primary-600 dark:text-primary-400 hover:text-primary-500 dark:hover:text-primary-300 underline",children:"Terms and Conditions"})," ","and"," ",jsxRuntimeExports.jsx("button",{type:"button",className:"text-primary-600 dark:text-primary-400 hover:text-primary-500 dark:hover:text-primary-300 underline",children:"Privacy Policy"})]})]}),jsxRuntimeExports.jsx(ModernButton,{type:"submit",loading:isSubmitting,icon:isSubmitting?Loader2:UserPlus,className:"w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm",size:"md",disabled:isSubmitting,children:isSubmitting?"Creating Account...":"Create Account"})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center space-y-4",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>navigate("/login"),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors",children:"Sign in here"})]})})]})})]})})};export{SignupPage as default};
