const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-B3FffqNG.js","assets/vendor-WBEadHvS.js","assets/CustomDatePicker-BJ9ZDuas.js","assets/isSameMonth-BdiPiSPU.js","assets/PlacesAutocomplete-BrEAzneB.js","assets/CounterInput-bTFik2L4.js","assets/ui-B24o0VU9.js","assets/router-BTz3HJhu.js","assets/FlightBookingPage-jWnD3XsN.js","assets/Card-BWSuOQqg.js","assets/HotelBookingPage-Do2s5NQC.js","assets/BookingOptionsPage-XYHvUIRn.js","assets/BookingConfirmationPage-D0bbIVSY.js","assets/UserDashboard-Coc81MU9.js","assets/Dropdown-Bgtpkj7k.js","assets/ShareModal-Bx_uCrUz.js","assets/ProfilePage-BwSx8j3f.js","assets/SettingsPage-ScUYe83J.js","assets/SearchPage-CKNHLy9E.js","assets/ResultsPage-B9MpI-1N.js","assets/GoogleMaps-CPmUycxa.js","assets/AdditionalPlaces-C2L1Yjet.js","assets/TripPlannerPage-COVU0LhW.js","assets/ItineraryPage-TWdIFIkL.js","assets/ItineraryGenerationPage-xPbcN96K.js","assets/EditItineraryPage-CQqvw3RS.js","assets/CollaborationChat-Ct4laSpB.js","assets/useChatCollaboration-D85aFU32.js","assets/PackagesPage-Czzk6hIX.js","assets/CreateBlogPage-Tkga24er.js","assets/CreateAlbumPage-BOvus7M8.js","assets/CreateGuidePage-Csh35gsy.js","assets/ChatPage-bkAbhrQG.js","assets/PublicItineraryPage-zCowPT1H.js","assets/ItineraryRedirectPage-tSsqOUbp.js","assets/SavedItineraryViewPage-CXLWkMAe.js","assets/MapTestPage-Dbtn-3ES.js","assets/LoginPage-DZRr7SvK.js","assets/SignupPage-BJtu-7Je.js","assets/ForgotPasswordPage-BVPOY4td.js","assets/ResetPasswordPage-DwWF-yJJ.js","assets/CollaborationAcceptPage-Wn0R7CaX.js","assets/NotFoundPage-Bhb6DVKQ.js","assets/ServerErrorPage-D4rdOIG_.js","assets/OfflinePage-B6zoEoSX.js"])))=>i.map(i=>d[i]);
var __defProp=Object.defineProperty;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value;var __publicField=(obj,key,value)=>__defNormalProp(obj,typeof key!="symbol"?key+"":key,value);import{r as reactExports,a as reactDomExports,g as getDefaultExportFromCjs,b as React}from"./vendor-WBEadHvS.js";import{u as useNavigate,a as useLocation,L as Link,B as BrowserRouter,R as Routes,b as Route}from"./router-BTz3HJhu.js";import{X,A as AlertTriangle,C as Check,M as Mail,L as Lock,E as EyeOff,a as Eye,b as Loader2,U as User,c as CheckCircle,d as UserPlus,e as ArrowLeft,f as Clock,R as RotateCcw,P as Phone,g as MapPin,h as RefreshCw,H as Home}from"./ui-B24o0VU9.js";(function(){const relList=document.createElement("link").relList;if(relList&&relList.supports&&relList.supports("modulepreload"))return;for(const link of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(link);new MutationObserver(mutations=>{for(const mutation of mutations)if(mutation.type==="childList")for(const node of mutation.addedNodes)node.tagName==="LINK"&&node.rel==="modulepreload"&&processPreload(node)}).observe(document,{childList:!0,subtree:!0});function getFetchOpts(link){const fetchOpts={};return link.integrity&&(fetchOpts.integrity=link.integrity),link.referrerPolicy&&(fetchOpts.referrerPolicy=link.referrerPolicy),link.crossOrigin==="use-credentials"?fetchOpts.credentials="include":link.crossOrigin==="anonymous"?fetchOpts.credentials="omit":fetchOpts.credentials="same-origin",fetchOpts}function processPreload(link){if(link.ep)return;link.ep=!0;const fetchOpts=getFetchOpts(link);fetch(link.href,fetchOpts)}})();var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;g!==void 0&&(e=""+g),a.key!==void 0&&(e=""+a.key),a.ref!==void 0&&(h=a.ref);for(b in a)m$1.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)d[b]===void 0&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const scriptRel="modulepreload",assetsURL=function(dep){return"/"+dep},seen={},__vitePreload=function(baseModule,deps,importerUrl){let promise=Promise.resolve();if(deps&&deps.length>0){document.getElementsByTagName("link");const cspNonceMeta=document.querySelector("meta[property=csp-nonce]"),cspNonce=(cspNonceMeta==null?void 0:cspNonceMeta.nonce)||(cspNonceMeta==null?void 0:cspNonceMeta.getAttribute("nonce"));promise=Promise.allSettled(deps.map(dep=>{if(dep=assetsURL(dep),dep in seen)return;seen[dep]=!0;const isCss=dep.endsWith(".css"),cssSelector=isCss?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${dep}"]${cssSelector}`))return;const link=document.createElement("link");if(link.rel=isCss?"stylesheet":scriptRel,isCss||(link.as="script"),link.crossOrigin="",link.href=dep,cspNonce&&link.setAttribute("nonce",cspNonce),document.head.appendChild(link),isCss)return new Promise((res,rej)=>{link.addEventListener("load",res),link.addEventListener("error",()=>rej(new Error(`Unable to preload CSS for ${dep}`)))})}))}function handlePreloadError(err){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=err,window.dispatchEvent(e),!e.defaultPrevented)throw err}return promise.then(res=>{for(const item of res||[])item.status==="rejected"&&handlePreloadError(item.reason);return baseModule().catch(handlePreloadError)})};var fastDeepEqual=function equal(a,b){if(a===b)return!0;if(a&&b&&typeof a=="object"&&typeof b=="object"){if(a.constructor!==b.constructor)return!1;var length,i,keys;if(Array.isArray(a)){if(length=a.length,length!=b.length)return!1;for(i=length;i--!==0;)if(!equal(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if(keys=Object.keys(a),length=keys.length,length!==Object.keys(b).length)return!1;for(i=length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length;i--!==0;){var key=keys[i];if(!equal(a[key],b[key]))return!1}return!0}return a!==a&&b!==b};const isDeepEqual=getDefaultExportFromCjs(fastDeepEqual),VERSION$2="1.7.1";function __rest$1(s,e){var t={};for(var p2 in s)Object.prototype.hasOwnProperty.call(s,p2)&&e.indexOf(p2)<0&&(t[p2]=s[p2]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,p2=Object.getOwnPropertySymbols(s);i<p2.length;i++)e.indexOf(p2[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p2[i])&&(t[p2[i]]=s[p2[i]]);return t}function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,[])).next())})}const APILoadingStatus={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},MAPS_API_BASE_URL="https://maps.googleapis.com/maps/api/js";class GoogleMapsApiLoader{static load(params,onLoadingStatusChange){return __awaiter(this,void 0,void 0,function*(){var _a,_b;const libraries=params.libraries?params.libraries.split(","):[],serializedParams=this.serializeParams(params);this.listeners.push(onLoadingStatusChange),!((_b=(_a=window.google)===null||_a===void 0?void 0:_a.maps)===null||_b===void 0)&&_b.importLibrary?(this.serializedApiParams||(this.loadingStatus=APILoadingStatus.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=serializedParams,this.initImportLibrary(params)),this.serializedApiParams&&this.serializedApiParams!==serializedParams&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const librariesToLoad=["maps",...libraries];yield Promise.all(librariesToLoad.map(name2=>google.maps.importLibrary(name2)))})}static serializeParams(params){return[params.v,params.key,params.language,params.region,params.authReferrerPolicy,params.solutionChannel].join("/")}static initImportLibrary(params){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let apiPromise=null;const loadApi=()=>apiPromise||(apiPromise=new Promise((resolve,reject)=>{var _a;const scriptElement=document.createElement("script"),urlParams=new URLSearchParams;for(const[key,value]of Object.entries(params)){const urlParamName=key.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase());urlParams.set(urlParamName,String(value))}urlParams.set("loading","async"),urlParams.set("callback","__googleMapsCallback__"),scriptElement.async=!0,scriptElement.src=MAPS_API_BASE_URL+"?"+urlParams.toString(),scriptElement.nonce=((_a=document.querySelector("script[nonce]"))===null||_a===void 0?void 0:_a.nonce)||"",scriptElement.onerror=()=>{this.loadingStatus=APILoadingStatus.FAILED,this.notifyLoadingStatusListeners(),reject(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=APILoadingStatus.LOADED,this.notifyLoadingStatusListeners(),resolve()},window.gm_authFailure=()=>{this.loadingStatus=APILoadingStatus.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=APILoadingStatus.LOADING,this.notifyLoadingStatusListeners(),document.head.append(scriptElement)}),apiPromise);google.maps.importLibrary=libraryName=>loadApi().then(()=>google.maps.importLibrary(libraryName))}static notifyLoadingStatusListeners(){for(const fn of this.listeners)fn(this.loadingStatus)}}GoogleMapsApiLoader.loadingStatus=APILoadingStatus.NOT_LOADED;GoogleMapsApiLoader.listeners=[];const DEFAULT_SOLUTION_CHANNEL="GMP_visgl_rgmlibrary_v1_default",DEFAULT_INTERNAL_USAGE_ATTRIBUTION_IDS=[`gmp_visgl_reactgooglemaps_v${VERSION$2}`],APIProviderContext=React.createContext(null);function useMapInstances(){const[mapInstances,setMapInstances]=reactExports.useState({});return{mapInstances,addMapInstance:(mapInstance,id2="default")=>{setMapInstances(instances=>Object.assign(Object.assign({},instances),{[id2]:mapInstance}))},removeMapInstance:(id2="default")=>{setMapInstances(_a=>{var _b=id2;_a[_b];var remaining=__rest$1(_a,[typeof _b=="symbol"?_b:_b+""]);return remaining})},clearMapInstances:()=>{setMapInstances({})}}}function useGoogleMapsApiLoader(props){const{onLoad,onError,apiKey,version:version2,libraries=[]}=props,otherApiParams=__rest$1(props,["onLoad","onError","apiKey","version","libraries"]),[status,setStatus]=reactExports.useState(GoogleMapsApiLoader.loadingStatus),[loadedLibraries,addLoadedLibrary]=reactExports.useReducer((loadedLibraries2,action)=>loadedLibraries2[action.name]?loadedLibraries2:Object.assign(Object.assign({},loadedLibraries2),{[action.name]:action.value}),{}),librariesString=reactExports.useMemo(()=>libraries==null?void 0:libraries.join(","),[libraries]),serializedParams=reactExports.useMemo(()=>JSON.stringify(Object.assign({apiKey,version:version2},otherApiParams)),[apiKey,version2,otherApiParams]),importLibrary=reactExports.useCallback(name2=>__awaiter(this,void 0,void 0,function*(){var _a;if(loadedLibraries[name2])return loadedLibraries[name2];if(!(!((_a=google==null?void 0:google.maps)===null||_a===void 0)&&_a.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const res=yield window.google.maps.importLibrary(name2);return addLoadedLibrary({name:name2,value:res}),res}),[loadedLibraries]);return reactExports.useEffect(()=>{__awaiter(this,void 0,void 0,function*(){try{const params=Object.assign({key:apiKey},otherApiParams);version2&&(params.v=version2),(librariesString==null?void 0:librariesString.length)>0&&(params.libraries=librariesString),(params.channel===void 0||params.channel<0||params.channel>999)&&delete params.channel,params.solutionChannel===void 0?params.solutionChannel=DEFAULT_SOLUTION_CHANNEL:params.solutionChannel===""&&delete params.solutionChannel,yield GoogleMapsApiLoader.load(params,status2=>setStatus(status2));for(const name2 of["core","maps",...libraries])yield importLibrary(name2);onLoad&&onLoad()}catch(error){onError?onError(error):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",error)}})},[apiKey,librariesString,serializedParams]),{status,loadedLibraries,importLibrary}}function useInternalUsageAttributionIds(props){return reactExports.useMemo(()=>props.disableUsageAttribution?null:DEFAULT_INTERNAL_USAGE_ATTRIBUTION_IDS,[props.disableUsageAttribution])}const APIProvider=props=>{const{children}=props,loaderProps=__rest$1(props,["children"]),{mapInstances,addMapInstance,removeMapInstance,clearMapInstances}=useMapInstances(),{status,loadedLibraries,importLibrary}=useGoogleMapsApiLoader(loaderProps),internalUsageAttributionIds=useInternalUsageAttributionIds(loaderProps),contextValue=reactExports.useMemo(()=>({mapInstances,addMapInstance,removeMapInstance,clearMapInstances,status,loadedLibraries,importLibrary,internalUsageAttributionIds}),[mapInstances,addMapInstance,removeMapInstance,clearMapInstances,status,loadedLibraries,importLibrary,internalUsageAttributionIds]);return React.createElement(APIProviderContext.Provider,{value:contextValue},children)};function useMapEvents(map,props){for(const propName of eventPropNames){const handler=props[propName],eventType=propNameToEventType[propName];reactExports.useEffect(()=>{if(!map||!handler)return;const listener=google.maps.event.addListener(map,eventType,ev=>{handler(createMapEvent(eventType,map,ev))});return()=>listener.remove()},[map,eventType,handler])}}function createMapEvent(type,map,srcEvent){var _a;const ev={type,map,detail:{},stoppable:!1,stop:()=>{}};if(cameraEventTypes.includes(type)){const camEvent=ev,center=map.getCenter(),zoom=map.getZoom(),heading=map.getHeading()||0,tilt=map.getTilt()||0,bounds=map.getBounds();return(!center||!bounds||!Number.isFinite(zoom))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),camEvent.detail={center:(center==null?void 0:center.toJSON())||{lat:0,lng:0},zoom:zoom||0,heading,tilt,bounds:(bounds==null?void 0:bounds.toJSON())||{north:90,east:180,south:-90,west:-180}},camEvent}else if(mouseEventTypes.includes(type)){if(!srcEvent)throw new Error("[createEvent] mouse events must provide a srcEvent");const mouseEvent=ev;return mouseEvent.domEvent=srcEvent.domEvent,mouseEvent.stoppable=!0,mouseEvent.stop=()=>srcEvent.stop(),mouseEvent.detail={latLng:((_a=srcEvent.latLng)===null||_a===void 0?void 0:_a.toJSON())||null,placeId:srcEvent.placeId},mouseEvent}return ev}const propNameToEventType={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},cameraEventTypes=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],mouseEventTypes=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],eventPropNames=Object.keys(propNameToEventType);function usePrevious(value){const ref=reactExports.useRef(void 0);return reactExports.useEffect(()=>{ref.current=value}),ref.current}function useMemoized(value,isEqual){const previous=usePrevious(value);return reactExports.useMemo(()=>previous&&isEqual(previous,value)?previous:value,[value,previous,isEqual])}function useCustomCompareEffect(effect,dependencies,isEqual){reactExports.useEffect(effect,[useMemoized(dependencies,isEqual)])}function useDeepCompareEffect(effect,dependencies){useCustomCompareEffect(effect,dependencies,isDeepEqual)}const mapOptionKeys=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);function useMapOptions(map,mapProps){const mapOptions={},keys=Object.keys(mapProps);for(const key of keys)mapOptionKeys.has(key)&&(mapOptions[key]=mapProps[key]);useDeepCompareEffect(()=>{map&&map.setOptions(mapOptions)},[mapOptions])}function useApiLoadingStatus(){var _a;return((_a=reactExports.useContext(APIProviderContext))===null||_a===void 0?void 0:_a.status)||APILoadingStatus.NOT_LOADED}function useDeckGLCameraUpdate(map,props){const{viewport,viewState}=props,isDeckGlControlled=!!viewport;return reactExports.useLayoutEffect(()=>{if(!map||!viewState)return;const{latitude,longitude,bearing:heading,pitch:tilt,zoom}=viewState;map.moveCamera({center:{lat:latitude,lng:longitude},heading,tilt,zoom:zoom+1})},[map,viewState]),isDeckGlControlled}function isLatLngLiteral(obj){return!obj||typeof obj!="object"||!("lat"in obj&&"lng"in obj)?!1:Number.isFinite(obj.lat)&&Number.isFinite(obj.lng)}function toLatLngLiteral(obj){return isLatLngLiteral(obj)?obj:obj.toJSON()}function useMapCameraParams(map,cameraStateRef,mapProps){const center=mapProps.center?toLatLngLiteral(mapProps.center):null;let lat=null,lng=null;center&&Number.isFinite(center.lat)&&Number.isFinite(center.lng)&&(lat=center.lat,lng=center.lng);const zoom=Number.isFinite(mapProps.zoom)?mapProps.zoom:null,heading=Number.isFinite(mapProps.heading)?mapProps.heading:null,tilt=Number.isFinite(mapProps.tilt)?mapProps.tilt:null;reactExports.useLayoutEffect(()=>{if(!map)return;const nextCamera={};let needsUpdate=!1;lat!==null&&lng!==null&&(cameraStateRef.current.center.lat!==lat||cameraStateRef.current.center.lng!==lng)&&(nextCamera.center={lat,lng},needsUpdate=!0),zoom!==null&&cameraStateRef.current.zoom!==zoom&&(nextCamera.zoom=zoom,needsUpdate=!0),heading!==null&&cameraStateRef.current.heading!==heading&&(nextCamera.heading=heading,needsUpdate=!0),tilt!==null&&cameraStateRef.current.tilt!==tilt&&(nextCamera.tilt=tilt,needsUpdate=!0),needsUpdate&&map.moveCamera(nextCamera)})}const AuthFailureMessage=()=>{const style={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return React.createElement("div",{style},React.createElement("h2",null,"Error: AuthFailure"),React.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",React.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function useCallbackRef(){const[el,setEl]=reactExports.useState(null),ref=reactExports.useCallback(value=>setEl(value),[setEl]);return[el,ref]}function useApiIsLoaded(){return useApiLoadingStatus()===APILoadingStatus.LOADED}function useForceUpdate$1(){const[,forceUpdate]=reactExports.useReducer(x=>x+1,0);return forceUpdate}function handleBoundsChange(map,ref){const center=map.getCenter(),zoom=map.getZoom(),heading=map.getHeading()||0,tilt=map.getTilt()||0,bounds=map.getBounds();(!center||!bounds||!Number.isFinite(zoom))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(ref.current,{center:(center==null?void 0:center.toJSON())||{lat:0,lng:0},zoom:zoom||0,heading,tilt})}function useTrackedCameraStateRef(map){const forceUpdate=useForceUpdate$1(),ref=reactExports.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return reactExports.useEffect(()=>{if(!map)return;const listener=google.maps.event.addListener(map,"bounds_changed",()=>{handleBoundsChange(map,ref),forceUpdate()});return()=>listener.remove()},[map,forceUpdate]),ref}class CachedMapStack{static has(key){return this.entries[key]&&this.entries[key].length>0}static pop(key){return this.entries[key]&&this.entries[key].pop()||null}static push(key,value){this.entries[key]||(this.entries[key]=[]),this.entries[key].push(value)}}CachedMapStack.entries={};function useMapInstance(props,context){const apiIsLoaded=useApiIsLoaded(),[map,setMap]=reactExports.useState(null),[container,containerRef]=useCallbackRef(),cameraStateRef=useTrackedCameraStateRef(map),{id:id2,defaultBounds,defaultCenter,defaultZoom,defaultHeading,defaultTilt,reuseMaps,renderingType,colorScheme}=props,mapOptions=__rest$1(props,["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"]),hasZoom=props.zoom!==void 0||props.defaultZoom!==void 0,hasCenter=props.center!==void 0||props.defaultCenter!==void 0;!defaultBounds&&(!hasZoom||!hasCenter)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!mapOptions.center&&defaultCenter&&(mapOptions.center=defaultCenter),!mapOptions.zoom&&Number.isFinite(defaultZoom)&&(mapOptions.zoom=defaultZoom),!mapOptions.heading&&Number.isFinite(defaultHeading)&&(mapOptions.heading=defaultHeading),!mapOptions.tilt&&Number.isFinite(defaultTilt)&&(mapOptions.tilt=defaultTilt);const customIds=mapOptions.internalUsageAttributionIds;customIds==null?mapOptions.internalUsageAttributionIds=context.internalUsageAttributionIds:mapOptions.internalUsageAttributionIds=[...context.internalUsageAttributionIds||[],...customIds];for(const key of Object.keys(mapOptions))mapOptions[key]===void 0&&delete mapOptions[key];const savedMapStateRef=reactExports.useRef(void 0);return reactExports.useEffect(()=>{if(!container||!apiIsLoaded)return;const{addMapInstance,removeMapInstance}=context,{mapId}=props,cacheKey=`${mapId||"default"}:${renderingType||"default"}:${colorScheme||"LIGHT"}`;let mapDiv,map2;if(reuseMaps&&CachedMapStack.has(cacheKey)?(map2=CachedMapStack.pop(cacheKey),mapDiv=map2.getDiv(),container.appendChild(mapDiv),map2.setOptions(mapOptions),setTimeout(()=>map2.setCenter(map2.getCenter()),0)):(mapDiv=document.createElement("div"),mapDiv.style.height="100%",container.appendChild(mapDiv),map2=new google.maps.Map(mapDiv,Object.assign(Object.assign(Object.assign({},mapOptions),renderingType?{renderingType}:{}),colorScheme?{colorScheme}:{}))),setMap(map2),addMapInstance(map2,id2),defaultBounds){const{padding}=defaultBounds,defBounds=__rest$1(defaultBounds,["padding"]);map2.fitBounds(defBounds,padding)}else(!hasZoom||!hasCenter)&&map2.fitBounds({east:180,west:-180,south:-90,north:90});if(savedMapStateRef.current){const{mapId:savedMapId,cameraState:savedCameraState}=savedMapStateRef.current;savedMapId!==mapId&&map2.setOptions(savedCameraState)}return()=>{savedMapStateRef.current={mapId,cameraState:cameraStateRef.current},mapDiv.remove(),reuseMaps?CachedMapStack.push(cacheKey,map2):google.maps.event.clearInstanceListeners(map2),setMap(null),removeMapInstance(id2)}},[container,apiIsLoaded,id2,props.mapId,props.renderingType,props.colorScheme]),[map,containerRef,cameraStateRef]}const GoogleMapsContext=React.createContext(null),Map$1=props=>{const{children,id:id2,className,style}=props,context=reactExports.useContext(APIProviderContext),loadingStatus=useApiLoadingStatus();if(!context)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[map,mapRef,cameraStateRef]=useMapInstance(props,context);useMapCameraParams(map,cameraStateRef,props),useMapEvents(map,props),useMapOptions(map,props);const isDeckGlControlled=useDeckGLCameraUpdate(map,props),isControlledExternally=!!props.controlled;reactExports.useEffect(()=>{if(map)return isDeckGlControlled&&map.setOptions({disableDefaultUI:!0}),(isDeckGlControlled||isControlledExternally)&&map.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{map.setOptions({gestureHandling:props.gestureHandling,keyboardShortcuts:props.keyboardShortcuts})}},[map,isDeckGlControlled,isControlledExternally,props.gestureHandling,props.keyboardShortcuts]);const center=props.center?toLatLngLiteral(props.center):null;let lat=null,lng=null;center&&Number.isFinite(center.lat)&&Number.isFinite(center.lng)&&(lat=center.lat,lng=center.lng);const cameraOptions=reactExports.useMemo(()=>{var _a,_b,_c;return{center:{lat:lat??0,lng:lng??0},zoom:(_a=props.zoom)!==null&&_a!==void 0?_a:0,heading:(_b=props.heading)!==null&&_b!==void 0?_b:0,tilt:(_c=props.tilt)!==null&&_c!==void 0?_c:0}},[lat,lng,props.zoom,props.heading,props.tilt]);reactExports.useLayoutEffect(()=>{if(!map||!isControlledExternally)return;map.moveCamera(cameraOptions);const listener=map.addListener("bounds_changed",()=>{map.moveCamera(cameraOptions)});return()=>listener.remove()},[map,isControlledExternally,cameraOptions]);const combinedStyle=reactExports.useMemo(()=>Object.assign({width:"100%",height:"100%",position:"relative",zIndex:isDeckGlControlled?-1:0},style),[style,isDeckGlControlled]),contextValue=reactExports.useMemo(()=>({map}),[map]);return loadingStatus===APILoadingStatus.AUTH_FAILURE?React.createElement("div",{style:Object.assign({position:"relative"},className?{}:combinedStyle),className},React.createElement(AuthFailureMessage,null)):React.createElement("div",Object.assign({ref:mapRef,"data-testid":"map",style:className?void 0:combinedStyle,className},id2?{id:id2}:{}),map?React.createElement(GoogleMapsContext.Provider,{value:contextValue},children):null)};Map$1.deckGLViewProps=!0;const shownMessages=new Set;function logErrorOnce(...args){const key=JSON.stringify(args);shownMessages.has(key)||(shownMessages.add(key),console.error(...args))}const useMap=(id2=null)=>{const ctx=reactExports.useContext(APIProviderContext),{map}=reactExports.useContext(GoogleMapsContext)||{};if(ctx===null)return logErrorOnce("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances}=ctx;return id2!==null?mapInstances[id2]||null:map||mapInstances.default||null};function useMapsLibrary(name2){const apiIsLoaded=useApiIsLoaded(),ctx=reactExports.useContext(APIProviderContext);return reactExports.useEffect(()=>{!apiIsLoaded||!ctx||ctx.importLibrary(name2)},[apiIsLoaded,ctx,name2]),(ctx==null?void 0:ctx.loadedLibraries[name2])||null}function useMapsEventListener(target,name2,callback){reactExports.useEffect(()=>{if(!target||!name2||!callback)return;const listener=google.maps.event.addListener(target,name2,callback);return()=>listener.remove()},[target,name2,callback])}function usePropBinding(object,prop,value){reactExports.useEffect(()=>{object&&(object[prop]=value)},[object,prop,value])}function useDomEventListener(target,name2,callback){reactExports.useEffect(()=>{if(!(!target||!name2||!callback))return target.addEventListener(name2,callback),()=>target.removeEventListener(name2,callback)},[target,name2,callback])}class GlobalStyleManager{constructor(){this.renderedStyles=new Set,this.styleElement=null}getStyleElement(){return this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.setAttribute("data-rgm-anchor-styles",""),document.head.appendChild(this.styleElement)),this.styleElement}addAdvancedMarkerPointerEventsOverwrite(){if(this.renderedStyles.has("marker-pointer-events"))return;const styleElement=this.getStyleElement();styleElement.textContent+=`
      gmp-advanced-marker[data-origin='rgm'] {
        pointer-events: none !important;
      }
    `,this.renderedStyles.add("marker-pointer-events")}cleanup(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null,this.renderedStyles.clear())}}const globalStyleManager=new GlobalStyleManager;function isVersionGreaterEqual(major,minor){var _a;if(!(!((_a=google==null?void 0:google.maps)===null||_a===void 0)&&_a.version))return;const version2=google.maps.version.split("."),currentMajor=parseInt(version2[0],10),currentMinor=parseInt(version2[1],10);return currentMajor>major||currentMajor===major&&currentMinor>=minor}const AdvancedMarkerContext=React.createContext(null),AdvancedMarkerAnchorPoint={BOTTOM:["50%","100%"]},AdvancedMarker=reactExports.forwardRef((props,ref)=>{const{children,style,className,anchorPoint}=props,[marker,contentContainer]=useAdvancedMarker(props),advancedMarkerContextValue=reactExports.useMemo(()=>marker?{marker}:null,[marker]);return reactExports.useImperativeHandle(ref,()=>marker,[marker]),contentContainer?React.createElement(AdvancedMarkerContext.Provider,{value:advancedMarkerContextValue},reactDomExports.createPortal(React.createElement(MarkerContent,{anchorPoint,styles:style,className},children),contentContainer)):null});AdvancedMarker.displayName="AdvancedMarker";function isAdvancedMarker(marker){return marker.content!==void 0}function isElementNode(node){return node.nodeType===Node.ELEMENT_NODE}const MarkerContent=({children,styles,className})=>React.createElement("div",{className,style:styles},children);function useAdvancedMarker(props){const[marker,setMarker]=reactExports.useState(null),[contentContainer,setContentContainer]=reactExports.useState(null),map=useMap(),markerLibrary=useMapsLibrary("marker"),{children,onClick,className,onMouseEnter,onMouseLeave,onDrag,onDragStart,onDragEnd,collisionBehavior,clickable,draggable,position,title,zIndex,anchorPoint,anchorLeft,anchorTop}=props,numChildren=reactExports.Children.count(children);return reactExports.useEffect(()=>{if(!map||!markerLibrary)return;const newMarker=new markerLibrary.AdvancedMarkerElement;newMarker.map=map,setMarker(newMarker);let contentElement=null;return numChildren>0&&(contentElement=document.createElement("div"),newMarker.content=contentElement,setContentContainer(contentElement)),()=>{newMarker.map=null,contentElement==null||contentElement.remove(),setMarker(null),setContentContainer(null)}},[map,markerLibrary,numChildren]),reactExports.useEffect(()=>{!(marker!=null&&marker.content)||!isElementNode(marker.content)||numChildren>0||(marker.content.className=className??"")},[marker,className,numChildren]),useAdvancedMarkerAnchoring(marker,anchorPoint,anchorLeft,anchorTop,numChildren>0),usePropBinding(marker,"position",position),usePropBinding(marker,"title",title??""),usePropBinding(marker,"zIndex",zIndex),usePropBinding(marker,"collisionBehavior",collisionBehavior),reactExports.useEffect(()=>{marker&&(draggable!==void 0?marker.gmpDraggable=draggable:onDrag||onDragStart||onDragEnd?marker.gmpDraggable=!0:marker.gmpDraggable=!1)},[marker,draggable,onDrag,onDragEnd,onDragStart]),reactExports.useEffect(()=>{if(!marker)return;const gmpClickable=clickable!==void 0||!!onClick||!!onMouseEnter||!!onMouseLeave;marker.gmpClickable=gmpClickable,gmpClickable&&(marker!=null&&marker.content)&&isElementNode(marker.content)&&(marker.content.style.pointerEvents="all",onClick&&(marker.content.style.cursor="pointer"))},[marker,clickable,onClick,onMouseEnter,onMouseLeave]),useMapsEventListener(marker,"click",onClick),useMapsEventListener(marker,"drag",onDrag),useMapsEventListener(marker,"dragstart",onDragStart),useMapsEventListener(marker,"dragend",onDragEnd),useDomEventListener(marker==null?void 0:marker.element,"mouseenter",onMouseEnter),useDomEventListener(marker==null?void 0:marker.element,"mouseleave",onMouseLeave),[marker,contentContainer]}function useAdvancedMarkerAnchoring(marker,anchorPoint,anchorLeft,anchorTop,hasChildren){reactExports.useEffect(()=>{if(!marker||!hasChildren)return;const anchorOptionsSupported=isVersionGreaterEqual(3,62),contentElement=marker.content;if(!(!contentElement||!isElementNode(contentElement))){if(anchorLeft!==void 0||anchorTop!==void 0){anchorOptionsSupported||console.warn(`AdvancedMarker: The anchorLeft and anchorTop props are only supported in Google Maps API version 3.62 and above. The current version is ${google.maps.version}.`),marker.anchorLeft=anchorLeft,marker.anchorTop=anchorTop,anchorPoint!==void 0&&console.warn("AdvancedMarker: the anchorPoint prop is ignored when anchorLeft and/or anchorTop are set.");return}if(anchorPoint!==void 0){const[x,y]=anchorPoint??AdvancedMarkerAnchorPoint.BOTTOM,translateX=`calc(-1 * ${x})`,translateY=`calc(-1 * ${y})`;anchorOptionsSupported?(marker.anchorLeft=translateX,marker.anchorTop=translateY,contentElement.style.transform=""):(contentElement.style.transform=`translate(50%, 100%) translate(${translateX}, ${translateY})`,marker.dataset.origin="rgm",globalStyleManager.addAdvancedMarkerPointerEventsOverwrite())}}},[marker,anchorPoint,anchorLeft,anchorTop,hasChildren])}function setValueForStyles(element,styles,prevStyles){if(styles!=null&&typeof styles!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const elementStyle=element.style;if(prevStyles==null){if(styles==null)return;for(const styleName in styles)styles.hasOwnProperty(styleName)&&setValueForStyle(elementStyle,styleName,styles[styleName]);return}for(const styleName in prevStyles)prevStyles.hasOwnProperty(styleName)&&(styles==null||!styles.hasOwnProperty(styleName))&&(styleName.indexOf("--")===0?elementStyle.setProperty(styleName,""):styleName==="float"?elementStyle.cssFloat="":elementStyle[styleName]="");if(styles!=null)for(const styleName in styles){const value=styles[styleName];styles.hasOwnProperty(styleName)&&prevStyles[styleName]!==value&&setValueForStyle(elementStyle,styleName,value)}}function setValueForStyle(elementStyle,styleName,value){const isCustomProperty=styleName.indexOf("--")===0;value==null||typeof value=="boolean"||value===""?isCustomProperty?elementStyle.setProperty(styleName,""):styleName==="float"?elementStyle.cssFloat="":elementStyle[styleName]="":isCustomProperty?elementStyle.setProperty(styleName,value):typeof value=="number"&&value!==0&&!isUnitlessNumber(styleName)?elementStyle[styleName]=value+"px":styleName==="float"?elementStyle.cssFloat=value:elementStyle[styleName]=(""+value).trim()}const unitlessNumbers=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function isUnitlessNumber(name2){return unitlessNumbers.has(name2)}const InfoWindow=props=>{const{children,headerContent,style,className,pixelOffset,anchor,shouldFocus,onClose,onCloseClick}=props,volatileInfoWindowOptions=__rest$1(props,["children","headerContent","style","className","pixelOffset","anchor","shouldFocus","onClose","onCloseClick"]),mapsLibrary=useMapsLibrary("maps"),[infoWindow,setInfoWindow]=reactExports.useState(null),contentContainerRef=reactExports.useRef(null),headerContainerRef=reactExports.useRef(null),infoWindowOptions=useMemoized(volatileInfoWindowOptions,isDeepEqual);reactExports.useEffect(()=>{if(!mapsLibrary)return;contentContainerRef.current=document.createElement("div"),headerContainerRef.current=document.createElement("div");const opts=infoWindowOptions;pixelOffset&&(opts.pixelOffset=new google.maps.Size(pixelOffset[0],pixelOffset[1])),headerContent&&(opts.headerContent=typeof headerContent=="string"?headerContent:headerContainerRef.current);const infoWindow2=new google.maps.InfoWindow(infoWindowOptions);return infoWindow2.setContent(contentContainerRef.current),setInfoWindow(infoWindow2),()=>{var _a,_b;infoWindow2.setContent(null),(_a=contentContainerRef.current)===null||_a===void 0||_a.remove(),(_b=headerContainerRef.current)===null||_b===void 0||_b.remove(),contentContainerRef.current=null,headerContainerRef.current=null,setInfoWindow(null)}},[mapsLibrary]);const prevStyleRef=reactExports.useRef(null);reactExports.useEffect(()=>{!infoWindow||!contentContainerRef.current||(setValueForStyles(contentContainerRef.current,style||null,prevStyleRef.current),prevStyleRef.current=style||null,className!==contentContainerRef.current.className&&(contentContainerRef.current.className=className||""))},[infoWindow,className,style]),reactExports.useEffect(()=>{if(!infoWindow)return;const opts=infoWindowOptions;pixelOffset?opts.pixelOffset=new google.maps.Size(pixelOffset[0],pixelOffset[1]):opts.pixelOffset=null,headerContent?opts.headerContent=typeof headerContent=="string"?headerContent:headerContainerRef.current:opts.headerContent=null,infoWindow.setOptions(infoWindowOptions)},[infoWindowOptions,pixelOffset,headerContent]),useMapsEventListener(infoWindow,"close",onClose),useMapsEventListener(infoWindow,"closeclick",onCloseClick);const map=useMap();return reactExports.useEffect(()=>{var _a;if(!map||!infoWindow||anchor===null)return;const isOpenedWithAnchor=!!anchor,openOptions={map};if(anchor&&(openOptions.anchor=anchor,isAdvancedMarker(anchor)&&anchor.content instanceof Element)){const anchorBcr=anchor==null?void 0:anchor.getBoundingClientRect();if(anchorBcr&&anchor.dataset.origin==="rgm"){const anchorDomContent=(_a=anchor.content.firstElementChild)===null||_a===void 0?void 0:_a.firstElementChild,contentBcr=anchorDomContent==null?void 0:anchorDomContent.getBoundingClientRect(),anchorOffsetX=contentBcr.x-anchorBcr.x+(contentBcr.width-anchorBcr.width)/2,anchorOffsetY=contentBcr.y-anchorBcr.y,opts=infoWindowOptions;opts.pixelOffset=new google.maps.Size(pixelOffset?pixelOffset[0]+anchorOffsetX:anchorOffsetX,pixelOffset?pixelOffset[1]+anchorOffsetY:anchorOffsetY),infoWindow.setOptions(opts)}}return shouldFocus!==void 0&&(openOptions.shouldFocus=shouldFocus),infoWindow.open(openOptions),()=>{isOpenedWithAnchor&&infoWindow.set("anchor",null),infoWindow.close()}},[infoWindow,anchor,map,shouldFocus,infoWindowOptions,pixelOffset]),React.createElement(React.Fragment,null,contentContainerRef.current&&reactDomExports.createPortal(children,contentContainerRef.current),headerContainerRef.current!==null&&reactDomExports.createPortal(headerContent,headerContainerRef.current))};function useMarker(props){const[marker,setMarker]=reactExports.useState(null),map=useMap(),{onClick,onDrag,onDragStart,onDragEnd,onMouseOver,onMouseOut}=props,markerOptions=__rest$1(props,["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"]),{position,draggable}=markerOptions;return reactExports.useEffect(()=>{if(!map){map===void 0&&console.error("<Marker> has to be inside a Map component.");return}const newMarker=new google.maps.Marker(markerOptions);return newMarker.setMap(map),setMarker(newMarker),()=>{newMarker.setMap(null),setMarker(null)}},[map]),reactExports.useEffect(()=>{if(!marker)return;const m2=marker,gme=google.maps.event;return onClick&&gme.addListener(m2,"click",onClick),onDrag&&gme.addListener(m2,"drag",onDrag),onDragStart&&gme.addListener(m2,"dragstart",onDragStart),onDragEnd&&gme.addListener(m2,"dragend",onDragEnd),onMouseOver&&gme.addListener(m2,"mouseover",onMouseOver),onMouseOut&&gme.addListener(m2,"mouseout",onMouseOut),marker.setDraggable(!!draggable),()=>{gme.clearInstanceListeners(m2)}},[marker,draggable,onClick,onDrag,onDragStart,onDragEnd,onMouseOver,onMouseOut]),reactExports.useEffect(()=>{marker&&markerOptions&&marker.setOptions(markerOptions)},[marker,markerOptions]),reactExports.useEffect(()=>{draggable||!position||!marker||marker.setPosition(position)},[draggable,position,marker]),marker}const Marker=reactExports.forwardRef((props,ref)=>{const marker=useMarker(props);return reactExports.useImperativeHandle(ref,()=>marker,[marker]),React.createElement(React.Fragment,null)});Marker.displayName="Marker";const ThemeContext=reactExports.createContext(void 0),useTheme=()=>{const context=reactExports.useContext(ThemeContext);if(context===void 0)throw new Error("useTheme must be used within a ThemeProvider");return context},ThemeProvider=({children})=>{const[isDarkMode,setIsDarkMode]=reactExports.useState(()=>{const saved=localStorage.getItem("darkMode");return saved?JSON.parse(saved):!1});reactExports.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(isDarkMode)),isDarkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[isDarkMode]);const toggleDarkMode=()=>{setIsDarkMode(!isDarkMode)};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{isDarkMode,toggleDarkMode},children})};function bind(fn,thisArg){return function(){return fn.apply(thisArg,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(cache=>thing=>{const str=toString.call(thing);return cache[str]||(cache[str]=str.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=type=>(type=type.toLowerCase(),thing=>kindOf(thing)===type),typeOfTest=type=>thing=>typeof thing===type,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(val){return val!==null&&!isUndefined(val)&&val.constructor!==null&&!isUndefined(val.constructor)&&isFunction$1(val.constructor.isBuffer)&&val.constructor.isBuffer(val)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(val){let result;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?result=ArrayBuffer.isView(val):result=val&&val.buffer&&isArrayBuffer(val.buffer),result}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$1=thing=>thing!==null&&typeof thing=="object",isBoolean=thing=>thing===!0||thing===!1,isPlainObject=val=>{if(kindOf(val)!=="object")return!1;const prototype2=getPrototypeOf(val);return(prototype2===null||prototype2===Object.prototype||Object.getPrototypeOf(prototype2)===null)&&!(toStringTag in val)&&!(iterator in val)},isEmptyObject=val=>{if(!isObject$1(val)||isBuffer(val))return!1;try{return Object.keys(val).length===0&&Object.getPrototypeOf(val)===Object.prototype}catch{return!1}},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=val=>isObject$1(val)&&isFunction$1(val.pipe),isFormData=thing=>{let kind;return thing&&(typeof FormData=="function"&&thing instanceof FormData||isFunction$1(thing.append)&&((kind=kindOf(thing))==="formdata"||kind==="object"&&isFunction$1(thing.toString)&&thing.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=str=>str.trim?str.trim():str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(obj,fn,{allOwnKeys=!1}={}){if(obj===null||typeof obj>"u")return;let i,l2;if(typeof obj!="object"&&(obj=[obj]),isArray(obj))for(i=0,l2=obj.length;i<l2;i++)fn.call(null,obj[i],i,obj);else{if(isBuffer(obj))return;const keys=allOwnKeys?Object.getOwnPropertyNames(obj):Object.keys(obj),len=keys.length;let key;for(i=0;i<len;i++)key=keys[i],fn.call(null,obj[key],key,obj)}}function findKey(obj,key){if(isBuffer(obj))return null;key=key.toLowerCase();const keys=Object.keys(obj);let i=keys.length,_key;for(;i-- >0;)if(_key=keys[i],key===_key.toLowerCase())return _key;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=context=>!isUndefined(context)&&context!==_global;function merge(){const{caseless,skipUndefined}=isContextDefined(this)&&this||{},result={},assignValue=(val,key)=>{const targetKey=caseless&&findKey(result,key)||key;isPlainObject(result[targetKey])&&isPlainObject(val)?result[targetKey]=merge(result[targetKey],val):isPlainObject(val)?result[targetKey]=merge({},val):isArray(val)?result[targetKey]=val.slice():(!skipUndefined||!isUndefined(val))&&(result[targetKey]=val)};for(let i=0,l2=arguments.length;i<l2;i++)arguments[i]&&forEach(arguments[i],assignValue);return result}const extend=(a,b,thisArg,{allOwnKeys}={})=>(forEach(b,(val,key)=>{thisArg&&isFunction$1(val)?a[key]=bind(val,thisArg):a[key]=val},{allOwnKeys}),a),stripBOM=content=>(content.charCodeAt(0)===65279&&(content=content.slice(1)),content),inherits=(constructor,superConstructor,props,descriptors2)=>{constructor.prototype=Object.create(superConstructor.prototype,descriptors2),constructor.prototype.constructor=constructor,Object.defineProperty(constructor,"super",{value:superConstructor.prototype}),props&&Object.assign(constructor.prototype,props)},toFlatObject=(sourceObj,destObj,filter3,propFilter)=>{let props,i,prop;const merged={};if(destObj=destObj||{},sourceObj==null)return destObj;do{for(props=Object.getOwnPropertyNames(sourceObj),i=props.length;i-- >0;)prop=props[i],(!propFilter||propFilter(prop,sourceObj,destObj))&&!merged[prop]&&(destObj[prop]=sourceObj[prop],merged[prop]=!0);sourceObj=filter3!==!1&&getPrototypeOf(sourceObj)}while(sourceObj&&(!filter3||filter3(sourceObj,destObj))&&sourceObj!==Object.prototype);return destObj},endsWith=(str,searchString,position)=>{str=String(str),(position===void 0||position>str.length)&&(position=str.length),position-=searchString.length;const lastIndex=str.indexOf(searchString,position);return lastIndex!==-1&&lastIndex===position},toArray=thing=>{if(!thing)return null;if(isArray(thing))return thing;let i=thing.length;if(!isNumber$1(i))return null;const arr=new Array(i);for(;i-- >0;)arr[i]=thing[i];return arr},isTypedArray=(TypedArray=>thing=>TypedArray&&thing instanceof TypedArray)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(obj,fn)=>{const _iterator=(obj&&obj[iterator]).call(obj);let result;for(;(result=_iterator.next())&&!result.done;){const pair=result.value;fn.call(obj,pair[0],pair[1])}},matchAll=(regExp,str)=>{let matches;const arr=[];for(;(matches=regExp.exec(str))!==null;)arr.push(matches);return arr},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=str=>str.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(m2,p1,p2){return p1.toUpperCase()+p2}),hasOwnProperty=(({hasOwnProperty:hasOwnProperty2})=>(obj,prop)=>hasOwnProperty2.call(obj,prop))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(obj,reducer)=>{const descriptors2=Object.getOwnPropertyDescriptors(obj),reducedDescriptors={};forEach(descriptors2,(descriptor,name2)=>{let ret;(ret=reducer(descriptor,name2,obj))!==!1&&(reducedDescriptors[name2]=ret||descriptor)}),Object.defineProperties(obj,reducedDescriptors)},freezeMethods=obj=>{reduceDescriptors(obj,(descriptor,name2)=>{if(isFunction$1(obj)&&["arguments","caller","callee"].indexOf(name2)!==-1)return!1;const value=obj[name2];if(isFunction$1(value)){if(descriptor.enumerable=!1,"writable"in descriptor){descriptor.writable=!1;return}descriptor.set||(descriptor.set=()=>{throw Error("Can not rewrite read-only method '"+name2+"'")})}})},toObjectSet=(arrayOrString,delimiter)=>{const obj={},define=arr=>{arr.forEach(value=>{obj[value]=!0})};return isArray(arrayOrString)?define(arrayOrString):define(String(arrayOrString).split(delimiter)),obj},noop$2=()=>{},toFiniteNumber=(value,defaultValue)=>value!=null&&Number.isFinite(value=+value)?value:defaultValue;function isSpecCompliantForm(thing){return!!(thing&&isFunction$1(thing.append)&&thing[toStringTag]==="FormData"&&thing[iterator])}const toJSONObject=obj=>{const stack=new Array(10),visit=(source,i)=>{if(isObject$1(source)){if(stack.indexOf(source)>=0)return;if(isBuffer(source))return source;if(!("toJSON"in source)){stack[i]=source;const target=isArray(source)?[]:{};return forEach(source,(value,key)=>{const reducedValue=visit(value,i+1);!isUndefined(reducedValue)&&(target[key]=reducedValue)}),stack[i]=void 0,target}}return source};return visit(obj,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=thing=>thing&&(isObject$1(thing)||isFunction$1(thing))&&isFunction$1(thing.then)&&isFunction$1(thing.catch),_setImmediate=((setImmediateSupported,postMessageSupported)=>setImmediateSupported?setImmediate:postMessageSupported?((token,callbacks)=>(_global.addEventListener("message",({source,data})=>{source===_global&&data===token&&callbacks.length&&callbacks.shift()()},!1),cb=>{callbacks.push(cb),_global.postMessage(token,"*")}))(`axios@${Math.random()}`,[]):cb=>setTimeout(cb))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=thing=>thing!=null&&isFunction$1(thing[iterator]),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean,isObject:isObject$1,isPlainObject,isEmptyObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};function AxiosError$1(message,code,config,request,response){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=message,this.name="AxiosError",code&&(this.code=code),config&&(this.config=config),request&&(this.request=request),response&&(this.response=response,this.status=response.status?response.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(code=>{descriptors[code]={value:code}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(error,code,config,request,response,customProps)=>{const axiosError=Object.create(prototype$1);utils$1.toFlatObject(error,axiosError,function(obj){return obj!==Error.prototype},prop=>prop!=="isAxiosError");const msg=error&&error.message?error.message:"Error",errCode=code==null&&error?error.code:code;return AxiosError$1.call(axiosError,msg,errCode,config,request,response),error&&axiosError.cause==null&&Object.defineProperty(axiosError,"cause",{value:error,configurable:!0}),axiosError.name=error&&error.name||"Error",customProps&&Object.assign(axiosError,customProps),axiosError};const httpAdapter=null;function isVisitable(thing){return utils$1.isPlainObject(thing)||utils$1.isArray(thing)}function removeBrackets(key){return utils$1.endsWith(key,"[]")?key.slice(0,-2):key}function renderKey(path,key,dots){return path?path.concat(key).map(function(token,i){return token=removeBrackets(token),!dots&&i?"["+token+"]":token}).join(dots?".":""):key}function isFlatArray(arr){return utils$1.isArray(arr)&&!arr.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(prop){return/^is[A-Z]/.test(prop)});function toFormData$1(obj,formData,options){if(!utils$1.isObject(obj))throw new TypeError("target must be an object");formData=formData||new FormData,options=utils$1.toFlatObject(options,{metaTokens:!0,dots:!1,indexes:!1},!1,function(option,source){return!utils$1.isUndefined(source[option])});const metaTokens=options.metaTokens,visitor=options.visitor||defaultVisitor,dots=options.dots,indexes=options.indexes,useBlob=(options.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(formData);if(!utils$1.isFunction(visitor))throw new TypeError("visitor must be a function");function convertValue(value){if(value===null)return"";if(utils$1.isDate(value))return value.toISOString();if(utils$1.isBoolean(value))return value.toString();if(!useBlob&&utils$1.isBlob(value))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(value)||utils$1.isTypedArray(value)?useBlob&&typeof Blob=="function"?new Blob([value]):Buffer.from(value):value}function defaultVisitor(value,key,path){let arr=value;if(value&&!path&&typeof value=="object"){if(utils$1.endsWith(key,"{}"))key=metaTokens?key:key.slice(0,-2),value=JSON.stringify(value);else if(utils$1.isArray(value)&&isFlatArray(value)||(utils$1.isFileList(value)||utils$1.endsWith(key,"[]"))&&(arr=utils$1.toArray(value)))return key=removeBrackets(key),arr.forEach(function(el,index){!(utils$1.isUndefined(el)||el===null)&&formData.append(indexes===!0?renderKey([key],index,dots):indexes===null?key:key+"[]",convertValue(el))}),!1}return isVisitable(value)?!0:(formData.append(renderKey(path,key,dots),convertValue(value)),!1)}const stack=[],exposedHelpers=Object.assign(predicates,{defaultVisitor,convertValue,isVisitable});function build(value,path){if(!utils$1.isUndefined(value)){if(stack.indexOf(value)!==-1)throw Error("Circular reference detected in "+path.join("."));stack.push(value),utils$1.forEach(value,function(el,key){(!(utils$1.isUndefined(el)||el===null)&&visitor.call(formData,el,utils$1.isString(key)?key.trim():key,path,exposedHelpers))===!0&&build(el,path?path.concat(key):[key])}),stack.pop()}}if(!utils$1.isObject(obj))throw new TypeError("data must be an object");return build(obj),formData}function encode$1(str){const charMap={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g,function(match){return charMap[match]})}function AxiosURLSearchParams(params,options){this._pairs=[],params&&toFormData$1(params,this,options)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(name2,value){this._pairs.push([name2,value])};prototype.toString=function(encoder){const _encode=encoder?function(value){return encoder.call(this,value,encode$1)}:encode$1;return this._pairs.map(function(pair){return _encode(pair[0])+"="+_encode(pair[1])},"").join("&")};function encode(val){return encodeURIComponent(val).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(url,params,options){if(!params)return url;const _encode=options&&options.encode||encode;utils$1.isFunction(options)&&(options={serialize:options});const serializeFn=options&&options.serialize;let serializedParams;if(serializeFn?serializedParams=serializeFn(params,options):serializedParams=utils$1.isURLSearchParams(params)?params.toString():new AxiosURLSearchParams(params,options).toString(_encode),serializedParams){const hashmarkIndex=url.indexOf("#");hashmarkIndex!==-1&&(url=url.slice(0,hashmarkIndex)),url+=(url.indexOf("?")===-1?"?":"&")+serializedParams}return url}class InterceptorManager{constructor(){this.handlers=[]}use(fulfilled,rejected,options){return this.handlers.push({fulfilled,rejected,synchronous:options?options.synchronous:!1,runWhen:options?options.runWhen:null}),this.handlers.length-1}eject(id2){this.handlers[id2]&&(this.handlers[id2]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(fn){utils$1.forEach(this.handlers,function(h){h!==null&&fn(h)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(data,options){return toFormData$1(data,new platform.classes.URLSearchParams,{visitor:function(value,key,path,helpers){return platform.isNode&&utils$1.isBuffer(value)?(this.append(key,value.toString("base64")),!1):helpers.defaultVisitor.apply(this,arguments)},...options})}function parsePropPath(name2){return utils$1.matchAll(/\w+|\[(\w*)]/g,name2).map(match=>match[0]==="[]"?"":match[1]||match[0])}function arrayToObject(arr){const obj={},keys=Object.keys(arr);let i;const len=keys.length;let key;for(i=0;i<len;i++)key=keys[i],obj[key]=arr[key];return obj}function formDataToJSON(formData){function buildPath(path,value,target,index){let name2=path[index++];if(name2==="__proto__")return!0;const isNumericKey=Number.isFinite(+name2),isLast=index>=path.length;return name2=!name2&&utils$1.isArray(target)?target.length:name2,isLast?(utils$1.hasOwnProp(target,name2)?target[name2]=[target[name2],value]:target[name2]=value,!isNumericKey):((!target[name2]||!utils$1.isObject(target[name2]))&&(target[name2]=[]),buildPath(path,value,target[name2],index)&&utils$1.isArray(target[name2])&&(target[name2]=arrayToObject(target[name2])),!isNumericKey)}if(utils$1.isFormData(formData)&&utils$1.isFunction(formData.entries)){const obj={};return utils$1.forEachEntry(formData,(name2,value)=>{buildPath(parsePropPath(name2),value,obj,0)}),obj}return null}function stringifySafely(rawValue,parser,encoder){if(utils$1.isString(rawValue))try{return(parser||JSON.parse)(rawValue),utils$1.trim(rawValue)}catch(e){if(e.name!=="SyntaxError")throw e}return(encoder||JSON.stringify)(rawValue)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(data,headers){const contentType=headers.getContentType()||"",hasJSONContentType=contentType.indexOf("application/json")>-1,isObjectPayload=utils$1.isObject(data);if(isObjectPayload&&utils$1.isHTMLForm(data)&&(data=new FormData(data)),utils$1.isFormData(data))return hasJSONContentType?JSON.stringify(formDataToJSON(data)):data;if(utils$1.isArrayBuffer(data)||utils$1.isBuffer(data)||utils$1.isStream(data)||utils$1.isFile(data)||utils$1.isBlob(data)||utils$1.isReadableStream(data))return data;if(utils$1.isArrayBufferView(data))return data.buffer;if(utils$1.isURLSearchParams(data))return headers.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),data.toString();let isFileList2;if(isObjectPayload){if(contentType.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(data,this.formSerializer).toString();if((isFileList2=utils$1.isFileList(data))||contentType.indexOf("multipart/form-data")>-1){const _FormData=this.env&&this.env.FormData;return toFormData$1(isFileList2?{"files[]":data}:data,_FormData&&new _FormData,this.formSerializer)}}return isObjectPayload||hasJSONContentType?(headers.setContentType("application/json",!1),stringifySafely(data)):data}],transformResponse:[function(data){const transitional2=this.transitional||defaults.transitional,forcedJSONParsing=transitional2&&transitional2.forcedJSONParsing,JSONRequested=this.responseType==="json";if(utils$1.isResponse(data)||utils$1.isReadableStream(data))return data;if(data&&utils$1.isString(data)&&(forcedJSONParsing&&!this.responseType||JSONRequested)){const strictJSONParsing=!(transitional2&&transitional2.silentJSONParsing)&&JSONRequested;try{return JSON.parse(data,this.parseReviver)}catch(e){if(strictJSONParsing)throw e.name==="SyntaxError"?AxiosError$1.from(e,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):e}}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(status){return status>=200&&status<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],method=>{defaults.headers[method]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=rawHeaders=>{const parsed={};let key,val,i;return rawHeaders&&rawHeaders.split(`
`).forEach(function(line){i=line.indexOf(":"),key=line.substring(0,i).trim().toLowerCase(),val=line.substring(i+1).trim(),!(!key||parsed[key]&&ignoreDuplicateOf[key])&&(key==="set-cookie"?parsed[key]?parsed[key].push(val):parsed[key]=[val]:parsed[key]=parsed[key]?parsed[key]+", "+val:val)}),parsed},$internals=Symbol("internals");function normalizeHeader(header){return header&&String(header).trim().toLowerCase()}function normalizeValue(value){return value===!1||value==null?value:utils$1.isArray(value)?value.map(normalizeValue):String(value)}function parseTokens(str){const tokens=Object.create(null),tokensRE=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let match;for(;match=tokensRE.exec(str);)tokens[match[1]]=match[2];return tokens}const isValidHeaderName=str=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());function matchHeaderValue(context,value,header,filter3,isHeaderNameFilter){if(utils$1.isFunction(filter3))return filter3.call(this,value,header);if(isHeaderNameFilter&&(value=header),!!utils$1.isString(value)){if(utils$1.isString(filter3))return value.indexOf(filter3)!==-1;if(utils$1.isRegExp(filter3))return filter3.test(value)}}function formatHeader(header){return header.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(w,char,str)=>char.toUpperCase()+str)}function buildAccessors(obj,header){const accessorName=utils$1.toCamelCase(" "+header);["get","set","has"].forEach(methodName=>{Object.defineProperty(obj,methodName+accessorName,{value:function(arg1,arg2,arg3){return this[methodName].call(this,header,arg1,arg2,arg3)},configurable:!0})})}let AxiosHeaders$1=class{constructor(headers){headers&&this.set(headers)}set(header,valueOrRewrite,rewrite){const self2=this;function setHeader(_value,_header,_rewrite){const lHeader=normalizeHeader(_header);if(!lHeader)throw new Error("header name must be a non-empty string");const key=utils$1.findKey(self2,lHeader);(!key||self2[key]===void 0||_rewrite===!0||_rewrite===void 0&&self2[key]!==!1)&&(self2[key||_header]=normalizeValue(_value))}const setHeaders=(headers,_rewrite)=>utils$1.forEach(headers,(_value,_header)=>setHeader(_value,_header,_rewrite));if(utils$1.isPlainObject(header)||header instanceof this.constructor)setHeaders(header,valueOrRewrite);else if(utils$1.isString(header)&&(header=header.trim())&&!isValidHeaderName(header))setHeaders(parseHeaders(header),valueOrRewrite);else if(utils$1.isObject(header)&&utils$1.isIterable(header)){let obj={},dest,key;for(const entry of header){if(!utils$1.isArray(entry))throw TypeError("Object iterator must return a key-value pair");obj[key=entry[0]]=(dest=obj[key])?utils$1.isArray(dest)?[...dest,entry[1]]:[dest,entry[1]]:entry[1]}setHeaders(obj,valueOrRewrite)}else header!=null&&setHeader(valueOrRewrite,header,rewrite);return this}get(header,parser){if(header=normalizeHeader(header),header){const key=utils$1.findKey(this,header);if(key){const value=this[key];if(!parser)return value;if(parser===!0)return parseTokens(value);if(utils$1.isFunction(parser))return parser.call(this,value,key);if(utils$1.isRegExp(parser))return parser.exec(value);throw new TypeError("parser must be boolean|regexp|function")}}}has(header,matcher){if(header=normalizeHeader(header),header){const key=utils$1.findKey(this,header);return!!(key&&this[key]!==void 0&&(!matcher||matchHeaderValue(this,this[key],key,matcher)))}return!1}delete(header,matcher){const self2=this;let deleted=!1;function deleteHeader(_header){if(_header=normalizeHeader(_header),_header){const key=utils$1.findKey(self2,_header);key&&(!matcher||matchHeaderValue(self2,self2[key],key,matcher))&&(delete self2[key],deleted=!0)}}return utils$1.isArray(header)?header.forEach(deleteHeader):deleteHeader(header),deleted}clear(matcher){const keys=Object.keys(this);let i=keys.length,deleted=!1;for(;i--;){const key=keys[i];(!matcher||matchHeaderValue(this,this[key],key,matcher,!0))&&(delete this[key],deleted=!0)}return deleted}normalize(format){const self2=this,headers={};return utils$1.forEach(this,(value,header)=>{const key=utils$1.findKey(headers,header);if(key){self2[key]=normalizeValue(value),delete self2[header];return}const normalized=format?formatHeader(header):String(header).trim();normalized!==header&&delete self2[header],self2[normalized]=normalizeValue(value),headers[normalized]=!0}),this}concat(...targets){return this.constructor.concat(this,...targets)}toJSON(asStrings){const obj=Object.create(null);return utils$1.forEach(this,(value,header)=>{value!=null&&value!==!1&&(obj[header]=asStrings&&utils$1.isArray(value)?value.join(", "):value)}),obj}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([header,value])=>header+": "+value).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(thing){return thing instanceof this?thing:new this(thing)}static concat(first,...targets){const computed=new this(first);return targets.forEach(target=>computed.set(target)),computed}static accessor(header){const accessors=(this[$internals]=this[$internals]={accessors:{}}).accessors,prototype2=this.prototype;function defineAccessor(_header){const lHeader=normalizeHeader(_header);accessors[lHeader]||(buildAccessors(prototype2,_header),accessors[lHeader]=!0)}return utils$1.isArray(header)?header.forEach(defineAccessor):defineAccessor(header),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value},key)=>{let mapped=key[0].toUpperCase()+key.slice(1);return{get:()=>value,set(headerValue){this[mapped]=headerValue}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(fns,response){const config=this||defaults,context=response||config,headers=AxiosHeaders$1.from(context.headers);let data=context.data;return utils$1.forEach(fns,function(fn){data=fn.call(config,data,headers.normalize(),response?response.status:void 0)}),headers.normalize(),data}function isCancel$1(value){return!!(value&&value.__CANCEL__)}function CanceledError$1(message,config,request){AxiosError$1.call(this,message??"canceled",AxiosError$1.ERR_CANCELED,config,request),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(resolve,reject,response){const validateStatus2=response.config.validateStatus;!response.status||!validateStatus2||validateStatus2(response.status)?resolve(response):reject(new AxiosError$1("Request failed with status code "+response.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(response.status/100)-4],response.config,response.request,response))}function parseProtocol(url){const match=/^([-+\w]{1,25})(:?\/\/|:)/.exec(url);return match&&match[1]||""}function speedometer(samplesCount,min){samplesCount=samplesCount||10;const bytes=new Array(samplesCount),timestamps=new Array(samplesCount);let head=0,tail=0,firstSampleTS;return min=min!==void 0?min:1e3,function(chunkLength){const now=Date.now(),startedAt=timestamps[tail];firstSampleTS||(firstSampleTS=now),bytes[head]=chunkLength,timestamps[head]=now;let i=tail,bytesCount=0;for(;i!==head;)bytesCount+=bytes[i++],i=i%samplesCount;if(head=(head+1)%samplesCount,head===tail&&(tail=(tail+1)%samplesCount),now-firstSampleTS<min)return;const passed=startedAt&&now-startedAt;return passed?Math.round(bytesCount*1e3/passed):void 0}}function throttle(fn,freq){let timestamp=0,threshold=1e3/freq,lastArgs,timer;const invoke=(args,now=Date.now())=>{timestamp=now,lastArgs=null,timer&&(clearTimeout(timer),timer=null),fn(...args)};return[(...args)=>{const now=Date.now(),passed=now-timestamp;passed>=threshold?invoke(args,now):(lastArgs=args,timer||(timer=setTimeout(()=>{timer=null,invoke(lastArgs)},threshold-passed)))},()=>lastArgs&&invoke(lastArgs)]}const progressEventReducer=(listener,isDownloadStream,freq=3)=>{let bytesNotified=0;const _speedometer=speedometer(50,250);return throttle(e=>{const loaded=e.loaded,total=e.lengthComputable?e.total:void 0,progressBytes=loaded-bytesNotified,rate=_speedometer(progressBytes),inRange=loaded<=total;bytesNotified=loaded;const data={loaded,total,progress:total?loaded/total:void 0,bytes:progressBytes,rate:rate||void 0,estimated:rate&&total&&inRange?(total-loaded)/rate:void 0,event:e,lengthComputable:total!=null,[isDownloadStream?"download":"upload"]:!0};listener(data)},freq)},progressEventDecorator=(total,throttled)=>{const lengthComputable=total!=null;return[loaded=>throttled[0]({lengthComputable,total,loaded}),throttled[1]]},asyncDecorator=fn=>(...args)=>utils$1.asap(()=>fn(...args)),isURLSameOrigin=platform.hasStandardBrowserEnv?((origin2,isMSIE)=>url=>(url=new URL(url,platform.origin),origin2.protocol===url.protocol&&origin2.host===url.host&&(isMSIE||origin2.port===url.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(name2,value,expires,path,domain,secure){const cookie=[name2+"="+encodeURIComponent(value)];utils$1.isNumber(expires)&&cookie.push("expires="+new Date(expires).toGMTString()),utils$1.isString(path)&&cookie.push("path="+path),utils$1.isString(domain)&&cookie.push("domain="+domain),secure===!0&&cookie.push("secure"),document.cookie=cookie.join("; ")},read(name2){const match=document.cookie.match(new RegExp("(^|;\\s*)("+name2+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove(name2){this.write(name2,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(url){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(url)}function combineURLs(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/?\/$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}function buildFullPath(baseURL,requestedURL,allowAbsoluteUrls){let isRelativeUrl=!isAbsoluteURL(requestedURL);return baseURL&&(isRelativeUrl||allowAbsoluteUrls==!1)?combineURLs(baseURL,requestedURL):requestedURL}const headersToObject=thing=>thing instanceof AxiosHeaders$1?{...thing}:thing;function mergeConfig$1(config1,config2){config2=config2||{};const config={};function getMergedValue(target,source,prop,caseless){return utils$1.isPlainObject(target)&&utils$1.isPlainObject(source)?utils$1.merge.call({caseless},target,source):utils$1.isPlainObject(source)?utils$1.merge({},source):utils$1.isArray(source)?source.slice():source}function mergeDeepProperties(a,b,prop,caseless){if(utils$1.isUndefined(b)){if(!utils$1.isUndefined(a))return getMergedValue(void 0,a,prop,caseless)}else return getMergedValue(a,b,prop,caseless)}function valueFromConfig2(a,b){if(!utils$1.isUndefined(b))return getMergedValue(void 0,b)}function defaultToConfig2(a,b){if(utils$1.isUndefined(b)){if(!utils$1.isUndefined(a))return getMergedValue(void 0,a)}else return getMergedValue(void 0,b)}function mergeDirectKeys(a,b,prop){if(prop in config2)return getMergedValue(a,b);if(prop in config1)return getMergedValue(void 0,a)}const mergeMap={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,withXSRFToken:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,beforeRedirect:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys,headers:(a,b,prop)=>mergeDeepProperties(headersToObject(a),headersToObject(b),prop,!0)};return utils$1.forEach(Object.keys({...config1,...config2}),function(prop){const merge2=mergeMap[prop]||mergeDeepProperties,configValue=merge2(config1[prop],config2[prop],prop);utils$1.isUndefined(configValue)&&merge2!==mergeDirectKeys||(config[prop]=configValue)}),config}const resolveConfig=config=>{const newConfig=mergeConfig$1({},config);let{data,withXSRFToken,xsrfHeaderName,xsrfCookieName,headers,auth:auth2}=newConfig;if(newConfig.headers=headers=AxiosHeaders$1.from(headers),newConfig.url=buildURL(buildFullPath(newConfig.baseURL,newConfig.url,newConfig.allowAbsoluteUrls),config.params,config.paramsSerializer),auth2&&headers.set("Authorization","Basic "+btoa((auth2.username||"")+":"+(auth2.password?unescape(encodeURIComponent(auth2.password)):""))),utils$1.isFormData(data)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)headers.setContentType(void 0);else if(utils$1.isFunction(data.getHeaders)){const formHeaders=data.getHeaders(),allowedHeaders=["content-type","content-length"];Object.entries(formHeaders).forEach(([key,val])=>{allowedHeaders.includes(key.toLowerCase())&&headers.set(key,val)})}}if(platform.hasStandardBrowserEnv&&(withXSRFToken&&utils$1.isFunction(withXSRFToken)&&(withXSRFToken=withXSRFToken(newConfig)),withXSRFToken||withXSRFToken!==!1&&isURLSameOrigin(newConfig.url))){const xsrfValue=xsrfHeaderName&&xsrfCookieName&&cookies.read(xsrfCookieName);xsrfValue&&headers.set(xsrfHeaderName,xsrfValue)}return newConfig},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(config){return new Promise(function(resolve,reject){const _config=resolveConfig(config);let requestData=_config.data;const requestHeaders=AxiosHeaders$1.from(_config.headers).normalize();let{responseType,onUploadProgress,onDownloadProgress}=_config,onCanceled,uploadThrottled,downloadThrottled,flushUpload,flushDownload;function done(){flushUpload&&flushUpload(),flushDownload&&flushDownload(),_config.cancelToken&&_config.cancelToken.unsubscribe(onCanceled),_config.signal&&_config.signal.removeEventListener("abort",onCanceled)}let request=new XMLHttpRequest;request.open(_config.method.toUpperCase(),_config.url,!0),request.timeout=_config.timeout;function onloadend(){if(!request)return;const responseHeaders=AxiosHeaders$1.from("getAllResponseHeaders"in request&&request.getAllResponseHeaders()),response={data:!responseType||responseType==="text"||responseType==="json"?request.responseText:request.response,status:request.status,statusText:request.statusText,headers:responseHeaders,config,request};settle(function(value){resolve(value),done()},function(err){reject(err),done()},response),request=null}"onloadend"in request?request.onloadend=onloadend:request.onreadystatechange=function(){!request||request.readyState!==4||request.status===0&&!(request.responseURL&&request.responseURL.indexOf("file:")===0)||setTimeout(onloadend)},request.onabort=function(){request&&(reject(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,config,request)),request=null)},request.onerror=function(event){const msg=event&&event.message?event.message:"Network Error",err=new AxiosError$1(msg,AxiosError$1.ERR_NETWORK,config,request);err.event=event||null,reject(err),request=null},request.ontimeout=function(){let timeoutErrorMessage=_config.timeout?"timeout of "+_config.timeout+"ms exceeded":"timeout exceeded";const transitional2=_config.transitional||transitionalDefaults;_config.timeoutErrorMessage&&(timeoutErrorMessage=_config.timeoutErrorMessage),reject(new AxiosError$1(timeoutErrorMessage,transitional2.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,config,request)),request=null},requestData===void 0&&requestHeaders.setContentType(null),"setRequestHeader"in request&&utils$1.forEach(requestHeaders.toJSON(),function(val,key){request.setRequestHeader(key,val)}),utils$1.isUndefined(_config.withCredentials)||(request.withCredentials=!!_config.withCredentials),responseType&&responseType!=="json"&&(request.responseType=_config.responseType),onDownloadProgress&&([downloadThrottled,flushDownload]=progressEventReducer(onDownloadProgress,!0),request.addEventListener("progress",downloadThrottled)),onUploadProgress&&request.upload&&([uploadThrottled,flushUpload]=progressEventReducer(onUploadProgress),request.upload.addEventListener("progress",uploadThrottled),request.upload.addEventListener("loadend",flushUpload)),(_config.cancelToken||_config.signal)&&(onCanceled=cancel=>{request&&(reject(!cancel||cancel.type?new CanceledError$1(null,config,request):cancel),request.abort(),request=null)},_config.cancelToken&&_config.cancelToken.subscribe(onCanceled),_config.signal&&(_config.signal.aborted?onCanceled():_config.signal.addEventListener("abort",onCanceled)));const protocol=parseProtocol(_config.url);if(protocol&&platform.protocols.indexOf(protocol)===-1){reject(new AxiosError$1("Unsupported protocol "+protocol+":",AxiosError$1.ERR_BAD_REQUEST,config));return}request.send(requestData||null)})},composeSignals=(signals,timeout)=>{const{length}=signals=signals?signals.filter(Boolean):[];if(timeout||length){let controller=new AbortController,aborted;const onabort=function(reason){if(!aborted){aborted=!0,unsubscribe();const err=reason instanceof Error?reason:this.reason;controller.abort(err instanceof AxiosError$1?err:new CanceledError$1(err instanceof Error?err.message:err))}};let timer=timeout&&setTimeout(()=>{timer=null,onabort(new AxiosError$1(`timeout ${timeout} of ms exceeded`,AxiosError$1.ETIMEDOUT))},timeout);const unsubscribe=()=>{signals&&(timer&&clearTimeout(timer),timer=null,signals.forEach(signal2=>{signal2.unsubscribe?signal2.unsubscribe(onabort):signal2.removeEventListener("abort",onabort)}),signals=null)};signals.forEach(signal2=>signal2.addEventListener("abort",onabort));const{signal}=controller;return signal.unsubscribe=()=>utils$1.asap(unsubscribe),signal}},streamChunk=function*(chunk,chunkSize){let len=chunk.byteLength;if(len<chunkSize){yield chunk;return}let pos=0,end;for(;pos<len;)end=pos+chunkSize,yield chunk.slice(pos,end),pos=end},readBytes=async function*(iterable,chunkSize){for await(const chunk of readStream(iterable))yield*streamChunk(chunk,chunkSize)},readStream=async function*(stream){if(stream[Symbol.asyncIterator]){yield*stream;return}const reader=stream.getReader();try{for(;;){const{done,value}=await reader.read();if(done)break;yield value}}finally{await reader.cancel()}},trackStream=(stream,chunkSize,onProgress,onFinish)=>{const iterator2=readBytes(stream,chunkSize);let bytes=0,done,_onFinish=e=>{done||(done=!0,onFinish&&onFinish(e))};return new ReadableStream({async pull(controller){try{const{done:done2,value}=await iterator2.next();if(done2){_onFinish(),controller.close();return}let len=value.byteLength;if(onProgress){let loadedBytes=bytes+=len;onProgress(loadedBytes)}controller.enqueue(new Uint8Array(value))}catch(err){throw _onFinish(err),err}},cancel(reason){return _onFinish(reason),iterator2.return()}},{highWaterMark:2})},DEFAULT_CHUNK_SIZE=64*1024,{isFunction}=utils$1,globalFetchAPI=(({Request,Response:Response2})=>({Request,Response:Response2}))(utils$1.global),{ReadableStream:ReadableStream$1,TextEncoder}=utils$1.global,test$1=(fn,...args)=>{try{return!!fn(...args)}catch{return!1}},factory=env=>{env=utils$1.merge.call({skipUndefined:!0},globalFetchAPI,env);const{fetch:envFetch,Request,Response:Response2}=env,isFetchSupported=envFetch?isFunction(envFetch):typeof fetch=="function",isRequestSupported=isFunction(Request),isResponseSupported=isFunction(Response2);if(!isFetchSupported)return!1;const isReadableStreamSupported=isFetchSupported&&isFunction(ReadableStream$1),encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(encoder=>str=>encoder.encode(str))(new TextEncoder):async str=>new Uint8Array(await new Request(str).arrayBuffer())),supportsRequestStream=isRequestSupported&&isReadableStreamSupported&&test$1(()=>{let duplexAccessed=!1;const hasContentType=new Request(platform.origin,{body:new ReadableStream$1,method:"POST",get duplex(){return duplexAccessed=!0,"half"}}).headers.has("Content-Type");return duplexAccessed&&!hasContentType}),supportsResponseStream=isResponseSupported&&isReadableStreamSupported&&test$1(()=>utils$1.isReadableStream(new Response2("").body)),resolvers={stream:supportsResponseStream&&(res=>res.body)};isFetchSupported&&["text","arrayBuffer","blob","formData","stream"].forEach(type=>{!resolvers[type]&&(resolvers[type]=(res,config)=>{let method=res&&res[type];if(method)return method.call(res);throw new AxiosError$1(`Response type '${type}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,config)})});const getBodyLength=async body=>{if(body==null)return 0;if(utils$1.isBlob(body))return body.size;if(utils$1.isSpecCompliantForm(body))return(await new Request(platform.origin,{method:"POST",body}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(body)||utils$1.isArrayBuffer(body))return body.byteLength;if(utils$1.isURLSearchParams(body)&&(body=body+""),utils$1.isString(body))return(await encodeText(body)).byteLength},resolveBodyLength=async(headers,body)=>{const length=utils$1.toFiniteNumber(headers.getContentLength());return length??getBodyLength(body)};return async config=>{let{url,method,data,signal,cancelToken,timeout,onDownloadProgress,onUploadProgress,responseType,headers,withCredentials="same-origin",fetchOptions}=resolveConfig(config),_fetch=envFetch||fetch;responseType=responseType?(responseType+"").toLowerCase():"text";let composedSignal=composeSignals([signal,cancelToken&&cancelToken.toAbortSignal()],timeout),request=null;const unsubscribe=composedSignal&&composedSignal.unsubscribe&&(()=>{composedSignal.unsubscribe()});let requestContentLength;try{if(onUploadProgress&&supportsRequestStream&&method!=="get"&&method!=="head"&&(requestContentLength=await resolveBodyLength(headers,data))!==0){let _request=new Request(url,{method:"POST",body:data,duplex:"half"}),contentTypeHeader;if(utils$1.isFormData(data)&&(contentTypeHeader=_request.headers.get("content-type"))&&headers.setContentType(contentTypeHeader),_request.body){const[onProgress,flush]=progressEventDecorator(requestContentLength,progressEventReducer(asyncDecorator(onUploadProgress)));data=trackStream(_request.body,DEFAULT_CHUNK_SIZE,onProgress,flush)}}utils$1.isString(withCredentials)||(withCredentials=withCredentials?"include":"omit");const isCredentialsSupported=isRequestSupported&&"credentials"in Request.prototype,resolvedOptions={...fetchOptions,signal:composedSignal,method:method.toUpperCase(),headers:headers.normalize().toJSON(),body:data,duplex:"half",credentials:isCredentialsSupported?withCredentials:void 0};request=isRequestSupported&&new Request(url,resolvedOptions);let response=await(isRequestSupported?_fetch(request,fetchOptions):_fetch(url,resolvedOptions));const isStreamResponse=supportsResponseStream&&(responseType==="stream"||responseType==="response");if(supportsResponseStream&&(onDownloadProgress||isStreamResponse&&unsubscribe)){const options={};["status","statusText","headers"].forEach(prop=>{options[prop]=response[prop]});const responseContentLength=utils$1.toFiniteNumber(response.headers.get("content-length")),[onProgress,flush]=onDownloadProgress&&progressEventDecorator(responseContentLength,progressEventReducer(asyncDecorator(onDownloadProgress),!0))||[];response=new Response2(trackStream(response.body,DEFAULT_CHUNK_SIZE,onProgress,()=>{flush&&flush(),unsubscribe&&unsubscribe()}),options)}responseType=responseType||"text";let responseData=await resolvers[utils$1.findKey(resolvers,responseType)||"text"](response,config);return!isStreamResponse&&unsubscribe&&unsubscribe(),await new Promise((resolve,reject)=>{settle(resolve,reject,{data:responseData,headers:AxiosHeaders$1.from(response.headers),status:response.status,statusText:response.statusText,config,request})})}catch(err){throw unsubscribe&&unsubscribe(),err&&err.name==="TypeError"&&/Load failed|fetch/i.test(err.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,config,request),{cause:err.cause||err}):AxiosError$1.from(err,err&&err.code,config,request)}}},seedCache=new Map,getFetch=config=>{let env=config?config.env:{};const{fetch:fetch2,Request,Response:Response2}=env,seeds=[Request,Response2,fetch2];let len=seeds.length,i=len,seed,target,map=seedCache;for(;i--;)seed=seeds[i],target=map.get(seed),target===void 0&&map.set(seed,target=i?new Map:factory(env)),map=target;return target};getFetch();const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:{get:getFetch}};utils$1.forEach(knownAdapters,(fn,value)=>{if(fn){try{Object.defineProperty(fn,"name",{value})}catch{}Object.defineProperty(fn,"adapterName",{value})}});const renderReason=reason=>`- ${reason}`,isResolvedHandle=adapter=>utils$1.isFunction(adapter)||adapter===null||adapter===!1,adapters={getAdapter:(adapters2,config)=>{adapters2=utils$1.isArray(adapters2)?adapters2:[adapters2];const{length}=adapters2;let nameOrAdapter,adapter;const rejectedReasons={};for(let i=0;i<length;i++){nameOrAdapter=adapters2[i];let id2;if(adapter=nameOrAdapter,!isResolvedHandle(nameOrAdapter)&&(adapter=knownAdapters[(id2=String(nameOrAdapter)).toLowerCase()],adapter===void 0))throw new AxiosError$1(`Unknown adapter '${id2}'`);if(adapter&&(utils$1.isFunction(adapter)||(adapter=adapter.get(config))))break;rejectedReasons[id2||"#"+i]=adapter}if(!adapter){const reasons=Object.entries(rejectedReasons).map(([id2,state])=>`adapter ${id2} `+(state===!1?"is not supported by the environment":"is not available in the build"));let s=length?reasons.length>1?`since :
`+reasons.map(renderReason).join(`
`):" "+renderReason(reasons[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return adapter},adapters:knownAdapters};function throwIfCancellationRequested(config){if(config.cancelToken&&config.cancelToken.throwIfRequested(),config.signal&&config.signal.aborted)throw new CanceledError$1(null,config)}function dispatchRequest(config){return throwIfCancellationRequested(config),config.headers=AxiosHeaders$1.from(config.headers),config.data=transformData.call(config,config.transformRequest),["post","put","patch"].indexOf(config.method)!==-1&&config.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(config.adapter||defaults.adapter,config)(config).then(function(response){return throwIfCancellationRequested(config),response.data=transformData.call(config,config.transformResponse,response),response.headers=AxiosHeaders$1.from(response.headers),response},function(reason){return isCancel$1(reason)||(throwIfCancellationRequested(config),reason&&reason.response&&(reason.response.data=transformData.call(config,config.transformResponse,reason.response),reason.response.headers=AxiosHeaders$1.from(reason.response.headers))),Promise.reject(reason)})}const VERSION$1="1.12.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach((type,i)=>{validators$1[type]=function(thing){return typeof thing===type||"a"+(i<1?"n ":" ")+type}});const deprecatedWarnings={};validators$1.transitional=function(validator2,version2,message){function formatMessage(opt,desc){return"[Axios v"+VERSION$1+"] Transitional option '"+opt+"'"+desc+(message?". "+message:"")}return(value,opt,opts)=>{if(validator2===!1)throw new AxiosError$1(formatMessage(opt," has been removed"+(version2?" in "+version2:"")),AxiosError$1.ERR_DEPRECATED);return version2&&!deprecatedWarnings[opt]&&(deprecatedWarnings[opt]=!0,console.warn(formatMessage(opt," has been deprecated since v"+version2+" and will be removed in the near future"))),validator2?validator2(value,opt,opts):!0}};validators$1.spelling=function(correctSpelling){return(value,opt)=>(console.warn(`${opt} is likely a misspelling of ${correctSpelling}`),!0)};function assertOptions(options,schema,allowUnknown){if(typeof options!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const keys=Object.keys(options);let i=keys.length;for(;i-- >0;){const opt=keys[i],validator2=schema[opt];if(validator2){const value=options[opt],result=value===void 0||validator2(value,opt,options);if(result!==!0)throw new AxiosError$1("option "+opt+" must be "+result,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(allowUnknown!==!0)throw new AxiosError$1("Unknown option "+opt,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(instanceConfig){this.defaults=instanceConfig||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(configOrUrl,config){try{return await this._request(configOrUrl,config)}catch(err){if(err instanceof Error){let dummy={};Error.captureStackTrace?Error.captureStackTrace(dummy):dummy=new Error;const stack=dummy.stack?dummy.stack.replace(/^.+\n/,""):"";try{err.stack?stack&&!String(err.stack).endsWith(stack.replace(/^.+\n.+\n/,""))&&(err.stack+=`
`+stack):err.stack=stack}catch{}}throw err}}_request(configOrUrl,config){typeof configOrUrl=="string"?(config=config||{},config.url=configOrUrl):config=configOrUrl||{},config=mergeConfig$1(this.defaults,config);const{transitional:transitional2,paramsSerializer,headers}=config;transitional2!==void 0&&validator.assertOptions(transitional2,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),paramsSerializer!=null&&(utils$1.isFunction(paramsSerializer)?config.paramsSerializer={serialize:paramsSerializer}:validator.assertOptions(paramsSerializer,{encode:validators.function,serialize:validators.function},!0)),config.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?config.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:config.allowAbsoluteUrls=!0),validator.assertOptions(config,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),config.method=(config.method||this.defaults.method||"get").toLowerCase();let contextHeaders=headers&&utils$1.merge(headers.common,headers[config.method]);headers&&utils$1.forEach(["delete","get","head","post","put","patch","common"],method=>{delete headers[method]}),config.headers=AxiosHeaders$1.concat(contextHeaders,headers);const requestInterceptorChain=[];let synchronousRequestInterceptors=!0;this.interceptors.request.forEach(function(interceptor){typeof interceptor.runWhen=="function"&&interceptor.runWhen(config)===!1||(synchronousRequestInterceptors=synchronousRequestInterceptors&&interceptor.synchronous,requestInterceptorChain.unshift(interceptor.fulfilled,interceptor.rejected))});const responseInterceptorChain=[];this.interceptors.response.forEach(function(interceptor){responseInterceptorChain.push(interceptor.fulfilled,interceptor.rejected)});let promise,i=0,len;if(!synchronousRequestInterceptors){const chain=[dispatchRequest.bind(this),void 0];for(chain.unshift(...requestInterceptorChain),chain.push(...responseInterceptorChain),len=chain.length,promise=Promise.resolve(config);i<len;)promise=promise.then(chain[i++],chain[i++]);return promise}len=requestInterceptorChain.length;let newConfig=config;for(;i<len;){const onFulfilled=requestInterceptorChain[i++],onRejected=requestInterceptorChain[i++];try{newConfig=onFulfilled(newConfig)}catch(error){onRejected.call(this,error);break}}try{promise=dispatchRequest.call(this,newConfig)}catch(error){return Promise.reject(error)}for(i=0,len=responseInterceptorChain.length;i<len;)promise=promise.then(responseInterceptorChain[i++],responseInterceptorChain[i++]);return promise}getUri(config){config=mergeConfig$1(this.defaults,config);const fullPath=buildFullPath(config.baseURL,config.url,config.allowAbsoluteUrls);return buildURL(fullPath,config.params,config.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(method){Axios$1.prototype[method]=function(url,config){return this.request(mergeConfig$1(config||{},{method,url,data:(config||{}).data}))}});utils$1.forEach(["post","put","patch"],function(method){function generateHTTPMethod(isForm){return function(url,data,config){return this.request(mergeConfig$1(config||{},{method,headers:isForm?{"Content-Type":"multipart/form-data"}:{},url,data}))}}Axios$1.prototype[method]=generateHTTPMethod(),Axios$1.prototype[method+"Form"]=generateHTTPMethod(!0)});let CancelToken$1=class CancelToken{constructor(executor){if(typeof executor!="function")throw new TypeError("executor must be a function.");let resolvePromise;this.promise=new Promise(function(resolve){resolvePromise=resolve});const token=this;this.promise.then(cancel=>{if(!token._listeners)return;let i=token._listeners.length;for(;i-- >0;)token._listeners[i](cancel);token._listeners=null}),this.promise.then=onfulfilled=>{let _resolve;const promise=new Promise(resolve=>{token.subscribe(resolve),_resolve=resolve}).then(onfulfilled);return promise.cancel=function(){token.unsubscribe(_resolve)},promise},executor(function(message,config,request){token.reason||(token.reason=new CanceledError$1(message,config,request),resolvePromise(token.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(listener){if(this.reason){listener(this.reason);return}this._listeners?this._listeners.push(listener):this._listeners=[listener]}unsubscribe(listener){if(!this._listeners)return;const index=this._listeners.indexOf(listener);index!==-1&&this._listeners.splice(index,1)}toAbortSignal(){const controller=new AbortController,abort=err=>{controller.abort(err)};return this.subscribe(abort),controller.signal.unsubscribe=()=>this.unsubscribe(abort),controller.signal}static source(){let cancel;return{token:new CancelToken(function(c){cancel=c}),cancel}}};function spread$1(callback){return function(arr){return callback.apply(null,arr)}}function isAxiosError$1(payload){return utils$1.isObject(payload)&&payload.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([key,value])=>{HttpStatusCode$1[value]=key});function createInstance(defaultConfig){const context=new Axios$1(defaultConfig),instance=bind(Axios$1.prototype.request,context);return utils$1.extend(instance,Axios$1.prototype,context,{allOwnKeys:!0}),utils$1.extend(instance,context,null,{allOwnKeys:!0}),instance.create=function(instanceConfig){return createInstance(mergeConfig$1(defaultConfig,instanceConfig))},instance}const axios=createInstance(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$1;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(promises){return Promise.all(promises)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=thing=>formDataToJSON(utils$1.isHTMLForm(thing)?new FormData(thing):thing);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios:Axios2,AxiosError,CanceledError,isCancel,CancelToken:CancelToken2,VERSION,all:all2,Cancel,isAxiosError,spread,toFormData,AxiosHeaders:AxiosHeaders2,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,getApiBaseUrl=()=>"https://safarbot-n24f.onrender.com",getWebSocketUrl=(path="")=>{const baseUrl=getApiBaseUrl();return baseUrl.startsWith("https://")?`wss://${baseUrl.replace("https://","")}${path}`:baseUrl.startsWith("http://")?`ws://${baseUrl.replace("http://","")}${path}`:`${baseUrl}${path}`},API_BASE_URL=getApiBaseUrl(),api=axios.create({baseURL:API_BASE_URL,timeout:3e4,headers:{"Content-Type":"application/json"}});api.interceptors.request.use(config=>{config.url&&(config.url="/"+config.url.replace(/^\/+/,""),config.url=config.url.replace(/([^:]\/)\/+/g,"$1"));const token=localStorage.getItem("accessToken");return token&&(config.headers.Authorization=`Bearer ${token}`),config},error=>(console.error("API Request Error:",error),Promise.reject(error)));api.interceptors.response.use(response=>response,async error=>{var _a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u;const isAuthEndpoint=((_b=(_a=error.config)==null?void 0:_a.url)==null?void 0:_b.includes("/auth/login"))||((_d=(_c=error.config)==null?void 0:_c.url)==null?void 0:_d.includes("/auth/signup"))||((_f=(_e=error.config)==null?void 0:_e.url)==null?void 0:_f.includes("/auth/forgot-password"))||((_h=(_g=error.config)==null?void 0:_g.url)==null?void 0:_h.includes("/auth/reset-password"));if(((_i=error.response)==null?void 0:_i.status)===401&&!error.config._retry&&!isAuthEndpoint){error.config._retry=!0;const refreshToken=localStorage.getItem("refreshToken");if(refreshToken)try{const response=await authAPI$1.refreshToken(refreshToken);return localStorage.setItem("accessToken",response.access_token),localStorage.setItem("refreshToken",response.refresh_token),error.config.headers.Authorization=`Bearer ${response.access_token}`,api(error.config)}catch(refreshError){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken");const state={from:window.location.pathname+window.location.search,message:"Session expired. Please log in again.",timestamp:Date.now()};return sessionStorage.setItem("authRedirect",JSON.stringify(state)),window.location.href="/login",Promise.reject(refreshError)}else{const state={from:window.location.pathname+window.location.search,message:"Please log in to continue",timestamp:Date.now()};sessionStorage.setItem("authRedirect",JSON.stringify(state)),window.location.href="/login"}}const errorMessage=((_k=(_j=error.response)==null?void 0:_j.data)==null?void 0:_k.detail)||((_m=(_l=error.response)==null?void 0:_l.data)==null?void 0:_m.message)||error.message||"An error occurred";return((_n=error.response)==null?void 0:_n.status)===401&&!isAuthEndpoint?error.userMessage="Session expired. Please log in again.":((_o=error.response)==null?void 0:_o.status)===401&&isAuthEndpoint?error.userMessage=errorMessage:((_p=error.response)==null?void 0:_p.status)===403?error.userMessage="Access denied. Please check your credentials.":((_q=error.response)==null?void 0:_q.status)===404?error.userMessage="Service not found. Please check your connection.":((_r=error.response)==null?void 0:_r.status)===409?error.userMessage="An account with this email already exists.":((_s=error.response)==null?void 0:_s.status)===422?error.userMessage="Please check your input and try again.":((_t=error.response)==null?void 0:_t.status)===500?error.userMessage="Server error. Please try again later.":error.code==="ECONNABORTED"||(_u=error.message)!=null&&_u.includes("timeout")?error.userMessage="Request timed out. The server is taking longer than expected. Please try again.":error.response?error.userMessage=errorMessage:error.userMessage="Network error. Please check your connection.",Promise.reject(error)});const authAPI$1={login:async data=>(await api.post("/auth/login",data)).data,signup:async data=>(await api.post("/auth/signup",data)).data,refreshToken:async refreshToken=>(await api.post("/auth/refresh",{refresh_token:refreshToken})).data,forgotPassword:async email=>(await api.post("/auth/forgot-password",{email})).data,resetPassword:async data=>(await api.post("/auth/reset-password",data)).data,logout:async()=>(await api.post("/auth/logout")).data,getCurrentUser:async()=>(await api.get("/auth/me")).data,getProfile:async()=>(await api.get("/auth/me")).data,updateProfile:async data=>(await api.put("/auth/me",data)).data,changePassword:async data=>(await api.post("/auth/change-password",data)).data,sendVerificationOTP:async email=>(await api.post("/auth/send-verification-otp",{email})).data,verifyOTP:async data=>(await api.post("/auth/verify-otp",data)).data,resendOTP:async email=>(await api.post("/auth/resend-otp",{email})).data},itineraryAPI={generateEnhancedItinerary:async(data,options)=>(await api.post("/itinerary/generate-itinerary-complete",data,{signal:options==null?void 0:options.signal,timeout:18e4})).data,generateItinerary:async(data,options)=>(await api.post("/itinerary/generate-itinerary",data,{signal:options==null?void 0:options.signal,timeout:18e4})).data,placeById:async(place_id,gl)=>(await api.get("/itinerary/places/by-id",{params:{place_id,gl}})).data,predictPrices:async data=>(await api.post("/itinerary/predict-prices",data)).data,getItinerary:async id2=>(await api.get(`/itinerary/${id2}`)).data,updateItinerary:async(id2,data)=>(await api.put(`/itinerary/${id2}`,data)).data,deleteItinerary:async id2=>(await api.delete(`/itinerary/${id2}`)).data},savedItineraryAPI$1={getItineraries:async params=>(await api.get("/itineraries",{params})).data,getItinerary:async itineraryId=>(await api.get(`/itineraries/${itineraryId}`)).data,createItinerary:async itineraryData=>(await api.post("/itineraries",itineraryData)).data,updateItinerary:async(itineraryId,updateData)=>(await api.put(`/itineraries/${itineraryId}`,updateData)).data,deleteItinerary:async itineraryId=>(await api.delete(`/itineraries/${itineraryId}`)).data,toggleFavorite:async itineraryId=>(await api.post(`/itineraries/${itineraryId}/favorite`)).data,discoverItineraries:async params=>(await api.get("/itineraries/public/discover",{params})).data,getItineraryStats:async()=>(await api.get("/itineraries/stats/summary")).data,shareItinerary:async itineraryId=>(await api.post(`/itineraries/${itineraryId}/share`)).data,getPublicItinerary:async shareToken=>(await api.get(`/itineraries/public/${shareToken}`)).data,saveItinerary:async data=>savedItineraryAPI$1.createItinerary(data),favoriteItinerary:async id2=>savedItineraryAPI$1.toggleFavorite(id2),unfavoriteItinerary:async id2=>savedItineraryAPI$1.toggleFavorite(id2)},dashboardAPI$1={getDashboardData:async()=>(await api.get("/dashboard")).data,getStats:async()=>(await api.get("/dashboard/stats")).data,getRecentBookings:async(limit=10)=>(await api.get("/dashboard/bookings",{params:{limit}})).data,getUpcomingTrips:async(limit=5)=>(await api.get("/dashboard/trips",{params:{limit}})).data,getSavedItineraries:async(limit=10)=>(await api.get("/dashboard/saved-itineraries",{params:{limit}})).data,getPriceAlerts:async()=>(await api.get("/dashboard/price-alerts")).data,getNotifications:async(limit=20)=>(await api.get("/dashboard/notifications",{params:{limit}})).data,getTravelAnalytics:async()=>(await api.get("/dashboard/analytics")).data,getSessionAnalytics:async()=>(await api.get("/dashboard/sessions")).data,getPreferences:async()=>(await api.get("/dashboard/preferences")).data,updatePreferences:async preferences=>(await api.put("/dashboard/preferences",preferences)).data,getActiveSessions:async()=>(await api.get("/dashboard/sessions")).data,revokeSession:async sessionId=>(await api.delete(`/dashboard/sessions/${sessionId}`)).data,revokeAllSessions:async()=>(await api.delete("/dashboard/sessions")).data},notificationsAPI={getNotifications:async(limit=50,offset=0)=>(await api.get("/notifications",{params:{limit,offset}})).data,markAsRead:async id2=>(await api.put(`/notifications/${id2}/read`)).data,markAllAsRead:async()=>(await api.put("/notifications/read-all")).data,deleteNotification:async id2=>(await api.delete(`/notifications/${id2}`)).data,getNotificationCount:async()=>(await api.get("/notifications/count")).data},weatherAPI$1={getWeather:async location2=>(await api.get("/weather",{params:{location:location2}})).data,getCurrentWeather:async(city,country_code)=>(await api.get("/weather/current",{params:{city,country_code}})).data,getWeatherForecast:async(city,country_code,days=5)=>(await api.get("/weather/forecast",{params:{city,country_code,days}})).data,getWeatherByCoordinates:async(lat,lon)=>(await api.get("/weather/coordinates",{params:{lat,lon}})).data,getWeatherForItinerary:async(city,country_code)=>(await api.get("/weather/itinerary-format",{params:{city,country_code}})).data},flightAPI={searchFlights:async data=>(await api.post("/flights/search",data)).data,getPopularFlights:async()=>(await api.get("/flights/popular")).data,getFlightDetails:async flightId=>(await api.get(`/flights/${flightId}`)).data,bookFlight:async(flightId,passengers=1)=>(await api.post("/flights/book",{flight_id:flightId,passengers})).data,getAirportSuggestions:async query=>(await api.get("/flights/airports/suggestions",{params:{query}})).data,getBookingOptions:async bookingToken=>(await api.get(`/flights/booking-options/${bookingToken}`)).data},collaborationAPI={inviteCollaborator:async data=>(await api.post("/collaboration/invite",data)).data,getInvitations:async()=>(await api.get("/collaboration/invitations")).data,getInvitationInfo:async invitationToken=>(await api.get(`/collaboration/invitation/${invitationToken}/info`)).data,acceptInvitation:async invitationToken=>(await api.post(`/collaboration/invitation/${invitationToken}/accept`)).data,declineInvitation:async invitationToken=>(await api.post(`/collaboration/invitation/${invitationToken}/decline`)).data,getCollaborators:async itineraryId=>(await api.get(`/collaboration/itinerary/${itineraryId}/collaborators`)).data,removeCollaborator:async(itineraryId,userId)=>(await api.delete(`/collaboration/itinerary/${itineraryId}/collaborator/${userId}`)).data,updateCollaboratorRole:async(itineraryId,userId,role)=>(await api.put(`/collaboration/itinerary/${itineraryId}/collaborator/${userId}/role`,{role})).data,resendInvitation:async data=>(await api.post("/collaboration/resend-invitation",data)).data,getMyCollaborations:async()=>(await api.get("/collaboration/my-collaborations")).data,getRoomStatus:async itineraryId=>(await api.get(`/collaboration/room/status/${itineraryId}`)).data,createRoom:async data=>(await api.post("/collaboration/room/create",data)).data,joinRoom:async roomId=>(await api.post(`/collaboration/room/${roomId}/join`)).data,getRoomInfo:async roomId=>(await api.get(`/collaboration/room/${roomId}/info`)).data},api$1=Object.freeze(Object.defineProperty({__proto__:null,authAPI:authAPI$1,collaborationAPI,dashboardAPI:dashboardAPI$1,default:api,flightAPI,itineraryAPI,notificationsAPI,savedItineraryAPI:savedItineraryAPI$1,weatherAPI:weatherAPI$1},Symbol.toStringTag,{value:"Module"}));class CacheService{constructor(config={}){__publicField(this,"memoryCache",new Map);__publicField(this,"config");__publicField(this,"pendingRequests",new Map);this.config={defaultTTL:config.defaultTTL||5*60*1e3,maxSize:config.maxSize||1e3,enableMemoryCache:config.enableMemoryCache!==!1,enableLocalStorage:config.enableLocalStorage||!1,enableSessionStorage:config.enableSessionStorage||!1}}generateKey(endpoint,params){const baseKey=endpoint;if(!params||Object.keys(params).length===0)return baseKey;const sortedParams=Object.keys(params).sort().reduce((result,key)=>(result[key]=params[key],result),{});return`${baseKey}:${JSON.stringify(sortedParams)}`}isValid(entry){return Date.now()-entry.timestamp<entry.ttl}getFromCache(key){if(this.config.enableMemoryCache){const memoryEntry=this.memoryCache.get(key);if(memoryEntry&&this.isValid(memoryEntry))return memoryEntry.data}if(this.config.enableSessionStorage)try{const sessionEntry=sessionStorage.getItem(`cache_${key}`);if(sessionEntry){const entry=JSON.parse(sessionEntry);if(this.isValid(entry))return this.config.enableMemoryCache&&this.memoryCache.set(key,entry),entry.data}}catch(error){console.warn("Failed to read from sessionStorage cache:",error)}if(this.config.enableLocalStorage)try{const localEntry=localStorage.getItem(`cache_${key}`);if(localEntry){const entry=JSON.parse(localEntry);if(this.isValid(entry))return this.config.enableMemoryCache&&this.memoryCache.set(key,entry),entry.data}}catch(error){console.warn("Failed to read from localStorage cache:",error)}return null}setCache(key,data,ttl){const entry={data,timestamp:Date.now(),ttl:ttl||this.config.defaultTTL,key};if(this.config.enableMemoryCache){if(this.memoryCache.size>=this.config.maxSize){const firstKey=this.memoryCache.keys().next().value;firstKey&&this.memoryCache.delete(firstKey)}this.memoryCache.set(key,entry)}if(this.config.enableSessionStorage)try{sessionStorage.setItem(`cache_${key}`,JSON.stringify(entry))}catch(error){console.warn("Failed to write to sessionStorage cache:",error)}if(this.config.enableLocalStorage)try{localStorage.setItem(`cache_${key}`,JSON.stringify(entry))}catch(error){console.warn("Failed to write to localStorage cache:",error)}}removeFromCache(key){if(this.config.enableMemoryCache&&this.memoryCache.delete(key),this.config.enableSessionStorage)try{sessionStorage.removeItem(`cache_${key}`)}catch(error){console.warn("Failed to remove from sessionStorage cache:",error)}if(this.config.enableLocalStorage)try{localStorage.removeItem(`cache_${key}`)}catch(error){console.warn("Failed to remove from localStorage cache:",error)}}clearCache(){if(this.config.enableMemoryCache&&this.memoryCache.clear(),this.config.enableSessionStorage)try{Object.keys(sessionStorage).forEach(key=>{key.startsWith("cache_")&&sessionStorage.removeItem(key)})}catch(error){console.warn("Failed to clear sessionStorage cache:",error)}if(this.config.enableLocalStorage)try{Object.keys(localStorage).forEach(key=>{key.startsWith("cache_")&&localStorage.removeItem(key)})}catch(error){console.warn("Failed to clear localStorage cache:",error)}}clearCachePattern(pattern){const regex=new RegExp(pattern);if(this.config.enableMemoryCache)for(const key of this.memoryCache.keys())regex.test(key)&&this.memoryCache.delete(key);if(this.config.enableSessionStorage)try{Object.keys(sessionStorage).forEach(key=>{key.startsWith("cache_")&&regex.test(key.replace("cache_",""))&&sessionStorage.removeItem(key)})}catch(error){console.warn("Failed to clear sessionStorage cache pattern:",error)}if(this.config.enableLocalStorage)try{Object.keys(localStorage).forEach(key=>{key.startsWith("cache_")&&regex.test(key.replace("cache_",""))&&localStorage.removeItem(key)})}catch(error){console.warn("Failed to clear localStorage cache pattern:",error)}}getCacheStats(){let sessionStorageSize=0,localStorageSize=0;if(this.config.enableSessionStorage)try{sessionStorageSize=Object.keys(sessionStorage).filter(key=>key.startsWith("cache_")).length}catch(error){console.warn("Failed to get sessionStorage cache size:",error)}if(this.config.enableLocalStorage)try{localStorageSize=Object.keys(localStorage).filter(key=>key.startsWith("cache_")).length}catch(error){console.warn("Failed to get localStorage cache size:",error)}return{memoryCacheSize:this.memoryCache.size,sessionStorageSize,localStorageSize,totalSize:this.memoryCache.size+sessionStorageSize+localStorageSize}}async cachedCall(apiCall,endpoint,params,options){const cacheKey=(options==null?void 0:options.cacheKey)||this.generateKey(endpoint,params);if(this.pendingRequests.has(cacheKey))return this.pendingRequests.get(cacheKey);if(!(options!=null&&options.forceRefresh)){const cachedData=this.getFromCache(cacheKey);if(cachedData!==null)return cachedData}const apiCallPromise=apiCall().then(data=>(this.setCache(cacheKey,data,options==null?void 0:options.ttl),data)).catch(error=>{throw this.pendingRequests.delete(cacheKey),error});return this.pendingRequests.set(cacheKey,apiCallPromise),apiCallPromise.finally(()=>{this.pendingRequests.delete(cacheKey)}),apiCallPromise}invalidateCache(endpoint,params){const key=this.generateKey(endpoint,params);this.removeFromCache(key)}invalidateCachePattern(pattern){this.clearCachePattern(pattern)}}const cacheService=new CacheService({defaultTTL:5*60*1e3,maxSize:1e3,enableMemoryCache:!0,enableSessionStorage:!0,enableLocalStorage:!1}),CACHE_CONFIGS={DASHBOARD:{ttl:2*60*1e3},STATS:{ttl:1*60*1e3},SAVED_ITINERARIES:{ttl:5*60*1e3},USER_PROFILE:{ttl:10*60*1e3},WEATHER:{ttl:10*60*1e3}},savedItineraryAPI={getItineraries:async params=>cacheService.cachedCall(()=>savedItineraryAPI$1.getItineraries(params),"/itineraries",params,CACHE_CONFIGS.SAVED_ITINERARIES),getItinerary:async itineraryId=>cacheService.cachedCall(()=>savedItineraryAPI$1.getItinerary(itineraryId),`/itineraries/${itineraryId}`,{itineraryId},{ttl:10*60*1e3}),createItinerary:async itineraryData=>{const result=await savedItineraryAPI$1.createItinerary(itineraryData);return cacheService.invalidateCachePattern("/itineraries"),result},updateItinerary:async(itineraryId,updateData)=>{const result=await savedItineraryAPI$1.updateItinerary(itineraryId,updateData);return cacheService.invalidateCache(`/itineraries/${itineraryId}`),cacheService.invalidateCachePattern("/itineraries"),result},deleteItinerary:async itineraryId=>{const result=await savedItineraryAPI$1.deleteItinerary(itineraryId);return cacheService.invalidateCache(`/itineraries/${itineraryId}`),cacheService.invalidateCachePattern("/itineraries"),result},toggleFavorite:async itineraryId=>{const result=await savedItineraryAPI$1.toggleFavorite(itineraryId);return cacheService.invalidateCache(`/itineraries/${itineraryId}`),cacheService.invalidateCachePattern("/itineraries"),result},discoverItineraries:async params=>cacheService.cachedCall(()=>savedItineraryAPI$1.discoverItineraries(params),"/itineraries/public/discover",params,{ttl:15*60*1e3}),getItineraryStats:async()=>cacheService.cachedCall(()=>savedItineraryAPI$1.getItineraryStats(),"/itineraries/stats/summary",{},CACHE_CONFIGS.STATS),shareItinerary:async itineraryId=>{const result=await savedItineraryAPI$1.shareItinerary(itineraryId);return cacheService.invalidateCache(`/itineraries/${itineraryId}`),result},getPublicItinerary:async shareToken=>cacheService.cachedCall(()=>savedItineraryAPI$1.getPublicItinerary(shareToken),`/itineraries/public/${shareToken}`,{shareToken},{ttl:30*60*1e3})},dashboardAPI={getDashboardData:async()=>cacheService.cachedCall(()=>dashboardAPI$1.getDashboardData(),"/dashboard/",{},CACHE_CONFIGS.DASHBOARD),getStats:async()=>cacheService.cachedCall(()=>dashboardAPI$1.getStats(),"/dashboard/stats",{},CACHE_CONFIGS.STATS),getRecentBookings:async(limit=10)=>cacheService.cachedCall(()=>dashboardAPI$1.getRecentBookings(limit),"/dashboard/bookings",{limit},CACHE_CONFIGS.DASHBOARD),getUpcomingTrips:async(limit=5)=>cacheService.cachedCall(()=>dashboardAPI$1.getUpcomingTrips(limit),"/dashboard/trips",{limit},CACHE_CONFIGS.DASHBOARD),getSavedItineraries:async(limit=10)=>cacheService.cachedCall(()=>dashboardAPI$1.getSavedItineraries(limit),"/dashboard/saved-itineraries",{limit},CACHE_CONFIGS.SAVED_ITINERARIES),getPriceAlerts:async()=>cacheService.cachedCall(()=>dashboardAPI$1.getPriceAlerts(),"/dashboard/price-alerts",{},CACHE_CONFIGS.DASHBOARD),getNotifications:async(limit=20)=>cacheService.cachedCall(()=>dashboardAPI$1.getNotifications(limit),"/dashboard/notifications",{limit},CACHE_CONFIGS.DASHBOARD),getTravelAnalytics:async()=>cacheService.cachedCall(()=>dashboardAPI$1.getTravelAnalytics(),"/dashboard/analytics",{},{ttl:10*60*1e3}),getSessionAnalytics:async()=>cacheService.cachedCall(()=>dashboardAPI$1.getSessionAnalytics(),"/dashboard/sessions",{},CACHE_CONFIGS.DASHBOARD),getPreferences:async()=>cacheService.cachedCall(()=>dashboardAPI$1.getPreferences(),"/dashboard/preferences",{},CACHE_CONFIGS.USER_PROFILE),updatePreferences:async preferences=>{const result=await dashboardAPI$1.updatePreferences(preferences);return cacheService.invalidateCache("/dashboard/preferences"),result},getActiveSessions:async()=>cacheService.cachedCall(()=>dashboardAPI$1.getActiveSessions(),"/dashboard/sessions",{},CACHE_CONFIGS.DASHBOARD),revokeSession:async sessionId=>{const result=await dashboardAPI$1.revokeSession(sessionId);return cacheService.invalidateCachePattern("/dashboard/sessions"),result},revokeAllSessions:async()=>{const result=await dashboardAPI$1.revokeAllSessions();return cacheService.invalidateCachePattern("/dashboard/sessions"),result}},weatherAPI={getCurrentWeather:async(city,country_code)=>cacheService.cachedCall(()=>weatherAPI$1.getCurrentWeather(city,country_code),"/weather/current",{city,country_code},CACHE_CONFIGS.WEATHER),getWeatherForecast:async(city,country_code,days=5)=>cacheService.cachedCall(()=>weatherAPI$1.getWeatherForecast(city,country_code,days),"/weather/forecast",{city,country_code,days},CACHE_CONFIGS.WEATHER),getWeatherByCoordinates:async(lat,lon)=>cacheService.cachedCall(()=>weatherAPI$1.getWeatherByCoordinates(lat,lon),"/weather/coordinates",{lat,lon},CACHE_CONFIGS.WEATHER),getWeatherForItinerary:async(city,country_code)=>cacheService.cachedCall(()=>weatherAPI$1.getWeatherForItinerary(city,country_code),"/weather/itinerary-format",{city,country_code},CACHE_CONFIGS.WEATHER)},authAPI={login:async data=>{const result=await authAPI$1.login(data);return cacheService.clearCache(),result},signup:async data=>authAPI$1.signup(data),logout:async()=>{const result=await authAPI$1.logout();return cacheService.clearCache(),result},refreshToken:async refresh_token=>authAPI$1.refreshToken(refresh_token),forgotPassword:async email=>authAPI$1.forgotPassword(email),resetPassword:async data=>authAPI$1.resetPassword(data),getProfile:async()=>cacheService.cachedCall(()=>authAPI$1.getProfile(),"/auth/me",{},CACHE_CONFIGS.USER_PROFILE),updateProfile:async data=>{const result=await authAPI$1.updateProfile(data);return cacheService.invalidateCache("/auth/me"),result},changePassword:async data=>authAPI$1.changePassword(data),sendVerificationOTP:async email=>authAPI$1.sendVerificationOTP(email),verifyOTP:async data=>authAPI$1.verifyOTP(data),resendOTP:async email=>authAPI$1.resendOTP(email)},AuthContext=reactExports.createContext(void 0),useAuth=()=>{const context=reactExports.useContext(AuthContext);if(context===void 0)throw new Error("useAuth must be used within an AuthProvider");return context},AuthProvider=({children})=>{const[user,setUser]=reactExports.useState(null),[isLoading,setIsLoading]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{try{const token=localStorage.getItem("accessToken"),refreshToken=localStorage.getItem("refreshToken");if(token)try{const userProfile=await authAPI.getProfile();setUser(userProfile)}catch{if(refreshToken)try{const refreshResponse=await authAPI.refreshToken(refreshToken);localStorage.setItem("accessToken",refreshResponse.access_token),localStorage.setItem("refreshToken",refreshResponse.refresh_token),setUser(refreshResponse.user)}catch{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),setUser(null)}else localStorage.removeItem("accessToken"),setUser(null)}}catch(error){console.error("Auth check failed:",error),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),setUser(null)}finally{setIsLoading(!1)}})()},[]);const value={user,isAuthenticated:!!user,isLoading,login:async(email,password)=>{try{setIsLoading(!0);const response=await authAPI.login({email,password});localStorage.setItem("accessToken",response.access_token),localStorage.setItem("refreshToken",response.refresh_token),setUser(response.user),setTimeout(()=>{__vitePreload(async()=>{const{dashboardAPI:dashboardAPI2,savedItineraryAPI:savedItineraryAPI2}=await Promise.resolve().then(()=>api$1);return{dashboardAPI:dashboardAPI2,savedItineraryAPI:savedItineraryAPI2}},void 0).then(({dashboardAPI:dashboardAPI2,savedItineraryAPI:savedItineraryAPI2})=>{localStorage.getItem("accessToken")&&Promise.allSettled([dashboardAPI2.getDashboardData(),savedItineraryAPI2.getItineraries({limit:20}),savedItineraryAPI2.getItineraryStats()]).catch(()=>{})}).catch(()=>{})},2e3)}catch(error){throw console.error("Login error:",error),new Error(error.message||"Login failed")}finally{setIsLoading(!1)}},setUser,signup:async userData=>{try{setIsLoading(!0);const response=await authAPI.signup(userData);console.log("Signup successful:",response.message)}catch(error){throw console.error("Signup error:",error),new Error(error.message||"Registration failed")}finally{setIsLoading(!1)}},logout:async()=>{try{user&&await authAPI.logout()}catch(error){console.error("Logout error:",error)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),setUser(null)}},updateProfile:async data=>{try{const updatedUser=await authAPI.updateProfile(data);setUser(updatedUser)}catch(error){throw console.error("Profile update error:",error),new Error(error.message||"Profile update failed")}},forgotPassword:async email=>{try{await authAPI.forgotPassword(email)}catch(error){throw console.error("Forgot password error:",error),new Error(error.message||"Password reset request failed")}},resetPassword:async data=>{try{await authAPI.resetPassword(data)}catch(error){throw console.error("Reset password error:",error),new Error(error.message||"Password reset failed")}}};return jsxRuntimeExports.jsx(AuthContext.Provider,{value,children})},MotionConfigContext=reactExports.createContext({transformPagePoint:p2=>p2,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),PresenceContext=reactExports.createContext(null),isBrowser=typeof document<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1}),camelToDash=str=>str.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function useVisualElement(Component2,visualState,props,createVisualElement){const{visualElement:parent}=reactExports.useContext(MotionContext),lazyContext=reactExports.useContext(LazyContext),presenceContext=reactExports.useContext(PresenceContext),reducedMotionConfig=reactExports.useContext(MotionConfigContext).reducedMotion,visualElementRef=reactExports.useRef();createVisualElement=createVisualElement||lazyContext.renderer,!visualElementRef.current&&createVisualElement&&(visualElementRef.current=createVisualElement(Component2,{visualState,parent,props,presenceContext,blockInitialAnimation:presenceContext?presenceContext.initial===!1:!1,reducedMotionConfig}));const visualElement=visualElementRef.current;reactExports.useInsertionEffect(()=>{visualElement&&visualElement.update(props,presenceContext)});const wantsHandoff=reactExports.useRef(!!(props[optimizedAppearDataAttribute]&&!window.HandoffComplete));return useIsomorphicLayoutEffect(()=>{visualElement&&(visualElement.render(),wantsHandoff.current&&visualElement.animationState&&visualElement.animationState.animateChanges())}),reactExports.useEffect(()=>{visualElement&&(visualElement.updateFeatures(),!wantsHandoff.current&&visualElement.animationState&&visualElement.animationState.animateChanges(),wantsHandoff.current&&(wantsHandoff.current=!1,window.HandoffComplete=!0))}),visualElement}function isRefObject(ref){return ref&&typeof ref=="object"&&Object.prototype.hasOwnProperty.call(ref,"current")}function useMotionRef(visualState,visualElement,externalRef){return reactExports.useCallback(instance=>{instance&&visualState.mount&&visualState.mount(instance),visualElement&&(instance?visualElement.mount(instance):visualElement.unmount()),externalRef&&(typeof externalRef=="function"?externalRef(instance):isRefObject(externalRef)&&(externalRef.current=instance))},[visualElement])}function isVariantLabel(v){return typeof v=="string"||Array.isArray(v)}function isAnimationControls(v){return v!==null&&typeof v=="object"&&typeof v.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(props){return isAnimationControls(props.animate)||variantProps.some(name2=>isVariantLabel(props[name2]))}function isVariantNode(props){return!!(isControllingVariants(props)||props.variants)}function getCurrentTreeVariants(props,context){if(isControllingVariants(props)){const{initial,animate}=props;return{initial:initial===!1||isVariantLabel(initial)?initial:void 0,animate:isVariantLabel(animate)?animate:void 0}}return props.inherit!==!1?context:{}}function useCreateMotionContext(props){const{initial,animate}=getCurrentTreeVariants(props,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial,animate}),[variantLabelsAsDependency(initial),variantLabelsAsDependency(animate)])}function variantLabelsAsDependency(prop){return Array.isArray(prop)?prop.join(" "):prop}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const key in featureProps)featureDefinitions[key]={isEnabled:props=>featureProps[key].some(name2=>!!props[name2])};function loadFeatures(features){for(const key in features)featureDefinitions[key]={...featureDefinitions[key],...features[key]}}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function createMotionComponent({preloadedFeatures:preloadedFeatures2,createVisualElement,useRender,useVisualState,Component:Component2}){preloadedFeatures2&&loadFeatures(preloadedFeatures2);function MotionComponent(props,externalRef){let MeasureLayout2;const configAndProps={...reactExports.useContext(MotionConfigContext),...props,layoutId:useLayoutId(props)},{isStatic}=configAndProps,context=useCreateMotionContext(props),visualState=useVisualState(props,isStatic);if(!isStatic&&isBrowser){context.visualElement=useVisualElement(Component2,visualState,configAndProps,createVisualElement);const initialLayoutGroupConfig=reactExports.useContext(SwitchLayoutGroupContext),isStrict=reactExports.useContext(LazyContext).strict;context.visualElement&&(MeasureLayout2=context.visualElement.loadFeatures(configAndProps,isStrict,preloadedFeatures2,initialLayoutGroupConfig))}return reactExports.createElement(MotionContext.Provider,{value:context},MeasureLayout2&&context.visualElement?reactExports.createElement(MeasureLayout2,{visualElement:context.visualElement,...configAndProps}):null,useRender(Component2,props,useMotionRef(visualState,context.visualElement,externalRef),visualState,isStatic,context.visualElement))}const ForwardRefComponent=reactExports.forwardRef(MotionComponent);return ForwardRefComponent[motionComponentSymbol]=Component2,ForwardRefComponent}function useLayoutId({layoutId}){const layoutGroupId=reactExports.useContext(LayoutGroupContext).id;return layoutGroupId&&layoutId!==void 0?layoutGroupId+"-"+layoutId:layoutId}function createMotionProxy(createConfig){function custom(Component2,customMotionComponentConfig={}){return createMotionComponent(createConfig(Component2,customMotionComponentConfig))}if(typeof Proxy>"u")return custom;const componentCache=new Map;return new Proxy(custom,{get:(_target,key)=>(componentCache.has(key)||componentCache.set(key,custom(key)),componentCache.get(key))})}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(Component2){return typeof Component2!="string"||Component2.includes("-")?!1:!!(lowercaseSVGElements.indexOf(Component2)>-1||/[A-Z]/.test(Component2))}const scaleCorrectors={};function addScaleCorrector(correctors){Object.assign(scaleCorrectors,correctors)}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder);function isForcedMotionValue(key,{layout:layout2,layoutId}){return transformProps.has(key)||key.startsWith("origin")||(layout2||layoutId!==void 0)&&(!!scaleCorrectors[key]||key==="opacity")}const isMotionValue=value=>!!(value&&value.getVelocity),translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(transform,{enableHardwareAcceleration=!0,allowTransformNone=!0},transformIsDefault,transformTemplate){let transformString="";for(let i=0;i<numTransforms;i++){const key=transformPropOrder[i];if(transform[key]!==void 0){const transformName=translateAlias[key]||key;transformString+=`${transformName}(${transform[key]}) `}}return enableHardwareAcceleration&&!transform.z&&(transformString+="translateZ(0)"),transformString=transformString.trim(),transformTemplate?transformString=transformTemplate(transform,transformIsDefault?"":transformString):allowTransformNone&&transformIsDefault&&(transformString="none"),transformString}const checkStringStartsWith=token=>key=>typeof key=="string"&&key.startsWith(token),isCSSVariableName=checkStringStartsWith("--"),isCSSVariableToken=checkStringStartsWith("var(--"),cssVariableRegex=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,getValueAsType=(value,type)=>type&&typeof value=="number"?type.transform(value):value,clamp=(min,max,v)=>Math.min(Math.max(v,min),max),number={test:v=>typeof v=="number",parse:parseFloat,transform:v=>v},alpha={...number,transform:v=>clamp(0,1,v)},scale={...number,default:1},sanitize=v=>Math.round(v*1e5)/1e5,floatRegex=/(-)?([\d]*\.?[\d])+/g,colorRegex=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,singleColorRegex=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function isString(v){return typeof v=="string"}const createUnitType=unit=>({test:v=>isString(v)&&v.endsWith(unit)&&v.split(" ").length===1,parse:parseFloat,transform:v=>`${v}${unit}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:v=>percent.parse(v)/100,transform:v=>percent.transform(v*100)},int={...number,transform:Math.round},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,size:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int};function buildHTMLStyles(state,latestValues,options,transformTemplate){const{style,vars,transform,transformOrigin}=state;let hasTransform2=!1,hasTransformOrigin=!1,transformIsNone=!0;for(const key in latestValues){const value=latestValues[key];if(isCSSVariableName(key)){vars[key]=value;continue}const valueType=numberValueTypes[key],valueAsType=getValueAsType(value,valueType);if(transformProps.has(key)){if(hasTransform2=!0,transform[key]=valueAsType,!transformIsNone)continue;value!==(valueType.default||0)&&(transformIsNone=!1)}else key.startsWith("origin")?(hasTransformOrigin=!0,transformOrigin[key]=valueAsType):style[key]=valueAsType}if(latestValues.transform||(hasTransform2||transformTemplate?style.transform=buildTransform(state.transform,options,transformIsNone,transformTemplate):style.transform&&(style.transform="none")),hasTransformOrigin){const{originX="50%",originY="50%",originZ=0}=transformOrigin;style.transformOrigin=`${originX} ${originY} ${originZ}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(target,source,props){for(const key in source)!isMotionValue(source[key])&&!isForcedMotionValue(key,props)&&(target[key]=source[key])}function useInitialMotionValues({transformTemplate},visualState,isStatic){return reactExports.useMemo(()=>{const state=createHtmlRenderState();return buildHTMLStyles(state,visualState,{enableHardwareAcceleration:!isStatic},transformTemplate),Object.assign({},state.vars,state.style)},[visualState])}function useStyle(props,visualState,isStatic){const styleProp=props.style||{},style={};return copyRawValuesOnly(style,styleProp,props),Object.assign(style,useInitialMotionValues(props,visualState,isStatic)),props.transformValues?props.transformValues(style):style}function useHTMLProps(props,visualState,isStatic){const htmlProps={},style=useStyle(props,visualState,isStatic);return props.drag&&props.dragListener!==!1&&(htmlProps.draggable=!1,style.userSelect=style.WebkitUserSelect=style.WebkitTouchCallout="none",style.touchAction=props.drag===!0?"none":`pan-${props.drag==="x"?"y":"x"}`),props.tabIndex===void 0&&(props.onTap||props.onTapStart||props.whileTap)&&(htmlProps.tabIndex=0),htmlProps.style=style,htmlProps}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(key){return key.startsWith("while")||key.startsWith("drag")&&key!=="draggable"||key.startsWith("layout")||key.startsWith("onTap")||key.startsWith("onPan")||key.startsWith("onLayout")||validMotionProps.has(key)}let shouldForward=key=>!isValidMotionProp(key);function loadExternalIsValidProp(isValidProp){isValidProp&&(shouldForward=key=>key.startsWith("on")?!isValidMotionProp(key):isValidProp(key))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(props,isDom,forwardMotionProps){const filteredProps={};for(const key in props)key==="values"&&typeof props.values=="object"||(shouldForward(key)||forwardMotionProps===!0&&isValidMotionProp(key)||!isDom&&!isValidMotionProp(key)||props.draggable&&key.startsWith("onDrag"))&&(filteredProps[key]=props[key]);return filteredProps}function calcOrigin$1(origin2,offset,size){return typeof origin2=="string"?origin2:px.transform(offset+size*origin2)}function calcSVGTransformOrigin(dimensions,originX,originY){const pxOriginX=calcOrigin$1(originX,dimensions.x,dimensions.width),pxOriginY=calcOrigin$1(originY,dimensions.y,dimensions.height);return`${pxOriginX} ${pxOriginY}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(attrs,length,spacing=1,offset=0,useDashCase=!0){attrs.pathLength=1;const keys=useDashCase?dashKeys:camelKeys;attrs[keys.offset]=px.transform(-offset);const pathLength=px.transform(length),pathSpacing=px.transform(spacing);attrs[keys.array]=`${pathLength} ${pathSpacing}`}function buildSVGAttrs(state,{attrX,attrY,attrScale,originX,originY,pathLength,pathSpacing=1,pathOffset=0,...latest},options,isSVGTag2,transformTemplate){if(buildHTMLStyles(state,latest,options,transformTemplate),isSVGTag2){state.style.viewBox&&(state.attrs.viewBox=state.style.viewBox);return}state.attrs=state.style,state.style={};const{attrs,style,dimensions}=state;attrs.transform&&(dimensions&&(style.transform=attrs.transform),delete attrs.transform),dimensions&&(originX!==void 0||originY!==void 0||style.transform)&&(style.transformOrigin=calcSVGTransformOrigin(dimensions,originX!==void 0?originX:.5,originY!==void 0?originY:.5)),attrX!==void 0&&(attrs.x=attrX),attrY!==void 0&&(attrs.y=attrY),attrScale!==void 0&&(attrs.scale=attrScale),pathLength!==void 0&&buildSVGPath(attrs,pathLength,pathSpacing,pathOffset,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=tag=>typeof tag=="string"&&tag.toLowerCase()==="svg";function useSVGProps(props,visualState,_isStatic,Component2){const visualProps=reactExports.useMemo(()=>{const state=createSvgRenderState();return buildSVGAttrs(state,visualState,{enableHardwareAcceleration:!1},isSVGTag(Component2),props.transformTemplate),{...state.attrs,style:{...state.style}}},[visualState]);if(props.style){const rawStyles={};copyRawValuesOnly(rawStyles,props.style,props),visualProps.style={...rawStyles,...visualProps.style}}return visualProps}function createUseRender(forwardMotionProps=!1){return(Component2,props,ref,{latestValues},isStatic)=>{const visualProps=(isSVGComponent(Component2)?useSVGProps:useHTMLProps)(props,latestValues,isStatic,Component2),elementProps={...filterProps(props,typeof Component2=="string",forwardMotionProps),...visualProps,ref},{children}=props,renderedChildren=reactExports.useMemo(()=>isMotionValue(children)?children.get():children,[children]);return reactExports.createElement(Component2,{...elementProps,children:renderedChildren})}}function renderHTML(element,{style,vars},styleProp,projection){Object.assign(element.style,style,projection&&projection.getProjectionStyles(styleProp));for(const key in vars)element.style.setProperty(key,vars[key])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(element,renderState,_styleProp,projection){renderHTML(element,renderState,void 0,projection);for(const key in renderState.attrs)element.setAttribute(camelCaseAttributes.has(key)?key:camelToDash(key),renderState.attrs[key])}function scrapeMotionValuesFromProps$1(props,prevProps){const{style}=props,newValues={};for(const key in style)(isMotionValue(style[key])||prevProps.style&&isMotionValue(prevProps.style[key])||isForcedMotionValue(key,props))&&(newValues[key]=style[key]);return newValues}function scrapeMotionValuesFromProps(props,prevProps){const newValues=scrapeMotionValuesFromProps$1(props,prevProps);for(const key in props)if(isMotionValue(props[key])||isMotionValue(prevProps[key])){const targetKey=transformPropOrder.indexOf(key)!==-1?"attr"+key.charAt(0).toUpperCase()+key.substring(1):key;newValues[targetKey]=props[key]}return newValues}function resolveVariantFromProps(props,definition,custom,currentValues={},currentVelocity={}){return typeof definition=="function"&&(definition=definition(custom!==void 0?custom:props.custom,currentValues,currentVelocity)),typeof definition=="string"&&(definition=props.variants&&props.variants[definition]),typeof definition=="function"&&(definition=definition(custom!==void 0?custom:props.custom,currentValues,currentVelocity)),definition}function useConstant(init){const ref=reactExports.useRef(null);return ref.current===null&&(ref.current=init()),ref.current}const isKeyframesTarget=v=>Array.isArray(v),isCustomValue=v=>!!(v&&typeof v=="object"&&v.mix&&v.toValue),resolveFinalValueInKeyframes=v=>isKeyframesTarget(v)?v[v.length-1]||0:v;function resolveMotionValue(value){const unwrappedValue=isMotionValue(value)?value.get():value;return isCustomValue(unwrappedValue)?unwrappedValue.toValue():unwrappedValue}function makeState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps2,createRenderState,onMount},props,context,presenceContext){const state={latestValues:makeLatestValues(props,context,presenceContext,scrapeMotionValuesFromProps2),renderState:createRenderState()};return onMount&&(state.mount=instance=>onMount(props,instance,state)),state}const makeUseVisualState=config=>(props,isStatic)=>{const context=reactExports.useContext(MotionContext),presenceContext=reactExports.useContext(PresenceContext),make=()=>makeState(config,props,context,presenceContext);return isStatic?make():useConstant(make)};function makeLatestValues(props,context,presenceContext,scrapeMotionValues){const values={},motionValues=scrapeMotionValues(props,{});for(const key in motionValues)values[key]=resolveMotionValue(motionValues[key]);let{initial,animate}=props;const isControllingVariants$1=isControllingVariants(props),isVariantNode$1=isVariantNode(props);context&&isVariantNode$1&&!isControllingVariants$1&&props.inherit!==!1&&(initial===void 0&&(initial=context.initial),animate===void 0&&(animate=context.animate));let isInitialAnimationBlocked=presenceContext?presenceContext.initial===!1:!1;isInitialAnimationBlocked=isInitialAnimationBlocked||initial===!1;const variantToSet=isInitialAnimationBlocked?animate:initial;return variantToSet&&typeof variantToSet!="boolean"&&!isAnimationControls(variantToSet)&&(Array.isArray(variantToSet)?variantToSet:[variantToSet]).forEach(definition=>{const resolved=resolveVariantFromProps(props,definition);if(!resolved)return;const{transitionEnd,transition,...target}=resolved;for(const key in target){let valueTarget=target[key];if(Array.isArray(valueTarget)){const index=isInitialAnimationBlocked?valueTarget.length-1:0;valueTarget=valueTarget[index]}valueTarget!==null&&(values[key]=valueTarget)}for(const key in transitionEnd)values[key]=transitionEnd[key]}),values}const noop$1=any=>any;class Queue{constructor(){this.order=[],this.scheduled=new Set}add(process2){if(!this.scheduled.has(process2))return this.scheduled.add(process2),this.order.push(process2),!0}remove(process2){const index=this.order.indexOf(process2);index!==-1&&(this.order.splice(index,1),this.scheduled.delete(process2))}clear(){this.order.length=0,this.scheduled.clear()}}function createRenderStep(runNextFrame){let thisFrame=new Queue,nextFrame=new Queue,numToRun=0,isProcessing=!1,flushNextFrame=!1;const toKeepAlive=new WeakSet,step={schedule:(callback,keepAlive=!1,immediate=!1)=>{const addToCurrentFrame=immediate&&isProcessing,queue=addToCurrentFrame?thisFrame:nextFrame;return keepAlive&&toKeepAlive.add(callback),queue.add(callback)&&addToCurrentFrame&&isProcessing&&(numToRun=thisFrame.order.length),callback},cancel:callback=>{nextFrame.remove(callback),toKeepAlive.delete(callback)},process:frameData2=>{if(isProcessing){flushNextFrame=!0;return}if(isProcessing=!0,[thisFrame,nextFrame]=[nextFrame,thisFrame],nextFrame.clear(),numToRun=thisFrame.order.length,numToRun)for(let i=0;i<numToRun;i++){const callback=thisFrame.order[i];callback(frameData2),toKeepAlive.has(callback)&&(step.schedule(callback),runNextFrame())}isProcessing=!1,flushNextFrame&&(flushNextFrame=!1,step.process(frameData2))}};return step}const stepsOrder=["prepare","read","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(scheduleNextBatch,allowKeepAlive){let runNextFrame=!1,useDefaultElapsed=!0;const state={delta:0,timestamp:0,isProcessing:!1},steps2=stepsOrder.reduce((acc,key)=>(acc[key]=createRenderStep(()=>runNextFrame=!0),acc),{}),processStep=stepId=>steps2[stepId].process(state),processBatch=()=>{const timestamp=performance.now();runNextFrame=!1,state.delta=useDefaultElapsed?1e3/60:Math.max(Math.min(timestamp-state.timestamp,maxElapsed),1),state.timestamp=timestamp,state.isProcessing=!0,stepsOrder.forEach(processStep),state.isProcessing=!1,runNextFrame&&allowKeepAlive&&(useDefaultElapsed=!1,scheduleNextBatch(processBatch))},wake=()=>{runNextFrame=!0,useDefaultElapsed=!0,state.isProcessing||scheduleNextBatch(processBatch)};return{schedule:stepsOrder.reduce((acc,key)=>{const step=steps2[key];return acc[key]=(process2,keepAlive=!1,immediate=!1)=>(runNextFrame||wake(),step.schedule(process2,keepAlive,immediate)),acc},{}),cancel:process2=>stepsOrder.forEach(key=>steps2[key].cancel(process2)),state,steps:steps2}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0),svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(props,instance,{renderState,latestValues})=>{frame.read(()=>{try{renderState.dimensions=typeof instance.getBBox=="function"?instance.getBBox():instance.getBoundingClientRect()}catch{renderState.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(renderState,latestValues,{enableHardwareAcceleration:!1},isSVGTag(instance.tagName),props.transformTemplate),renderSVG(instance,renderState)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function createDomMotionConfig(Component2,{forwardMotionProps=!1},preloadedFeatures2,createVisualElement){return{...isSVGComponent(Component2)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:preloadedFeatures2,useRender:createUseRender(forwardMotionProps),createVisualElement,Component:Component2}}function addDomEvent(target,eventName,handler,options={passive:!0}){return target.addEventListener(eventName,handler,options),()=>target.removeEventListener(eventName,handler)}const isPrimaryPointer=event=>event.pointerType==="mouse"?typeof event.button!="number"||event.button<=0:event.isPrimary!==!1;function extractEventInfo(event,pointType="page"){return{point:{x:event[pointType+"X"],y:event[pointType+"Y"]}}}const addPointerInfo=handler=>event=>isPrimaryPointer(event)&&handler(event,extractEventInfo(event));function addPointerEvent(target,eventName,handler,options){return addDomEvent(target,eventName,addPointerInfo(handler),options)}const combineFunctions=(a,b)=>v=>b(a(v)),pipe=(...transformers)=>transformers.reduce(combineFunctions);function createLock(name2){let lock=null;return()=>{const openLock=()=>{lock=null};return lock===null?(lock=name2,openLock):!1}}const globalHorizontalLock=createLock("dragHorizontal"),globalVerticalLock=createLock("dragVertical");function getGlobalLock(drag2){let lock=!1;if(drag2==="y")lock=globalVerticalLock();else if(drag2==="x")lock=globalHorizontalLock();else{const openHorizontal=globalHorizontalLock(),openVertical=globalVerticalLock();openHorizontal&&openVertical?lock=()=>{openHorizontal(),openVertical()}:(openHorizontal&&openHorizontal(),openVertical&&openVertical())}return lock}function isDragActive(){const openGestureLock=getGlobalLock(!0);return openGestureLock?(openGestureLock(),!1):!0}class Feature{constructor(node){this.isMounted=!1,this.node=node}update(){}}function addHoverEvent(node,isActive){const eventName="pointer"+(isActive?"enter":"leave"),callbackName="onHover"+(isActive?"Start":"End"),handleEvent=(event,info)=>{if(event.pointerType==="touch"||isDragActive())return;const props=node.getProps();node.animationState&&props.whileHover&&node.animationState.setActive("whileHover",isActive),props[callbackName]&&frame.update(()=>props[callbackName](event,info))};return addPointerEvent(node.current,eventName,handleEvent,{passive:!node.getProps()[callbackName]})}class HoverGesture extends Feature{mount(){this.unmount=pipe(addHoverEvent(this.node,!0),addHoverEvent(this.node,!1))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let isFocusVisible=!1;try{isFocusVisible=this.node.current.matches(":focus-visible")}catch{isFocusVisible=!0}!isFocusVisible||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const isNodeOrChild=(parent,child)=>child?parent===child?!0:isNodeOrChild(parent,child.parentElement):!1;function fireSyntheticPointerEvent(name2,handler){if(!handler)return;const syntheticPointerEvent=new PointerEvent("pointer"+name2);handler(syntheticPointerEvent,extractEventInfo(syntheticPointerEvent))}class PressGesture extends Feature{constructor(){super(...arguments),this.removeStartListeners=noop$1,this.removeEndListeners=noop$1,this.removeAccessibleListeners=noop$1,this.startPointerPress=(startEvent,startInfo)=>{if(this.isPressing)return;this.removeEndListeners();const props=this.node.getProps(),removePointerUpListener=addPointerEvent(window,"pointerup",(endEvent,endInfo)=>{if(!this.checkPressEnd())return;const{onTap,onTapCancel,globalTapTarget}=this.node.getProps();frame.update(()=>{!globalTapTarget&&!isNodeOrChild(this.node.current,endEvent.target)?onTapCancel&&onTapCancel(endEvent,endInfo):onTap&&onTap(endEvent,endInfo)})},{passive:!(props.onTap||props.onPointerUp)}),removePointerCancelListener=addPointerEvent(window,"pointercancel",(cancelEvent,cancelInfo)=>this.cancelPress(cancelEvent,cancelInfo),{passive:!(props.onTapCancel||props.onPointerCancel)});this.removeEndListeners=pipe(removePointerUpListener,removePointerCancelListener),this.startPress(startEvent,startInfo)},this.startAccessiblePress=()=>{const handleKeydown=keydownEvent=>{if(keydownEvent.key!=="Enter"||this.isPressing)return;const handleKeyup=keyupEvent=>{keyupEvent.key!=="Enter"||!this.checkPressEnd()||fireSyntheticPointerEvent("up",(event,info)=>{const{onTap}=this.node.getProps();onTap&&frame.update(()=>onTap(event,info))})};this.removeEndListeners(),this.removeEndListeners=addDomEvent(this.node.current,"keyup",handleKeyup),fireSyntheticPointerEvent("down",(event,info)=>{this.startPress(event,info)})},removeKeydownListener=addDomEvent(this.node.current,"keydown",handleKeydown),handleBlur=()=>{this.isPressing&&fireSyntheticPointerEvent("cancel",(cancelEvent,cancelInfo)=>this.cancelPress(cancelEvent,cancelInfo))},removeBlurListener=addDomEvent(this.node.current,"blur",handleBlur);this.removeAccessibleListeners=pipe(removeKeydownListener,removeBlurListener)}}startPress(event,info){this.isPressing=!0;const{onTapStart,whileTap}=this.node.getProps();whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),onTapStart&&frame.update(()=>onTapStart(event,info))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!isDragActive()}cancelPress(event,info){if(!this.checkPressEnd())return;const{onTapCancel}=this.node.getProps();onTapCancel&&frame.update(()=>onTapCancel(event,info))}mount(){const props=this.node.getProps(),removePointerListener=addPointerEvent(props.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(props.onTapStart||props.onPointerStart)}),removeFocusListener=addDomEvent(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pipe(removePointerListener,removeFocusListener)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=entry=>{const callback=observerCallbacks.get(entry.target);callback&&callback(entry)},fireAllObserverCallbacks=entries=>{entries.forEach(fireObserverCallback)};function initIntersectionObserver({root:root2,...options}){const lookupRoot=root2||document;observers.has(lookupRoot)||observers.set(lookupRoot,{});const rootObservers=observers.get(lookupRoot),key=JSON.stringify(options);return rootObservers[key]||(rootObservers[key]=new IntersectionObserver(fireAllObserverCallbacks,{root:root2,...options})),rootObservers[key]}function observeIntersection(element,options,callback){const rootInteresectionObserver=initIntersectionObserver(options);return observerCallbacks.set(element,callback),rootInteresectionObserver.observe(element),()=>{observerCallbacks.delete(element),rootInteresectionObserver.unobserve(element)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport={}}=this.node.getProps(),{root:root2,margin:rootMargin,amount="some",once}=viewport,options={root:root2?root2.current:void 0,rootMargin,threshold:typeof amount=="number"?amount:thresholdNames[amount]},onIntersectionUpdate=entry=>{const{isIntersecting}=entry;if(this.isInView===isIntersecting||(this.isInView=isIntersecting,once&&!isIntersecting&&this.hasEnteredView))return;isIntersecting&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",isIntersecting);const{onViewportEnter,onViewportLeave}=this.node.getProps(),callback=isIntersecting?onViewportEnter:onViewportLeave;callback&&callback(entry)};return observeIntersection(this.node.current,options,onIntersectionUpdate)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props,prevProps}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(props,prevProps))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport={}},{viewport:prevViewport={}}={}){return name2=>viewport[name2]!==prevViewport[name2]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}};function shallowCompare(next,prev){if(!Array.isArray(prev))return!1;const prevLength=prev.length;if(prevLength!==next.length)return!1;for(let i=0;i<prevLength;i++)if(prev[i]!==next[i])return!1;return!0}function getCurrent(visualElement){const current={};return visualElement.values.forEach((value,key)=>current[key]=value.get()),current}function getVelocity$1(visualElement){const velocity={};return visualElement.values.forEach((value,key)=>velocity[key]=value.getVelocity()),velocity}function resolveVariant(visualElement,definition,custom){const props=visualElement.getProps();return resolveVariantFromProps(props,definition,custom!==void 0?custom:props.custom,getCurrent(visualElement),getVelocity$1(visualElement))}let invariant=noop$1;const secondsToMilliseconds=seconds=>seconds*1e3,millisecondsToSeconds=milliseconds=>milliseconds/1e3,instantAnimationState={current:!1},isBezierDefinition=easing=>Array.isArray(easing)&&typeof easing[0]=="number";function isWaapiSupportedEasing(easing){return!!(!easing||typeof easing=="string"&&supportedWaapiEasing[easing]||isBezierDefinition(easing)||Array.isArray(easing)&&easing.every(isWaapiSupportedEasing))}const cubicBezierAsString=([a,b,c,d])=>`cubic-bezier(${a}, ${b}, ${c}, ${d})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(easing){if(easing)return isBezierDefinition(easing)?cubicBezierAsString(easing):Array.isArray(easing)?easing.map(mapEasingToNativeEasing):supportedWaapiEasing[easing]}function animateStyle(element,valueName,keyframes2,{delay:delay2=0,duration,repeat=0,repeatType="loop",ease:ease2,times}={}){const keyframeOptions={[valueName]:keyframes2};times&&(keyframeOptions.offset=times);const easing=mapEasingToNativeEasing(ease2);return Array.isArray(easing)&&(keyframeOptions.easing=easing),element.animate(keyframeOptions,{delay:delay2,duration,easing:Array.isArray(easing)?"linear":easing,fill:"both",iterations:repeat+1,direction:repeatType==="reverse"?"alternate":"normal"})}function getFinalKeyframe(keyframes2,{repeat,repeatType="loop"}){const index=repeat&&repeatType!=="loop"&&repeat%2===1?0:keyframes2.length-1;return keyframes2[index]}const calcBezier=(t,a1,a2)=>(((1-3*a2+3*a1)*t+(3*a2-6*a1))*t+3*a1)*t,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(x,lowerBound,upperBound,mX1,mX2){let currentX,currentT,i=0;do currentT=lowerBound+(upperBound-lowerBound)/2,currentX=calcBezier(currentT,mX1,mX2)-x,currentX>0?upperBound=currentT:lowerBound=currentT;while(Math.abs(currentX)>subdivisionPrecision&&++i<subdivisionMaxIterations);return currentT}function cubicBezier(mX1,mY1,mX2,mY2){if(mX1===mY1&&mX2===mY2)return noop$1;const getTForX=aX=>binarySubdivide(aX,0,1,mX1,mX2);return t=>t===0||t===1?t:calcBezier(getTForX(t),mY1,mY2)}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=ease2=>Array.isArray(ease2)&&typeof ease2[0]!="number",mirrorEasing=easing=>p2=>p2<=.5?easing(2*p2)/2:(2-easing(2*(1-p2)))/2,reverseEasing=easing=>p2=>1-easing(1-p2),circIn=p2=>1-Math.sin(Math.acos(p2)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=p2=>(p2*=2)<1?.5*backIn(p2):.5*(2-Math.pow(2,-10*(p2-1))),easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=definition=>{if(Array.isArray(definition)){invariant(definition.length===4);const[x1,y1,x2,y2]=definition;return cubicBezier(x1,y1,x2,y2)}else if(typeof definition=="string")return easingLookup[definition];return definition},isColorString=(type,testProp)=>v=>!!(isString(v)&&singleColorRegex.test(v)&&v.startsWith(type)||testProp&&Object.prototype.hasOwnProperty.call(v,testProp)),splitColor=(aName,bName,cName)=>v=>{if(!isString(v))return v;const[a,b,c,alpha2]=v.match(floatRegex);return{[aName]:parseFloat(a),[bName]:parseFloat(b),[cName]:parseFloat(c),alpha:alpha2!==void 0?parseFloat(alpha2):1}},clampRgbUnit=v=>clamp(0,255,v),rgbUnit={...number,transform:v=>Math.round(clampRgbUnit(v))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red,green,blue,alpha:alpha$1=1})=>"rgba("+rgbUnit.transform(red)+", "+rgbUnit.transform(green)+", "+rgbUnit.transform(blue)+", "+sanitize(alpha.transform(alpha$1))+")"};function parseHex(v){let r2="",g="",b="",a="";return v.length>5?(r2=v.substring(1,3),g=v.substring(3,5),b=v.substring(5,7),a=v.substring(7,9)):(r2=v.substring(1,2),g=v.substring(2,3),b=v.substring(3,4),a=v.substring(4,5),r2+=r2,g+=g,b+=b,a+=a),{red:parseInt(r2,16),green:parseInt(g,16),blue:parseInt(b,16),alpha:a?parseInt(a,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue,saturation,lightness,alpha:alpha$1=1})=>"hsla("+Math.round(hue)+", "+percent.transform(sanitize(saturation))+", "+percent.transform(sanitize(lightness))+", "+sanitize(alpha.transform(alpha$1))+")"},color={test:v=>rgba.test(v)||hex.test(v)||hsla.test(v),parse:v=>rgba.test(v)?rgba.parse(v):hsla.test(v)?hsla.parse(v):hex.parse(v),transform:v=>isString(v)?v:v.hasOwnProperty("red")?rgba.transform(v):hsla.transform(v)},mix=(from,to,progress2)=>-progress2*from+progress2*to+from;function hueToRgb(p2,q2,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p2+(q2-p2)*6*t:t<1/2?q2:t<2/3?p2+(q2-p2)*(2/3-t)*6:p2}function hslaToRgba({hue,saturation,lightness,alpha:alpha2}){hue/=360,saturation/=100,lightness/=100;let red=0,green=0,blue=0;if(!saturation)red=green=blue=lightness;else{const q2=lightness<.5?lightness*(1+saturation):lightness+saturation-lightness*saturation,p2=2*lightness-q2;red=hueToRgb(p2,q2,hue+1/3),green=hueToRgb(p2,q2,hue),blue=hueToRgb(p2,q2,hue-1/3)}return{red:Math.round(red*255),green:Math.round(green*255),blue:Math.round(blue*255),alpha:alpha2}}const mixLinearColor=(from,to,v)=>{const fromExpo=from*from;return Math.sqrt(Math.max(0,v*(to*to-fromExpo)+fromExpo))},colorTypes=[hex,rgba,hsla],getColorType=v=>colorTypes.find(type=>type.test(v));function asRGBA(color2){const type=getColorType(color2);let model=type.parse(color2);return type===hsla&&(model=hslaToRgba(model)),model}const mixColor=(from,to)=>{const fromRGBA=asRGBA(from),toRGBA=asRGBA(to),blended={...fromRGBA};return v=>(blended.red=mixLinearColor(fromRGBA.red,toRGBA.red,v),blended.green=mixLinearColor(fromRGBA.green,toRGBA.green,v),blended.blue=mixLinearColor(fromRGBA.blue,toRGBA.blue,v),blended.alpha=mix(fromRGBA.alpha,toRGBA.alpha,v),rgba.transform(blended))};function test(v){var _a,_b;return isNaN(v)&&isString(v)&&(((_a=v.match(floatRegex))===null||_a===void 0?void 0:_a.length)||0)+(((_b=v.match(colorRegex))===null||_b===void 0?void 0:_b.length)||0)>0}const cssVarTokeniser={regex:cssVariableRegex,countKey:"Vars",token:"${v}",parse:noop$1},colorTokeniser={regex:colorRegex,countKey:"Colors",token:"${c}",parse:color.parse},numberTokeniser={regex:floatRegex,countKey:"Numbers",token:"${n}",parse:number.parse};function tokenise(info,{regex,countKey,token,parse}){const matches=info.tokenised.match(regex);matches&&(info["num"+countKey]=matches.length,info.tokenised=info.tokenised.replace(regex,token),info.values.push(...matches.map(parse)))}function analyseComplexValue(value){const originalValue=value.toString(),info={value:originalValue,tokenised:originalValue,values:[],numVars:0,numColors:0,numNumbers:0};return info.value.includes("var(--")&&tokenise(info,cssVarTokeniser),tokenise(info,colorTokeniser),tokenise(info,numberTokeniser),info}function parseComplexValue(v){return analyseComplexValue(v).values}function createTransformer(source){const{values,numColors,numVars,tokenised}=analyseComplexValue(source),numValues=values.length;return v=>{let output=tokenised;for(let i=0;i<numValues;i++)i<numVars?output=output.replace(cssVarTokeniser.token,v[i]):i<numVars+numColors?output=output.replace(colorTokeniser.token,color.transform(v[i])):output=output.replace(numberTokeniser.token,sanitize(v[i]));return output}}const convertNumbersToZero=v=>typeof v=="number"?0:v;function getAnimatableNone$1(v){const parsed=parseComplexValue(v);return createTransformer(v)(parsed.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},mixImmediate=(origin2,target)=>p2=>`${p2>0?target:origin2}`;function getMixer(origin2,target){return typeof origin2=="number"?v=>mix(origin2,target,v):color.test(origin2)?mixColor(origin2,target):origin2.startsWith("var(")?mixImmediate(origin2,target):mixComplex(origin2,target)}const mixArray=(from,to)=>{const output=[...from],numValues=output.length,blendValue=from.map((fromThis,i)=>getMixer(fromThis,to[i]));return v=>{for(let i=0;i<numValues;i++)output[i]=blendValue[i](v);return output}},mixObject=(origin2,target)=>{const output={...origin2,...target},blendValue={};for(const key in output)origin2[key]!==void 0&&target[key]!==void 0&&(blendValue[key]=getMixer(origin2[key],target[key]));return v=>{for(const key in blendValue)output[key]=blendValue[key](v);return output}},mixComplex=(origin2,target)=>{const template=complex.createTransformer(target),originStats=analyseComplexValue(origin2),targetStats=analyseComplexValue(target);return originStats.numVars===targetStats.numVars&&originStats.numColors===targetStats.numColors&&originStats.numNumbers>=targetStats.numNumbers?pipe(mixArray(originStats.values,targetStats.values),template):mixImmediate(origin2,target)},progress=(from,to,value)=>{const toFromDifference=to-from;return toFromDifference===0?1:(value-from)/toFromDifference},mixNumber=(from,to)=>p2=>mix(from,to,p2);function detectMixerFactory(v){return typeof v=="number"?mixNumber:typeof v=="string"?color.test(v)?mixColor:mixComplex:Array.isArray(v)?mixArray:typeof v=="object"?mixObject:mixNumber}function createMixers(output,ease2,customMixer){const mixers=[],mixerFactory=customMixer||detectMixerFactory(output[0]),numMixers=output.length-1;for(let i=0;i<numMixers;i++){let mixer=mixerFactory(output[i],output[i+1]);if(ease2){const easingFunction=Array.isArray(ease2)?ease2[i]||noop$1:ease2;mixer=pipe(easingFunction,mixer)}mixers.push(mixer)}return mixers}function interpolate(input,output,{clamp:isClamp=!0,ease:ease2,mixer}={}){const inputLength=input.length;if(invariant(inputLength===output.length),inputLength===1)return()=>output[0];input[0]>input[inputLength-1]&&(input=[...input].reverse(),output=[...output].reverse());const mixers=createMixers(output,ease2,mixer),numMixers=mixers.length,interpolator=v=>{let i=0;if(numMixers>1)for(;i<input.length-2&&!(v<input[i+1]);i++);const progressInRange=progress(input[i],input[i+1],v);return mixers[i](progressInRange)};return isClamp?v=>interpolator(clamp(input[0],input[inputLength-1],v)):interpolator}function fillOffset(offset,remaining){const min=offset[offset.length-1];for(let i=1;i<=remaining;i++){const offsetProgress=progress(0,remaining,i);offset.push(mix(min,1,offsetProgress))}}function defaultOffset(arr){const offset=[0];return fillOffset(offset,arr.length-1),offset}function convertOffsetToTimes(offset,duration){return offset.map(o=>o*duration)}function defaultEasing(values,easing){return values.map(()=>easing||easeInOut).splice(0,values.length-1)}function keyframes({duration=300,keyframes:keyframeValues,times,ease:ease2="easeInOut"}){const easingFunctions=isEasingArray(ease2)?ease2.map(easingDefinitionToFunction):easingDefinitionToFunction(ease2),state={done:!1,value:keyframeValues[0]},absoluteTimes=convertOffsetToTimes(times&&times.length===keyframeValues.length?times:defaultOffset(keyframeValues),duration),mapTimeToKeyframe=interpolate(absoluteTimes,keyframeValues,{ease:Array.isArray(easingFunctions)?easingFunctions:defaultEasing(keyframeValues,easingFunctions)});return{calculatedDuration:duration,next:t=>(state.value=mapTimeToKeyframe(t),state.done=t>=duration,state)}}function velocityPerSecond(velocity,frameDuration){return frameDuration?velocity*(1e3/frameDuration):0}const velocitySampleDuration=5;function calcGeneratorVelocity(resolveValue,t,current){const prevT=Math.max(t-velocitySampleDuration,0);return velocityPerSecond(current-resolveValue(prevT),t-prevT)}const safeMin=.001,minDuration=.01,maxDuration$1=10,minDamping=.05,maxDamping=1;function findSpring({duration=800,bounce=.25,velocity=0,mass=1}){let envelope,derivative,dampingRatio=1-bounce;dampingRatio=clamp(minDamping,maxDamping,dampingRatio),duration=clamp(minDuration,maxDuration$1,millisecondsToSeconds(duration)),dampingRatio<1?(envelope=undampedFreq2=>{const exponentialDecay=undampedFreq2*dampingRatio,delta=exponentialDecay*duration,a=exponentialDecay-velocity,b=calcAngularFreq(undampedFreq2,dampingRatio),c=Math.exp(-delta);return safeMin-a/b*c},derivative=undampedFreq2=>{const delta=undampedFreq2*dampingRatio*duration,d=delta*velocity+velocity,e=Math.pow(dampingRatio,2)*Math.pow(undampedFreq2,2)*duration,f2=Math.exp(-delta),g=calcAngularFreq(Math.pow(undampedFreq2,2),dampingRatio);return(-envelope(undampedFreq2)+safeMin>0?-1:1)*((d-e)*f2)/g}):(envelope=undampedFreq2=>{const a=Math.exp(-undampedFreq2*duration),b=(undampedFreq2-velocity)*duration+1;return-safeMin+a*b},derivative=undampedFreq2=>{const a=Math.exp(-undampedFreq2*duration),b=(velocity-undampedFreq2)*(duration*duration);return a*b});const initialGuess=5/duration,undampedFreq=approximateRoot(envelope,derivative,initialGuess);if(duration=secondsToMilliseconds(duration),isNaN(undampedFreq))return{stiffness:100,damping:10,duration};{const stiffness=Math.pow(undampedFreq,2)*mass;return{stiffness,damping:dampingRatio*2*Math.sqrt(mass*stiffness),duration}}}const rootIterations=12;function approximateRoot(envelope,derivative,initialGuess){let result=initialGuess;for(let i=1;i<rootIterations;i++)result=result-envelope(result)/derivative(result);return result}function calcAngularFreq(undampedFreq,dampingRatio){return undampedFreq*Math.sqrt(1-dampingRatio*dampingRatio)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(options,keys){return keys.some(key=>options[key]!==void 0)}function getSpringOptions(options){let springOptions={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...options};if(!isSpringType(options,physicsKeys)&&isSpringType(options,durationKeys)){const derived=findSpring(options);springOptions={...springOptions,...derived,mass:1},springOptions.isResolvedFromDuration=!0}return springOptions}function spring({keyframes:keyframes2,restDelta,restSpeed,...options}){const origin2=keyframes2[0],target=keyframes2[keyframes2.length-1],state={done:!1,value:origin2},{stiffness,damping,mass,duration,velocity,isResolvedFromDuration}=getSpringOptions({...options,velocity:-millisecondsToSeconds(options.velocity||0)}),initialVelocity=velocity||0,dampingRatio=damping/(2*Math.sqrt(stiffness*mass)),initialDelta=target-origin2,undampedAngularFreq=millisecondsToSeconds(Math.sqrt(stiffness/mass)),isGranularScale=Math.abs(initialDelta)<5;restSpeed||(restSpeed=isGranularScale?.01:2),restDelta||(restDelta=isGranularScale?.005:.5);let resolveSpring;if(dampingRatio<1){const angularFreq=calcAngularFreq(undampedAngularFreq,dampingRatio);resolveSpring=t=>{const envelope=Math.exp(-dampingRatio*undampedAngularFreq*t);return target-envelope*((initialVelocity+dampingRatio*undampedAngularFreq*initialDelta)/angularFreq*Math.sin(angularFreq*t)+initialDelta*Math.cos(angularFreq*t))}}else if(dampingRatio===1)resolveSpring=t=>target-Math.exp(-undampedAngularFreq*t)*(initialDelta+(initialVelocity+undampedAngularFreq*initialDelta)*t);else{const dampedAngularFreq=undampedAngularFreq*Math.sqrt(dampingRatio*dampingRatio-1);resolveSpring=t=>{const envelope=Math.exp(-dampingRatio*undampedAngularFreq*t),freqForT=Math.min(dampedAngularFreq*t,300);return target-envelope*((initialVelocity+dampingRatio*undampedAngularFreq*initialDelta)*Math.sinh(freqForT)+dampedAngularFreq*initialDelta*Math.cosh(freqForT))/dampedAngularFreq}}return{calculatedDuration:isResolvedFromDuration&&duration||null,next:t=>{const current=resolveSpring(t);if(isResolvedFromDuration)state.done=t>=duration;else{let currentVelocity=initialVelocity;t!==0&&(dampingRatio<1?currentVelocity=calcGeneratorVelocity(resolveSpring,t,current):currentVelocity=0);const isBelowVelocityThreshold=Math.abs(currentVelocity)<=restSpeed,isBelowDisplacementThreshold=Math.abs(target-current)<=restDelta;state.done=isBelowVelocityThreshold&&isBelowDisplacementThreshold}return state.value=state.done?target:current,state}}}function inertia({keyframes:keyframes2,velocity=0,power=.8,timeConstant=325,bounceDamping=10,bounceStiffness=500,modifyTarget,min,max,restDelta=.5,restSpeed}){const origin2=keyframes2[0],state={done:!1,value:origin2},isOutOfBounds=v=>min!==void 0&&v<min||max!==void 0&&v>max,nearestBoundary=v=>min===void 0?max:max===void 0||Math.abs(min-v)<Math.abs(max-v)?min:max;let amplitude=power*velocity;const ideal=origin2+amplitude,target=modifyTarget===void 0?ideal:modifyTarget(ideal);target!==ideal&&(amplitude=target-origin2);const calcDelta=t=>-amplitude*Math.exp(-t/timeConstant),calcLatest=t=>target+calcDelta(t),applyFriction=t=>{const delta=calcDelta(t),latest=calcLatest(t);state.done=Math.abs(delta)<=restDelta,state.value=state.done?target:latest};let timeReachedBoundary,spring$1;const checkCatchBoundary=t=>{isOutOfBounds(state.value)&&(timeReachedBoundary=t,spring$1=spring({keyframes:[state.value,nearestBoundary(state.value)],velocity:calcGeneratorVelocity(calcLatest,t,state.value),damping:bounceDamping,stiffness:bounceStiffness,restDelta,restSpeed}))};return checkCatchBoundary(0),{calculatedDuration:null,next:t=>{let hasUpdatedFrame=!1;return!spring$1&&timeReachedBoundary===void 0&&(hasUpdatedFrame=!0,applyFriction(t),checkCatchBoundary(t)),timeReachedBoundary!==void 0&&t>timeReachedBoundary?spring$1.next(t-timeReachedBoundary):(!hasUpdatedFrame&&applyFriction(t),state)}}}const frameloopDriver=update=>{const passTimestamp=({timestamp})=>update(timestamp);return{start:()=>frame.update(passTimestamp,!0),stop:()=>cancelFrame(passTimestamp),now:()=>frameData.isProcessing?frameData.timestamp:performance.now()}},maxGeneratorDuration=2e4;function calcGeneratorDuration(generator){let duration=0;const timeStep=50;let state=generator.next(duration);for(;!state.done&&duration<maxGeneratorDuration;)duration+=timeStep,state=generator.next(duration);return duration>=maxGeneratorDuration?1/0:duration}const types={decay:inertia,inertia,tween:keyframes,keyframes,spring};function animateValue({autoplay=!0,delay:delay2=0,driver=frameloopDriver,keyframes:keyframes$1,type="keyframes",repeat=0,repeatDelay=0,repeatType="loop",onPlay,onStop,onComplete,onUpdate,...options}){let speed=1,hasStopped=!1,resolveFinishedPromise,currentFinishedPromise;const updateFinishedPromise=()=>{currentFinishedPromise=new Promise(resolve=>{resolveFinishedPromise=resolve})};updateFinishedPromise();let animationDriver;const generatorFactory=types[type]||keyframes;let mapNumbersToKeyframes;generatorFactory!==keyframes&&typeof keyframes$1[0]!="number"&&(mapNumbersToKeyframes=interpolate([0,100],keyframes$1,{clamp:!1}),keyframes$1=[0,100]);const generator=generatorFactory({...options,keyframes:keyframes$1});let mirroredGenerator;repeatType==="mirror"&&(mirroredGenerator=generatorFactory({...options,keyframes:[...keyframes$1].reverse(),velocity:-(options.velocity||0)}));let playState="idle",holdTime=null,startTime=null,cancelTime=null;generator.calculatedDuration===null&&repeat&&(generator.calculatedDuration=calcGeneratorDuration(generator));const{calculatedDuration}=generator;let resolvedDuration=1/0,totalDuration=1/0;calculatedDuration!==null&&(resolvedDuration=calculatedDuration+repeatDelay,totalDuration=resolvedDuration*(repeat+1)-repeatDelay);let currentTime=0;const tick=timestamp=>{if(startTime===null)return;speed>0&&(startTime=Math.min(startTime,timestamp)),speed<0&&(startTime=Math.min(timestamp-totalDuration/speed,startTime)),holdTime!==null?currentTime=holdTime:currentTime=Math.round(timestamp-startTime)*speed;const timeWithoutDelay=currentTime-delay2*(speed>=0?1:-1),isInDelayPhase=speed>=0?timeWithoutDelay<0:timeWithoutDelay>totalDuration;currentTime=Math.max(timeWithoutDelay,0),playState==="finished"&&holdTime===null&&(currentTime=totalDuration);let elapsed=currentTime,frameGenerator=generator;if(repeat){const progress2=Math.min(currentTime,totalDuration)/resolvedDuration;let currentIteration=Math.floor(progress2),iterationProgress=progress2%1;!iterationProgress&&progress2>=1&&(iterationProgress=1),iterationProgress===1&&currentIteration--,currentIteration=Math.min(currentIteration,repeat+1),!!(currentIteration%2)&&(repeatType==="reverse"?(iterationProgress=1-iterationProgress,repeatDelay&&(iterationProgress-=repeatDelay/resolvedDuration)):repeatType==="mirror"&&(frameGenerator=mirroredGenerator)),elapsed=clamp(0,1,iterationProgress)*resolvedDuration}const state=isInDelayPhase?{done:!1,value:keyframes$1[0]}:frameGenerator.next(elapsed);mapNumbersToKeyframes&&(state.value=mapNumbersToKeyframes(state.value));let{done}=state;!isInDelayPhase&&calculatedDuration!==null&&(done=speed>=0?currentTime>=totalDuration:currentTime<=0);const isAnimationFinished=holdTime===null&&(playState==="finished"||playState==="running"&&done);return onUpdate&&onUpdate(state.value),isAnimationFinished&&finish(),state},stopAnimationDriver=()=>{animationDriver&&animationDriver.stop(),animationDriver=void 0},cancel=()=>{playState="idle",stopAnimationDriver(),resolveFinishedPromise(),updateFinishedPromise(),startTime=cancelTime=null},finish=()=>{playState="finished",onComplete&&onComplete(),stopAnimationDriver(),resolveFinishedPromise()},play=()=>{if(hasStopped)return;animationDriver||(animationDriver=driver(tick));const now=animationDriver.now();onPlay&&onPlay(),holdTime!==null?startTime=now-holdTime:(!startTime||playState==="finished")&&(startTime=now),playState==="finished"&&updateFinishedPromise(),cancelTime=startTime,holdTime=null,playState="running",animationDriver.start()};autoplay&&play();const controls={then(resolve,reject){return currentFinishedPromise.then(resolve,reject)},get time(){return millisecondsToSeconds(currentTime)},set time(newTime){newTime=secondsToMilliseconds(newTime),currentTime=newTime,holdTime!==null||!animationDriver||speed===0?holdTime=newTime:startTime=animationDriver.now()-newTime/speed},get duration(){const duration=generator.calculatedDuration===null?calcGeneratorDuration(generator):generator.calculatedDuration;return millisecondsToSeconds(duration)},get speed(){return speed},set speed(newSpeed){newSpeed===speed||!animationDriver||(speed=newSpeed,controls.time=millisecondsToSeconds(currentTime))},get state(){return playState},play,pause:()=>{playState="paused",holdTime=currentTime},stop:()=>{hasStopped=!0,playState!=="idle"&&(playState="idle",onStop&&onStop(),cancel())},cancel:()=>{cancelTime!==null&&tick(cancelTime),cancel()},complete:()=>{playState="finished"},sample:elapsed=>(startTime=0,tick(elapsed))};return controls}function memo(callback){let result;return()=>(result===void 0&&(result=callback()),result)}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),acceleratedValues=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),sampleDelta=10,maxDuration=2e4,requiresPregeneratedKeyframes=(valueName,options)=>options.type==="spring"||valueName==="backgroundColor"||!isWaapiSupportedEasing(options.ease);function createAcceleratedAnimation(value,valueName,{onUpdate,onComplete,...options}){if(!(supportsWaapi()&&acceleratedValues.has(valueName)&&!options.repeatDelay&&options.repeatType!=="mirror"&&options.damping!==0&&options.type!=="inertia"))return!1;let hasStopped=!1,resolveFinishedPromise,currentFinishedPromise,pendingCancel=!1;const updateFinishedPromise=()=>{currentFinishedPromise=new Promise(resolve=>{resolveFinishedPromise=resolve})};updateFinishedPromise();let{keyframes:keyframes2,duration=300,ease:ease2,times}=options;if(requiresPregeneratedKeyframes(valueName,options)){const sampleAnimation=animateValue({...options,repeat:0,delay:0});let state={done:!1,value:keyframes2[0]};const pregeneratedKeyframes=[];let t=0;for(;!state.done&&t<maxDuration;)state=sampleAnimation.sample(t),pregeneratedKeyframes.push(state.value),t+=sampleDelta;times=void 0,keyframes2=pregeneratedKeyframes,duration=t-sampleDelta,ease2="linear"}const animation=animateStyle(value.owner.current,valueName,keyframes2,{...options,duration,ease:ease2,times}),cancelAnimation=()=>{pendingCancel=!1,animation.cancel()},safeCancel=()=>{pendingCancel=!0,frame.update(cancelAnimation),resolveFinishedPromise(),updateFinishedPromise()};return animation.onfinish=()=>{pendingCancel||(value.set(getFinalKeyframe(keyframes2,options)),onComplete&&onComplete(),safeCancel())},{then(resolve,reject){return currentFinishedPromise.then(resolve,reject)},attachTimeline(timeline){return animation.timeline=timeline,animation.onfinish=null,noop$1},get time(){return millisecondsToSeconds(animation.currentTime||0)},set time(newTime){animation.currentTime=secondsToMilliseconds(newTime)},get speed(){return animation.playbackRate},set speed(newSpeed){animation.playbackRate=newSpeed},get duration(){return millisecondsToSeconds(duration)},play:()=>{hasStopped||(animation.play(),cancelFrame(cancelAnimation))},pause:()=>animation.pause(),stop:()=>{if(hasStopped=!0,animation.playState==="idle")return;const{currentTime}=animation;if(currentTime){const sampleAnimation=animateValue({...options,autoplay:!1});value.setWithVelocity(sampleAnimation.sample(currentTime-sampleDelta).value,sampleAnimation.sample(currentTime).value,sampleDelta)}safeCancel()},complete:()=>{pendingCancel||animation.finish()},cancel:safeCancel}}function createInstantAnimation({keyframes:keyframes2,delay:delay2,onUpdate,onComplete}){const setValue=()=>(onUpdate&&onUpdate(keyframes2[keyframes2.length-1]),onComplete&&onComplete(),{time:0,speed:1,duration:0,play:noop$1,pause:noop$1,stop:noop$1,then:resolve=>(resolve(),Promise.resolve()),cancel:noop$1,complete:noop$1});return delay2?animateValue({keyframes:[0,1],duration:0,delay:delay2,onComplete:setValue}):setValue()}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=target=>({type:"spring",stiffness:550,damping:target===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(valueKey,{keyframes:keyframes2})=>keyframes2.length>2?keyframesTransition:transformProps.has(valueKey)?valueKey.startsWith("scale")?criticallyDampedSpring(keyframes2[1]):underDampedSpring:ease,isAnimatable=(key,value)=>key==="zIndex"?!1:!!(typeof value=="number"||Array.isArray(value)||typeof value=="string"&&(complex.test(value)||value==="0")&&!value.startsWith("url(")),maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(v){const[name2,value]=v.slice(0,-1).split("(");if(name2==="drop-shadow")return v;const[number2]=value.match(floatRegex)||[];if(!number2)return v;const unit=value.replace(number2,"");let defaultValue=maxDefaults.has(name2)?1:0;return number2!==value&&(defaultValue*=100),name2+"("+defaultValue+unit+")"}const functionRegex=/([a-z-]*)\(.*?\)/g,filter2={...complex,getAnimatableNone:v=>{const functions=v.match(functionRegex);return functions?functions.map(applyDefaultFilter).join(" "):v}},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter:filter2,WebkitFilter:filter2},getDefaultValueType=key=>defaultValueTypes[key];function getAnimatableNone(key,value){let defaultValueType=getDefaultValueType(key);return defaultValueType!==filter2&&(defaultValueType=complex),defaultValueType.getAnimatableNone?defaultValueType.getAnimatableNone(value):void 0}const isZeroValueString=v=>/^0[^.\s]+$/.test(v);function isNone(value){if(typeof value=="number")return value===0;if(value!==null)return value==="none"||value==="0"||isZeroValueString(value)}function getKeyframes(value,valueName,target,transition){const isTargetAnimatable=isAnimatable(valueName,target);let keyframes2;Array.isArray(target)?keyframes2=[...target]:keyframes2=[null,target];const defaultOrigin=transition.from!==void 0?transition.from:value.get();let animatableTemplateValue;const noneKeyframeIndexes=[];for(let i=0;i<keyframes2.length;i++)keyframes2[i]===null&&(keyframes2[i]=i===0?defaultOrigin:keyframes2[i-1]),isNone(keyframes2[i])&&noneKeyframeIndexes.push(i),typeof keyframes2[i]=="string"&&keyframes2[i]!=="none"&&keyframes2[i]!=="0"&&(animatableTemplateValue=keyframes2[i]);if(isTargetAnimatable&&noneKeyframeIndexes.length&&animatableTemplateValue)for(let i=0;i<noneKeyframeIndexes.length;i++){const index=noneKeyframeIndexes[i];keyframes2[index]=getAnimatableNone(valueName,animatableTemplateValue)}return keyframes2}function isTransitionDefined({when,delay:_delay,delayChildren,staggerChildren,staggerDirection,repeat,repeatType,repeatDelay,from,elapsed,...transition}){return!!Object.keys(transition).length}function getValueTransition(transition,key){return transition[key]||transition.default||transition}const MotionGlobalConfig={skipAnimations:!1},animateMotionValue=(valueName,value,target,transition={})=>onComplete=>{const valueTransition=getValueTransition(transition,valueName)||{},delay2=valueTransition.delay||transition.delay||0;let{elapsed=0}=transition;elapsed=elapsed-secondsToMilliseconds(delay2);const keyframes2=getKeyframes(value,valueName,target,valueTransition),originKeyframe=keyframes2[0],targetKeyframe=keyframes2[keyframes2.length-1],isOriginAnimatable=isAnimatable(valueName,originKeyframe),isTargetAnimatable=isAnimatable(valueName,targetKeyframe);let options={keyframes:keyframes2,velocity:value.getVelocity(),ease:"easeOut",...valueTransition,delay:-elapsed,onUpdate:v=>{value.set(v),valueTransition.onUpdate&&valueTransition.onUpdate(v)},onComplete:()=>{onComplete(),valueTransition.onComplete&&valueTransition.onComplete()}};if(isTransitionDefined(valueTransition)||(options={...options,...getDefaultTransition(valueName,options)}),options.duration&&(options.duration=secondsToMilliseconds(options.duration)),options.repeatDelay&&(options.repeatDelay=secondsToMilliseconds(options.repeatDelay)),!isOriginAnimatable||!isTargetAnimatable||instantAnimationState.current||valueTransition.type===!1||MotionGlobalConfig.skipAnimations)return createInstantAnimation(options);if(!transition.isHandoff&&value.owner&&value.owner.current instanceof HTMLElement&&!value.owner.getProps().onUpdate){const acceleratedAnimation=createAcceleratedAnimation(value,valueName,options);if(acceleratedAnimation)return acceleratedAnimation}return animateValue(options)};function isWillChangeMotionValue(value){return!!(isMotionValue(value)&&value.add)}const isNumericalString=v=>/^\-?\d*\.?\d+$/.test(v);function addUniqueItem(arr,item){arr.indexOf(item)===-1&&arr.push(item)}function removeItem(arr,item){const index=arr.indexOf(item);index>-1&&arr.splice(index,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(handler){return addUniqueItem(this.subscriptions,handler),()=>removeItem(this.subscriptions,handler)}notify(a,b,c){const numSubscriptions=this.subscriptions.length;if(numSubscriptions)if(numSubscriptions===1)this.subscriptions[0](a,b,c);else for(let i=0;i<numSubscriptions;i++){const handler=this.subscriptions[i];handler&&handler(a,b,c)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const isFloat=value=>!isNaN(parseFloat(value));class MotionValue{constructor(init,options={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(v,render=!0)=>{this.prev=this.current,this.current=v;const{delta,timestamp}=frameData;this.lastUpdated!==timestamp&&(this.timeDelta=delta,this.lastUpdated=timestamp,frame.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),render&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>frame.postRender(this.velocityCheck),this.velocityCheck=({timestamp})=>{timestamp!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=init,this.canTrackVelocity=isFloat(this.current),this.owner=options.owner}onChange(subscription){return this.on("change",subscription)}on(eventName,callback){this.events[eventName]||(this.events[eventName]=new SubscriptionManager);const unsubscribe=this.events[eventName].add(callback);return eventName==="change"?()=>{unsubscribe(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:unsubscribe}clearListeners(){for(const eventManagers in this.events)this.events[eventManagers].clear()}attach(passiveEffect,stopPassiveEffect){this.passiveEffect=passiveEffect,this.stopPassiveEffect=stopPassiveEffect}set(v,render=!0){!render||!this.passiveEffect?this.updateAndNotify(v,render):this.passiveEffect(v,this.updateAndNotify)}setWithVelocity(prev,current,delta){this.set(current),this.prev=prev,this.timeDelta=delta}jump(v){this.updateAndNotify(v),this.prev=v,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?velocityPerSecond(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(startAnimation){return this.stop(),new Promise(resolve=>{this.hasAnimated=!0,this.animation=startAnimation(resolve),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(init,options){return new MotionValue(init,options)}const testValueType=v=>type=>type.test(v),auto={test:v=>v==="auto",parse:v=>v},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=v=>dimensionValueTypes.find(testValueType(v)),valueTypes=[...dimensionValueTypes,color,complex],findValueType=v=>valueTypes.find(testValueType(v));function setMotionValue(visualElement,key,value){visualElement.hasValue(key)?visualElement.getValue(key).set(value):visualElement.addValue(key,motionValue(value))}function setTarget(visualElement,definition){const resolved=resolveVariant(visualElement,definition);let{transitionEnd={},transition={},...target}=resolved?visualElement.makeTargetAnimatable(resolved,!1):{};target={...target,...transitionEnd};for(const key in target){const value=resolveFinalValueInKeyframes(target[key]);setMotionValue(visualElement,key,value)}}function checkTargetForNewValues(visualElement,target,origin2){var _a,_b;const newValueKeys=Object.keys(target).filter(key=>!visualElement.hasValue(key)),numNewValues=newValueKeys.length;if(numNewValues)for(let i=0;i<numNewValues;i++){const key=newValueKeys[i],targetValue=target[key];let value=null;Array.isArray(targetValue)&&(value=targetValue[0]),value===null&&(value=(_b=(_a=origin2[key])!==null&&_a!==void 0?_a:visualElement.readValue(key))!==null&&_b!==void 0?_b:target[key]),value!=null&&(typeof value=="string"&&(isNumericalString(value)||isZeroValueString(value))?value=parseFloat(value):!findValueType(value)&&complex.test(targetValue)&&(value=getAnimatableNone(key,targetValue)),visualElement.addValue(key,motionValue(value,{owner:visualElement})),origin2[key]===void 0&&(origin2[key]=value),value!==null&&visualElement.setBaseTarget(key,value))}}function getOriginFromTransition(key,transition){return transition?(transition[key]||transition.default||transition).from:void 0}function getOrigin(target,transition,visualElement){const origin2={};for(const key in target){const transitionOrigin=getOriginFromTransition(key,transition);if(transitionOrigin!==void 0)origin2[key]=transitionOrigin;else{const value=visualElement.getValue(key);value&&(origin2[key]=value.get())}}return origin2}function shouldBlockAnimation({protectedKeys,needsAnimating},key){const shouldBlock=protectedKeys.hasOwnProperty(key)&&needsAnimating[key]!==!0;return needsAnimating[key]=!1,shouldBlock}function hasKeyframesChanged(value,target){const current=value.get();if(Array.isArray(target)){for(let i=0;i<target.length;i++)if(target[i]!==current)return!0}else return current!==target}function animateTarget(visualElement,definition,{delay:delay2=0,transitionOverride,type}={}){let{transition=visualElement.getDefaultTransition(),transitionEnd,...target}=visualElement.makeTargetAnimatable(definition);const willChange=visualElement.getValue("willChange");transitionOverride&&(transition=transitionOverride);const animations2=[],animationTypeState=type&&visualElement.animationState&&visualElement.animationState.getState()[type];for(const key in target){const value=visualElement.getValue(key),valueTarget=target[key];if(!value||valueTarget===void 0||animationTypeState&&shouldBlockAnimation(animationTypeState,key))continue;const valueTransition={delay:delay2,elapsed:0,...getValueTransition(transition||{},key)};if(window.HandoffAppearAnimations){const appearId=visualElement.getProps()[optimizedAppearDataAttribute];if(appearId){const elapsed=window.HandoffAppearAnimations(appearId,key,value,frame);elapsed!==null&&(valueTransition.elapsed=elapsed,valueTransition.isHandoff=!0)}}let canSkip=!valueTransition.isHandoff&&!hasKeyframesChanged(value,valueTarget);if(valueTransition.type==="spring"&&(value.getVelocity()||valueTransition.velocity)&&(canSkip=!1),value.animation&&(canSkip=!1),canSkip)continue;value.start(animateMotionValue(key,value,valueTarget,visualElement.shouldReduceMotion&&transformProps.has(key)?{type:!1}:valueTransition));const animation=value.animation;isWillChangeMotionValue(willChange)&&(willChange.add(key),animation.then(()=>willChange.remove(key))),animations2.push(animation)}return transitionEnd&&Promise.all(animations2).then(()=>{transitionEnd&&setTarget(visualElement,transitionEnd)}),animations2}function animateVariant(visualElement,variant,options={}){const resolved=resolveVariant(visualElement,variant,options.custom);let{transition=visualElement.getDefaultTransition()||{}}=resolved||{};options.transitionOverride&&(transition=options.transitionOverride);const getAnimation=resolved?()=>Promise.all(animateTarget(visualElement,resolved,options)):()=>Promise.resolve(),getChildAnimations=visualElement.variantChildren&&visualElement.variantChildren.size?(forwardDelay=0)=>{const{delayChildren=0,staggerChildren,staggerDirection}=transition;return animateChildren(visualElement,variant,delayChildren+forwardDelay,staggerChildren,staggerDirection,options)}:()=>Promise.resolve(),{when}=transition;if(when){const[first,last]=when==="beforeChildren"?[getAnimation,getChildAnimations]:[getChildAnimations,getAnimation];return first().then(()=>last())}else return Promise.all([getAnimation(),getChildAnimations(options.delay)])}function animateChildren(visualElement,variant,delayChildren=0,staggerChildren=0,staggerDirection=1,options){const animations2=[],maxStaggerDuration=(visualElement.variantChildren.size-1)*staggerChildren,generateStaggerDuration=staggerDirection===1?(i=0)=>i*staggerChildren:(i=0)=>maxStaggerDuration-i*staggerChildren;return Array.from(visualElement.variantChildren).sort(sortByTreeOrder).forEach((child,i)=>{child.notify("AnimationStart",variant),animations2.push(animateVariant(child,variant,{...options,delay:delayChildren+generateStaggerDuration(i)}).then(()=>child.notify("AnimationComplete",variant)))}),Promise.all(animations2)}function sortByTreeOrder(a,b){return a.sortNodePosition(b)}function animateVisualElement(visualElement,definition,options={}){visualElement.notify("AnimationStart",definition);let animation;if(Array.isArray(definition)){const animations2=definition.map(variant=>animateVariant(visualElement,variant,options));animation=Promise.all(animations2)}else if(typeof definition=="string")animation=animateVariant(visualElement,definition,options);else{const resolvedDefinition=typeof definition=="function"?resolveVariant(visualElement,definition,options.custom):definition;animation=Promise.all(animateTarget(visualElement,resolvedDefinition,options))}return animation.then(()=>visualElement.notify("AnimationComplete",definition))}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(visualElement){return animations2=>Promise.all(animations2.map(({animation,options})=>animateVisualElement(visualElement,animation,options)))}function createAnimationState(visualElement){let animate=animateList(visualElement);const state=createState();let isInitialRender=!0;const buildResolvedTypeValues=(acc,definition)=>{const resolved=resolveVariant(visualElement,definition);if(resolved){const{transition,transitionEnd,...target}=resolved;acc={...acc,...target,...transitionEnd}}return acc};function setAnimateFunction(makeAnimator){animate=makeAnimator(visualElement)}function animateChanges(options,changedActiveType){const props=visualElement.getProps(),context=visualElement.getVariantContext(!0)||{},animations2=[],removedKeys=new Set;let encounteredKeys={},removedVariantIndex=1/0;for(let i=0;i<numAnimationTypes;i++){const type=reversePriorityOrder[i],typeState=state[type],prop=props[type]!==void 0?props[type]:context[type],propIsVariant=isVariantLabel(prop),activeDelta=type===changedActiveType?typeState.isActive:null;activeDelta===!1&&(removedVariantIndex=i);let isInherited=prop===context[type]&&prop!==props[type]&&propIsVariant;if(isInherited&&isInitialRender&&visualElement.manuallyAnimateOnMount&&(isInherited=!1),typeState.protectedKeys={...encounteredKeys},!typeState.isActive&&activeDelta===null||!prop&&!typeState.prevProp||isAnimationControls(prop)||typeof prop=="boolean")continue;let shouldAnimateType=checkVariantsDidChange(typeState.prevProp,prop)||type===changedActiveType&&typeState.isActive&&!isInherited&&propIsVariant||i>removedVariantIndex&&propIsVariant,handledRemovedValues=!1;const definitionList=Array.isArray(prop)?prop:[prop];let resolvedValues=definitionList.reduce(buildResolvedTypeValues,{});activeDelta===!1&&(resolvedValues={});const{prevResolvedValues={}}=typeState,allKeys={...prevResolvedValues,...resolvedValues},markToAnimate=key=>{shouldAnimateType=!0,removedKeys.has(key)&&(handledRemovedValues=!0,removedKeys.delete(key)),typeState.needsAnimating[key]=!0};for(const key in allKeys){const next=resolvedValues[key],prev=prevResolvedValues[key];if(encounteredKeys.hasOwnProperty(key))continue;let valueHasChanged=!1;isKeyframesTarget(next)&&isKeyframesTarget(prev)?valueHasChanged=!shallowCompare(next,prev):valueHasChanged=next!==prev,valueHasChanged?next!==void 0?markToAnimate(key):removedKeys.add(key):next!==void 0&&removedKeys.has(key)?markToAnimate(key):typeState.protectedKeys[key]=!0}typeState.prevProp=prop,typeState.prevResolvedValues=resolvedValues,typeState.isActive&&(encounteredKeys={...encounteredKeys,...resolvedValues}),isInitialRender&&visualElement.blockInitialAnimation&&(shouldAnimateType=!1),shouldAnimateType&&(!isInherited||handledRemovedValues)&&animations2.push(...definitionList.map(animation=>({animation,options:{type,...options}})))}if(removedKeys.size){const fallbackAnimation={};removedKeys.forEach(key=>{const fallbackTarget=visualElement.getBaseTarget(key);fallbackTarget!==void 0&&(fallbackAnimation[key]=fallbackTarget)}),animations2.push({animation:fallbackAnimation})}let shouldAnimate=!!animations2.length;return isInitialRender&&(props.initial===!1||props.initial===props.animate)&&!visualElement.manuallyAnimateOnMount&&(shouldAnimate=!1),isInitialRender=!1,shouldAnimate?animate(animations2):Promise.resolve()}function setActive(type,isActive,options){var _a;if(state[type].isActive===isActive)return Promise.resolve();(_a=visualElement.variantChildren)===null||_a===void 0||_a.forEach(child=>{var _a2;return(_a2=child.animationState)===null||_a2===void 0?void 0:_a2.setActive(type,isActive)}),state[type].isActive=isActive;const animations2=animateChanges(options,type);for(const key in state)state[key].protectedKeys={};return animations2}return{animateChanges,setActive,setAnimateFunction,getState:()=>state}}function checkVariantsDidChange(prev,next){return typeof next=="string"?next!==prev:Array.isArray(next)?!shallowCompare(next,prev):!1}function createTypeState(isActive=!1){return{isActive,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class AnimationFeature extends Feature{constructor(node){super(node),node.animationState||(node.animationState=createAnimationState(node))}updateAnimationControlsSubscription(){const{animate}=this.node.getProps();this.unmount(),isAnimationControls(animate)&&(this.unmount=animate.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate}=this.node.getProps(),{animate:prevAnimate}=this.node.prevProps||{};animate!==prevAnimate&&this.updateAnimationControlsSubscription()}unmount(){}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent,onExitComplete,custom}=this.node.presenceContext,{isPresent:prevIsPresent}=this.node.prevPresenceContext||{};if(!this.node.animationState||isPresent===prevIsPresent)return;const exitAnimation=this.node.animationState.setActive("exit",!isPresent,{custom:custom??this.node.getProps().custom});onExitComplete&&!isPresent&&exitAnimation.then(()=>onExitComplete(this.id))}mount(){const{register}=this.node.presenceContext||{};register&&(this.unmount=register(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},distance=(a,b)=>Math.abs(a-b);function distance2D(a,b){const xDelta=distance(a.x,b.x),yDelta=distance(a.y,b.y);return Math.sqrt(xDelta**2+yDelta**2)}class PanSession{constructor(event,handlers,{transformPagePoint,contextWindow,dragSnapToOrigin=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const info2=getPanInfo(this.lastMoveEventInfo,this.history),isPanStarted=this.startEvent!==null,isDistancePastThreshold=distance2D(info2.offset,{x:0,y:0})>=3;if(!isPanStarted&&!isDistancePastThreshold)return;const{point:point2}=info2,{timestamp:timestamp2}=frameData;this.history.push({...point2,timestamp:timestamp2});const{onStart,onMove}=this.handlers;isPanStarted||(onStart&&onStart(this.lastMoveEvent,info2),this.startEvent=this.lastMoveEvent),onMove&&onMove(this.lastMoveEvent,info2)},this.handlePointerMove=(event2,info2)=>{this.lastMoveEvent=event2,this.lastMoveEventInfo=transformPoint(info2,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(event2,info2)=>{this.end();const{onEnd,onSessionEnd,resumeAnimation}=this.handlers;if(this.dragSnapToOrigin&&resumeAnimation&&resumeAnimation(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const panInfo=getPanInfo(event2.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(info2,this.transformPagePoint),this.history);this.startEvent&&onEnd&&onEnd(event2,panInfo),onSessionEnd&&onSessionEnd(event2,panInfo)},!isPrimaryPointer(event))return;this.dragSnapToOrigin=dragSnapToOrigin,this.handlers=handlers,this.transformPagePoint=transformPagePoint,this.contextWindow=contextWindow||window;const info=extractEventInfo(event),initialInfo=transformPoint(info,this.transformPagePoint),{point}=initialInfo,{timestamp}=frameData;this.history=[{...point,timestamp}];const{onSessionStart}=handlers;onSessionStart&&onSessionStart(event,getPanInfo(initialInfo,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(handlers){this.handlers=handlers}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(info,transformPagePoint){return transformPagePoint?{point:transformPagePoint(info.point)}:info}function subtractPoint(a,b){return{x:a.x-b.x,y:a.y-b.y}}function getPanInfo({point},history){return{point,delta:subtractPoint(point,lastDevicePoint(history)),offset:subtractPoint(point,startDevicePoint(history)),velocity:getVelocity(history,.1)}}function startDevicePoint(history){return history[0]}function lastDevicePoint(history){return history[history.length-1]}function getVelocity(history,timeDelta){if(history.length<2)return{x:0,y:0};let i=history.length-1,timestampedPoint=null;const lastPoint=lastDevicePoint(history);for(;i>=0&&(timestampedPoint=history[i],!(lastPoint.timestamp-timestampedPoint.timestamp>secondsToMilliseconds(timeDelta)));)i--;if(!timestampedPoint)return{x:0,y:0};const time=millisecondsToSeconds(lastPoint.timestamp-timestampedPoint.timestamp);if(time===0)return{x:0,y:0};const currentVelocity={x:(lastPoint.x-timestampedPoint.x)/time,y:(lastPoint.y-timestampedPoint.y)/time};return currentVelocity.x===1/0&&(currentVelocity.x=0),currentVelocity.y===1/0&&(currentVelocity.y=0),currentVelocity}function calcLength(axis){return axis.max-axis.min}function isNear(value,target=0,maxDistance=.01){return Math.abs(value-target)<=maxDistance}function calcAxisDelta(delta,source,target,origin2=.5){delta.origin=origin2,delta.originPoint=mix(source.min,source.max,delta.origin),delta.scale=calcLength(target)/calcLength(source),(isNear(delta.scale,1,1e-4)||isNaN(delta.scale))&&(delta.scale=1),delta.translate=mix(target.min,target.max,delta.origin)-delta.originPoint,(isNear(delta.translate)||isNaN(delta.translate))&&(delta.translate=0)}function calcBoxDelta(delta,source,target,origin2){calcAxisDelta(delta.x,source.x,target.x,origin2?origin2.originX:void 0),calcAxisDelta(delta.y,source.y,target.y,origin2?origin2.originY:void 0)}function calcRelativeAxis(target,relative,parent){target.min=parent.min+relative.min,target.max=target.min+calcLength(relative)}function calcRelativeBox(target,relative,parent){calcRelativeAxis(target.x,relative.x,parent.x),calcRelativeAxis(target.y,relative.y,parent.y)}function calcRelativeAxisPosition(target,layout2,parent){target.min=layout2.min-parent.min,target.max=target.min+calcLength(layout2)}function calcRelativePosition(target,layout2,parent){calcRelativeAxisPosition(target.x,layout2.x,parent.x),calcRelativeAxisPosition(target.y,layout2.y,parent.y)}function applyConstraints(point,{min,max},elastic){return min!==void 0&&point<min?point=elastic?mix(min,point,elastic.min):Math.max(point,min):max!==void 0&&point>max&&(point=elastic?mix(max,point,elastic.max):Math.min(point,max)),point}function calcRelativeAxisConstraints(axis,min,max){return{min:min!==void 0?axis.min+min:void 0,max:max!==void 0?axis.max+max-(axis.max-axis.min):void 0}}function calcRelativeConstraints(layoutBox,{top,left,bottom,right}){return{x:calcRelativeAxisConstraints(layoutBox.x,left,right),y:calcRelativeAxisConstraints(layoutBox.y,top,bottom)}}function calcViewportAxisConstraints(layoutAxis,constraintsAxis){let min=constraintsAxis.min-layoutAxis.min,max=constraintsAxis.max-layoutAxis.max;return constraintsAxis.max-constraintsAxis.min<layoutAxis.max-layoutAxis.min&&([min,max]=[max,min]),{min,max}}function calcViewportConstraints(layoutBox,constraintsBox){return{x:calcViewportAxisConstraints(layoutBox.x,constraintsBox.x),y:calcViewportAxisConstraints(layoutBox.y,constraintsBox.y)}}function calcOrigin(source,target){let origin2=.5;const sourceLength=calcLength(source),targetLength=calcLength(target);return targetLength>sourceLength?origin2=progress(target.min,target.max-sourceLength,source.min):sourceLength>targetLength&&(origin2=progress(source.min,source.max-targetLength,target.min)),clamp(0,1,origin2)}function rebaseAxisConstraints(layout2,constraints){const relativeConstraints={};return constraints.min!==void 0&&(relativeConstraints.min=constraints.min-layout2.min),constraints.max!==void 0&&(relativeConstraints.max=constraints.max-layout2.min),relativeConstraints}const defaultElastic=.35;function resolveDragElastic(dragElastic=defaultElastic){return dragElastic===!1?dragElastic=0:dragElastic===!0&&(dragElastic=defaultElastic),{x:resolveAxisElastic(dragElastic,"left","right"),y:resolveAxisElastic(dragElastic,"top","bottom")}}function resolveAxisElastic(dragElastic,minLabel,maxLabel){return{min:resolvePointElastic(dragElastic,minLabel),max:resolvePointElastic(dragElastic,maxLabel)}}function resolvePointElastic(dragElastic,label){return typeof dragElastic=="number"?dragElastic:dragElastic[label]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(callback){return[callback("x"),callback("y")]}function convertBoundingBoxToBox({top,left,right,bottom}){return{x:{min:left,max:right},y:{min:top,max:bottom}}}function convertBoxToBoundingBox({x,y}){return{top:y.min,right:x.max,bottom:y.max,left:x.min}}function transformBoxPoints(point,transformPoint2){if(!transformPoint2)return point;const topLeft=transformPoint2({x:point.left,y:point.top}),bottomRight=transformPoint2({x:point.right,y:point.bottom});return{top:topLeft.y,left:topLeft.x,bottom:bottomRight.y,right:bottomRight.x}}function isIdentityScale(scale2){return scale2===void 0||scale2===1}function hasScale({scale:scale2,scaleX,scaleY}){return!isIdentityScale(scale2)||!isIdentityScale(scaleX)||!isIdentityScale(scaleY)}function hasTransform(values){return hasScale(values)||has2DTranslate(values)||values.z||values.rotate||values.rotateX||values.rotateY}function has2DTranslate(values){return is2DTranslate(values.x)||is2DTranslate(values.y)}function is2DTranslate(value){return value&&value!=="0%"}function scalePoint(point,scale2,originPoint){const distanceFromOrigin=point-originPoint,scaled=scale2*distanceFromOrigin;return originPoint+scaled}function applyPointDelta(point,translate,scale2,originPoint,boxScale){return boxScale!==void 0&&(point=scalePoint(point,boxScale,originPoint)),scalePoint(point,scale2,originPoint)+translate}function applyAxisDelta(axis,translate=0,scale2=1,originPoint,boxScale){axis.min=applyPointDelta(axis.min,translate,scale2,originPoint,boxScale),axis.max=applyPointDelta(axis.max,translate,scale2,originPoint,boxScale)}function applyBoxDelta(box,{x,y}){applyAxisDelta(box.x,x.translate,x.scale,x.originPoint),applyAxisDelta(box.y,y.translate,y.scale,y.originPoint)}function applyTreeDeltas(box,treeScale,treePath,isSharedTransition=!1){const treeLength=treePath.length;if(!treeLength)return;treeScale.x=treeScale.y=1;let node,delta;for(let i=0;i<treeLength;i++){node=treePath[i],delta=node.projectionDelta;const instance=node.instance;instance&&instance.style&&instance.style.display==="contents"||(isSharedTransition&&node.options.layoutScroll&&node.scroll&&node!==node.root&&transformBox(box,{x:-node.scroll.offset.x,y:-node.scroll.offset.y}),delta&&(treeScale.x*=delta.x.scale,treeScale.y*=delta.y.scale,applyBoxDelta(box,delta)),isSharedTransition&&hasTransform(node.latestValues)&&transformBox(box,node.latestValues))}treeScale.x=snapToDefault(treeScale.x),treeScale.y=snapToDefault(treeScale.y)}function snapToDefault(scale2){return Number.isInteger(scale2)||scale2>1.0000000000001||scale2<.999999999999?scale2:1}function translateAxis(axis,distance2){axis.min=axis.min+distance2,axis.max=axis.max+distance2}function transformAxis(axis,transforms,[key,scaleKey,originKey]){const axisOrigin=transforms[originKey]!==void 0?transforms[originKey]:.5,originPoint=mix(axis.min,axis.max,axisOrigin);applyAxisDelta(axis,transforms[key],transforms[scaleKey],originPoint,transforms.scale)}const xKeys$1=["x","scaleX","originX"],yKeys$1=["y","scaleY","originY"];function transformBox(box,transform){transformAxis(box.x,transform,xKeys$1),transformAxis(box.y,transform,yKeys$1)}function measureViewportBox(instance,transformPoint2){return convertBoundingBoxToBox(transformBoxPoints(instance.getBoundingClientRect(),transformPoint2))}function measurePageBox(element,rootProjectionNode2,transformPagePoint){const viewportBox=measureViewportBox(element,transformPagePoint),{scroll}=rootProjectionNode2;return scroll&&(translateAxis(viewportBox.x,scroll.offset.x),translateAxis(viewportBox.y,scroll.offset.y)),viewportBox}const getContextWindow=({current})=>current?current.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(visualElement){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=visualElement}start(originEvent,{snapToCursor=!1}={}){const{presenceContext}=this.visualElement;if(presenceContext&&presenceContext.isPresent===!1)return;const onSessionStart=event=>{const{dragSnapToOrigin:dragSnapToOrigin2}=this.getProps();dragSnapToOrigin2?this.pauseAnimation():this.stopAnimation(),snapToCursor&&this.snapToCursor(extractEventInfo(event,"page").point)},onStart=(event,info)=>{const{drag:drag2,dragPropagation,onDragStart}=this.getProps();if(drag2&&!dragPropagation&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=getGlobalLock(drag2),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(axis=>{let current=this.getAxisMotionValue(axis).get()||0;if(percent.test(current)){const{projection}=this.visualElement;if(projection&&projection.layout){const measuredAxis=projection.layout.layoutBox[axis];measuredAxis&&(current=calcLength(measuredAxis)*(parseFloat(current)/100))}}this.originPoint[axis]=current}),onDragStart&&frame.update(()=>onDragStart(event,info),!1,!0);const{animationState}=this.visualElement;animationState&&animationState.setActive("whileDrag",!0)},onMove=(event,info)=>{const{dragPropagation,dragDirectionLock,onDirectionLock,onDrag}=this.getProps();if(!dragPropagation&&!this.openGlobalLock)return;const{offset}=info;if(dragDirectionLock&&this.currentDirection===null){this.currentDirection=getCurrentDirection(offset),this.currentDirection!==null&&onDirectionLock&&onDirectionLock(this.currentDirection);return}this.updateAxis("x",info.point,offset),this.updateAxis("y",info.point,offset),this.visualElement.render(),onDrag&&onDrag(event,info)},onSessionEnd=(event,info)=>this.stop(event,info),resumeAnimation=()=>eachAxis(axis=>{var _a;return this.getAnimationState(axis)==="paused"&&((_a=this.getAxisMotionValue(axis).animation)===null||_a===void 0?void 0:_a.play())}),{dragSnapToOrigin}=this.getProps();this.panSession=new PanSession(originEvent,{onSessionStart,onStart,onMove,onSessionEnd,resumeAnimation},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin,contextWindow:getContextWindow(this.visualElement)})}stop(event,info){const isDragging=this.isDragging;if(this.cancel(),!isDragging)return;const{velocity}=info;this.startAnimation(velocity);const{onDragEnd}=this.getProps();onDragEnd&&frame.update(()=>onDragEnd(event,info))}cancel(){this.isDragging=!1;const{projection,animationState}=this.visualElement;projection&&(projection.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation}=this.getProps();!dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),animationState&&animationState.setActive("whileDrag",!1)}updateAxis(axis,_point,offset){const{drag:drag2}=this.getProps();if(!offset||!shouldDrag(axis,drag2,this.currentDirection))return;const axisValue=this.getAxisMotionValue(axis);let next=this.originPoint[axis]+offset[axis];this.constraints&&this.constraints[axis]&&(next=applyConstraints(next,this.constraints[axis],this.elastic[axis])),axisValue.set(next)}resolveConstraints(){var _a;const{dragConstraints,dragElastic}=this.getProps(),layout2=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(_a=this.visualElement.projection)===null||_a===void 0?void 0:_a.layout,prevConstraints=this.constraints;dragConstraints&&isRefObject(dragConstraints)?this.constraints||(this.constraints=this.resolveRefConstraints()):dragConstraints&&layout2?this.constraints=calcRelativeConstraints(layout2.layoutBox,dragConstraints):this.constraints=!1,this.elastic=resolveDragElastic(dragElastic),prevConstraints!==this.constraints&&layout2&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(axis=>{this.getAxisMotionValue(axis)&&(this.constraints[axis]=rebaseAxisConstraints(layout2.layoutBox[axis],this.constraints[axis]))})}resolveRefConstraints(){const{dragConstraints:constraints,onMeasureDragConstraints}=this.getProps();if(!constraints||!isRefObject(constraints))return!1;const constraintsElement=constraints.current,{projection}=this.visualElement;if(!projection||!projection.layout)return!1;const constraintsBox=measurePageBox(constraintsElement,projection.root,this.visualElement.getTransformPagePoint());let measuredConstraints=calcViewportConstraints(projection.layout.layoutBox,constraintsBox);if(onMeasureDragConstraints){const userConstraints=onMeasureDragConstraints(convertBoxToBoundingBox(measuredConstraints));this.hasMutatedConstraints=!!userConstraints,userConstraints&&(measuredConstraints=convertBoundingBoxToBox(userConstraints))}return measuredConstraints}startAnimation(velocity){const{drag:drag2,dragMomentum,dragElastic,dragTransition,dragSnapToOrigin,onDragTransitionEnd}=this.getProps(),constraints=this.constraints||{},momentumAnimations=eachAxis(axis=>{if(!shouldDrag(axis,drag2,this.currentDirection))return;let transition=constraints&&constraints[axis]||{};dragSnapToOrigin&&(transition={min:0,max:0});const bounceStiffness=dragElastic?200:1e6,bounceDamping=dragElastic?40:1e7,inertia2={type:"inertia",velocity:dragMomentum?velocity[axis]:0,bounceStiffness,bounceDamping,timeConstant:750,restDelta:1,restSpeed:10,...dragTransition,...transition};return this.startAxisValueAnimation(axis,inertia2)});return Promise.all(momentumAnimations).then(onDragTransitionEnd)}startAxisValueAnimation(axis,transition){const axisValue=this.getAxisMotionValue(axis);return axisValue.start(animateMotionValue(axis,axisValue,0,transition))}stopAnimation(){eachAxis(axis=>this.getAxisMotionValue(axis).stop())}pauseAnimation(){eachAxis(axis=>{var _a;return(_a=this.getAxisMotionValue(axis).animation)===null||_a===void 0?void 0:_a.pause()})}getAnimationState(axis){var _a;return(_a=this.getAxisMotionValue(axis).animation)===null||_a===void 0?void 0:_a.state}getAxisMotionValue(axis){const dragKey="_drag"+axis.toUpperCase(),props=this.visualElement.getProps(),externalMotionValue=props[dragKey];return externalMotionValue||this.visualElement.getValue(axis,(props.initial?props.initial[axis]:void 0)||0)}snapToCursor(point){eachAxis(axis=>{const{drag:drag2}=this.getProps();if(!shouldDrag(axis,drag2,this.currentDirection))return;const{projection}=this.visualElement,axisValue=this.getAxisMotionValue(axis);if(projection&&projection.layout){const{min,max}=projection.layout.layoutBox[axis];axisValue.set(point[axis]-mix(min,max,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:drag2,dragConstraints}=this.getProps(),{projection}=this.visualElement;if(!isRefObject(dragConstraints)||!projection||!this.constraints)return;this.stopAnimation();const boxProgress={x:0,y:0};eachAxis(axis=>{const axisValue=this.getAxisMotionValue(axis);if(axisValue){const latest=axisValue.get();boxProgress[axis]=calcOrigin({min:latest,max:latest},this.constraints[axis])}});const{transformTemplate}=this.visualElement.getProps();this.visualElement.current.style.transform=transformTemplate?transformTemplate({},""):"none",projection.root&&projection.root.updateScroll(),projection.updateLayout(),this.resolveConstraints(),eachAxis(axis=>{if(!shouldDrag(axis,drag2,null))return;const axisValue=this.getAxisMotionValue(axis),{min,max}=this.constraints[axis];axisValue.set(mix(min,max,boxProgress[axis]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const element=this.visualElement.current,stopPointerListener=addPointerEvent(element,"pointerdown",event=>{const{drag:drag2,dragListener=!0}=this.getProps();drag2&&dragListener&&this.start(event)}),measureDragConstraints=()=>{const{dragConstraints}=this.getProps();isRefObject(dragConstraints)&&(this.constraints=this.resolveRefConstraints())},{projection}=this.visualElement,stopMeasureLayoutListener=projection.addEventListener("measure",measureDragConstraints);projection&&!projection.layout&&(projection.root&&projection.root.updateScroll(),projection.updateLayout()),measureDragConstraints();const stopResizeListener=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),stopLayoutUpdateListener=projection.addEventListener("didUpdate",({delta,hasLayoutChanged})=>{this.isDragging&&hasLayoutChanged&&(eachAxis(axis=>{const motionValue2=this.getAxisMotionValue(axis);motionValue2&&(this.originPoint[axis]+=delta[axis].translate,motionValue2.set(motionValue2.get()+delta[axis].translate))}),this.visualElement.render())});return()=>{stopResizeListener(),stopPointerListener(),stopMeasureLayoutListener(),stopLayoutUpdateListener&&stopLayoutUpdateListener()}}getProps(){const props=this.visualElement.getProps(),{drag:drag2=!1,dragDirectionLock=!1,dragPropagation=!1,dragConstraints=!1,dragElastic=defaultElastic,dragMomentum=!0}=props;return{...props,drag:drag2,dragDirectionLock,dragPropagation,dragConstraints,dragElastic,dragMomentum}}}function shouldDrag(direction,drag2,currentDirection){return(drag2===!0||drag2===direction)&&(currentDirection===null||currentDirection===direction)}function getCurrentDirection(offset,lockThreshold=10){let direction=null;return Math.abs(offset.y)>lockThreshold?direction="y":Math.abs(offset.x)>lockThreshold&&(direction="x"),direction}class DragGesture extends Feature{constructor(node){super(node),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(node)}mount(){const{dragControls}=this.node.getProps();dragControls&&(this.removeGroupControls=dragControls.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=handler=>(event,info)=>{handler&&frame.update(()=>handler(event,info))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(pointerDownEvent){this.session=new PanSession(pointerDownEvent,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart,onPanStart,onPan,onPanEnd}=this.node.getProps();return{onSessionStart:asyncHandler(onPanSessionStart),onStart:asyncHandler(onPanStart),onMove:onPan,onEnd:(event,info)=>{delete this.session,onPanEnd&&frame.update(()=>onPanEnd(event,info))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",event=>this.onPointerDown(event))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function usePresence(){const context=reactExports.useContext(PresenceContext);if(context===null)return[!0,null];const{isPresent,onExitComplete,register}=context,id2=reactExports.useId();return reactExports.useEffect(()=>register(id2),[]),!isPresent&&onExitComplete?[!1,()=>onExitComplete&&onExitComplete(id2)]:[!0]}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(pixels,axis){return axis.max===axis.min?0:pixels/(axis.max-axis.min)*100}const correctBorderRadius={correct:(latest,node)=>{if(!node.target)return latest;if(typeof latest=="string")if(px.test(latest))latest=parseFloat(latest);else return latest;const x=pixelsToPercent(latest,node.target.x),y=pixelsToPercent(latest,node.target.y);return`${x}% ${y}%`}},correctBoxShadow={correct:(latest,{treeScale,projectionDelta})=>{const original=latest,shadow=complex.parse(latest);if(shadow.length>5)return original;const template=complex.createTransformer(latest),offset=typeof shadow[0]!="number"?1:0,xScale=projectionDelta.x.scale*treeScale.x,yScale=projectionDelta.y.scale*treeScale.y;shadow[0+offset]/=xScale,shadow[1+offset]/=yScale;const averageScale=mix(xScale,yScale,.5);return typeof shadow[2+offset]=="number"&&(shadow[2+offset]/=averageScale),typeof shadow[3+offset]=="number"&&(shadow[3+offset]/=averageScale),template(shadow)}};class MeasureLayoutWithContext extends React.Component{componentDidMount(){const{visualElement,layoutGroup,switchLayoutGroup,layoutId}=this.props,{projection}=visualElement;addScaleCorrector(defaultScaleCorrectors),projection&&(layoutGroup.group&&layoutGroup.group.add(projection),switchLayoutGroup&&switchLayoutGroup.register&&layoutId&&switchLayoutGroup.register(projection),projection.root.didUpdate(),projection.addEventListener("animationComplete",()=>{this.safeToRemove()}),projection.setOptions({...projection.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(prevProps){const{layoutDependency,visualElement,drag:drag2,isPresent}=this.props,projection=visualElement.projection;return projection&&(projection.isPresent=isPresent,drag2||prevProps.layoutDependency!==layoutDependency||layoutDependency===void 0?projection.willUpdate():this.safeToRemove(),prevProps.isPresent!==isPresent&&(isPresent?projection.promote():projection.relegate()||frame.postRender(()=>{const stack=projection.getStack();(!stack||!stack.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection}=this.props.visualElement;projection&&(projection.root.didUpdate(),queueMicrotask(()=>{!projection.currentAnimation&&projection.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement,layoutGroup,switchLayoutGroup:promoteContext}=this.props,{projection}=visualElement;projection&&(projection.scheduleCheckAfterUnmount(),layoutGroup&&layoutGroup.group&&layoutGroup.group.remove(projection),promoteContext&&promoteContext.deregister&&promoteContext.deregister(projection))}safeToRemove(){const{safeToRemove}=this.props;safeToRemove&&safeToRemove()}render(){return null}}function MeasureLayout(props){const[isPresent,safeToRemove]=usePresence(),layoutGroup=reactExports.useContext(LayoutGroupContext);return React.createElement(MeasureLayoutWithContext,{...props,layoutGroup,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent,safeToRemove})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=value=>typeof value=="string"?parseFloat(value):value,isPx=value=>typeof value=="number"||px.test(value);function mixValues(target,follow,lead,progress2,shouldCrossfadeOpacity,isOnlyMember){shouldCrossfadeOpacity?(target.opacity=mix(0,lead.opacity!==void 0?lead.opacity:1,easeCrossfadeIn(progress2)),target.opacityExit=mix(follow.opacity!==void 0?follow.opacity:1,0,easeCrossfadeOut(progress2))):isOnlyMember&&(target.opacity=mix(follow.opacity!==void 0?follow.opacity:1,lead.opacity!==void 0?lead.opacity:1,progress2));for(let i=0;i<numBorders;i++){const borderLabel=`border${borders[i]}Radius`;let followRadius=getRadius(follow,borderLabel),leadRadius=getRadius(lead,borderLabel);if(followRadius===void 0&&leadRadius===void 0)continue;followRadius||(followRadius=0),leadRadius||(leadRadius=0),followRadius===0||leadRadius===0||isPx(followRadius)===isPx(leadRadius)?(target[borderLabel]=Math.max(mix(asNumber(followRadius),asNumber(leadRadius),progress2),0),(percent.test(leadRadius)||percent.test(followRadius))&&(target[borderLabel]+="%")):target[borderLabel]=leadRadius}(follow.rotate||lead.rotate)&&(target.rotate=mix(follow.rotate||0,lead.rotate||0,progress2))}function getRadius(values,radiusName){return values[radiusName]!==void 0?values[radiusName]:values.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(min,max,easing){return p2=>p2<min?0:p2>max?1:easing(progress(min,max,p2))}function copyAxisInto(axis,originAxis){axis.min=originAxis.min,axis.max=originAxis.max}function copyBoxInto(box,originBox){copyAxisInto(box.x,originBox.x),copyAxisInto(box.y,originBox.y)}function removePointDelta(point,translate,scale2,originPoint,boxScale){return point-=translate,point=scalePoint(point,1/scale2,originPoint),boxScale!==void 0&&(point=scalePoint(point,1/boxScale,originPoint)),point}function removeAxisDelta(axis,translate=0,scale2=1,origin2=.5,boxScale,originAxis=axis,sourceAxis=axis){if(percent.test(translate)&&(translate=parseFloat(translate),translate=mix(sourceAxis.min,sourceAxis.max,translate/100)-sourceAxis.min),typeof translate!="number")return;let originPoint=mix(originAxis.min,originAxis.max,origin2);axis===originAxis&&(originPoint-=translate),axis.min=removePointDelta(axis.min,translate,scale2,originPoint,boxScale),axis.max=removePointDelta(axis.max,translate,scale2,originPoint,boxScale)}function removeAxisTransforms(axis,transforms,[key,scaleKey,originKey],origin2,sourceAxis){removeAxisDelta(axis,transforms[key],transforms[scaleKey],transforms[originKey],transforms.scale,origin2,sourceAxis)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(box,transforms,originBox,sourceBox){removeAxisTransforms(box.x,transforms,xKeys,originBox?originBox.x:void 0,sourceBox?sourceBox.x:void 0),removeAxisTransforms(box.y,transforms,yKeys,originBox?originBox.y:void 0,sourceBox?sourceBox.y:void 0)}function isAxisDeltaZero(delta){return delta.translate===0&&delta.scale===1}function isDeltaZero(delta){return isAxisDeltaZero(delta.x)&&isAxisDeltaZero(delta.y)}function boxEquals(a,b){return a.x.min===b.x.min&&a.x.max===b.x.max&&a.y.min===b.y.min&&a.y.max===b.y.max}function boxEqualsRounded(a,b){return Math.round(a.x.min)===Math.round(b.x.min)&&Math.round(a.x.max)===Math.round(b.x.max)&&Math.round(a.y.min)===Math.round(b.y.min)&&Math.round(a.y.max)===Math.round(b.y.max)}function aspectRatio(box){return calcLength(box.x)/calcLength(box.y)}class NodeStack{constructor(){this.members=[]}add(node){addUniqueItem(this.members,node),node.scheduleRender()}remove(node){if(removeItem(this.members,node),node===this.prevLead&&(this.prevLead=void 0),node===this.lead){const prevLead=this.members[this.members.length-1];prevLead&&this.promote(prevLead)}}relegate(node){const indexOfNode=this.members.findIndex(member=>node===member);if(indexOfNode===0)return!1;let prevLead;for(let i=indexOfNode;i>=0;i--){const member=this.members[i];if(member.isPresent!==!1){prevLead=member;break}}return prevLead?(this.promote(prevLead),!0):!1}promote(node,preserveFollowOpacity){const prevLead=this.lead;if(node!==prevLead&&(this.prevLead=prevLead,this.lead=node,node.show(),prevLead)){prevLead.instance&&prevLead.scheduleRender(),node.scheduleRender(),node.resumeFrom=prevLead,preserveFollowOpacity&&(node.resumeFrom.preserveOpacity=!0),prevLead.snapshot&&(node.snapshot=prevLead.snapshot,node.snapshot.latestValues=prevLead.animationValues||prevLead.latestValues),node.root&&node.root.isUpdating&&(node.isLayoutDirty=!0);const{crossfade}=node.options;crossfade===!1&&prevLead.hide()}}exitAnimationComplete(){this.members.forEach(node=>{const{options,resumingFrom}=node;options.onExitComplete&&options.onExitComplete(),resumingFrom&&resumingFrom.options.onExitComplete&&resumingFrom.options.onExitComplete()})}scheduleRender(){this.members.forEach(node=>{node.instance&&node.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(delta,treeScale,latestTransform){let transform="";const xTranslate=delta.x.translate/treeScale.x,yTranslate=delta.y.translate/treeScale.y;if((xTranslate||yTranslate)&&(transform=`translate3d(${xTranslate}px, ${yTranslate}px, 0) `),(treeScale.x!==1||treeScale.y!==1)&&(transform+=`scale(${1/treeScale.x}, ${1/treeScale.y}) `),latestTransform){const{rotate,rotateX,rotateY}=latestTransform;rotate&&(transform+=`rotate(${rotate}deg) `),rotateX&&(transform+=`rotateX(${rotateX}deg) `),rotateY&&(transform+=`rotateY(${rotateY}deg) `)}const elementScaleX=delta.x.scale*treeScale.x,elementScaleY=delta.y.scale*treeScale.y;return(elementScaleX!==1||elementScaleY!==1)&&(transform+=`scale(${elementScaleX}, ${elementScaleY})`),transform||"none"}const compareByDepth=(a,b)=>a.depth-b.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(child){addUniqueItem(this.children,child),this.isDirty=!0}remove(child){removeItem(this.children,child),this.isDirty=!0}forEach(callback){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(callback)}}function delay(callback,timeout){const start=performance.now(),checkElapsed=({timestamp})=>{const elapsed=timestamp-start;elapsed>=timeout&&(cancelFrame(checkElapsed),callback(elapsed-timeout))};return frame.read(checkElapsed,!0),()=>cancelFrame(checkElapsed)}function record(data){window.MotionDebug&&window.MotionDebug.record(data)}function isSVGElement(element){return element instanceof SVGElement&&element.tagName!=="svg"}function animateSingleValue(value,keyframes2,options){const motionValue$1=isMotionValue(value)?value:motionValue(value);return motionValue$1.start(animateMotionValue("",motionValue$1,keyframes2,options)),motionValue$1.animation}const transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;const projectionFrameData={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function createProjectionNode({attachResizeListener,defaultParent,measureScroll,checkIsScrollRoot,resetTransform}){return class{constructor(latestValues={},parent=defaultParent==null?void 0:defaultParent()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,projectionFrameData.totalNodes=projectionFrameData.resolvedTargetDeltas=projectionFrameData.recalculatedProjection=0,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),record(projectionFrameData)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=latestValues,this.root=parent?parent.root||parent:this,this.path=parent?[...parent.path,parent]:[],this.parent=parent,this.depth=parent?parent.depth+1:0;for(let i=0;i<this.path.length;i++)this.path[i].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(name2,handler){return this.eventHandlers.has(name2)||this.eventHandlers.set(name2,new SubscriptionManager),this.eventHandlers.get(name2).add(handler)}notifyListeners(name2,...args){const subscriptionManager=this.eventHandlers.get(name2);subscriptionManager&&subscriptionManager.notify(...args)}hasListeners(name2){return this.eventHandlers.has(name2)}mount(instance,isLayoutDirty=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(instance),this.instance=instance;const{layoutId,layout:layout2,visualElement}=this.options;if(visualElement&&!visualElement.current&&visualElement.mount(instance),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),isLayoutDirty&&(layout2||layoutId)&&(this.isLayoutDirty=!0),attachResizeListener){let cancelDelay;const resizeUnblockUpdate=()=>this.root.updateBlockedByResize=!1;attachResizeListener(instance,()=>{this.root.updateBlockedByResize=!0,cancelDelay&&cancelDelay(),cancelDelay=delay(resizeUnblockUpdate,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}layoutId&&this.root.registerSharedNode(layoutId,this),this.options.animate!==!1&&visualElement&&(layoutId||layout2)&&this.addEventListener("didUpdate",({delta,hasLayoutChanged,hasRelativeTargetChanged,layout:newLayout})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const layoutTransition=this.options.transition||visualElement.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart,onLayoutAnimationComplete}=visualElement.getProps(),targetChanged=!this.targetLayout||!boxEqualsRounded(this.targetLayout,newLayout)||hasRelativeTargetChanged,hasOnlyRelativeTargetChanged=!hasLayoutChanged&&hasRelativeTargetChanged;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||hasOnlyRelativeTargetChanged||hasLayoutChanged&&(targetChanged||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(delta,hasOnlyRelativeTargetChanged);const animationOptions={...getValueTransition(layoutTransition,"layout"),onPlay:onLayoutAnimationStart,onComplete:onLayoutAnimationComplete};(visualElement.shouldReduceMotion||this.options.layoutRoot)&&(animationOptions.delay=0,animationOptions.type=!1),this.startAnimation(animationOptions)}else hasLayoutChanged||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=newLayout})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const stack=this.getStack();stack&&stack.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetRotation),this.animationId++)}getTransformTemplate(){const{visualElement}=this.options;return visualElement&&visualElement.getProps().transformTemplate}willUpdate(shouldNotifyListeners=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const node=this.path[i];node.shouldResetTransform=!0,node.updateScroll("snapshot"),node.options.layoutRoot&&node.willUpdate(!1)}const{layoutId,layout:layout2}=this.options;if(layoutId===void 0&&!layout2)return;const transformTemplate=this.getTransformTemplate();this.prevTransformTemplateValue=transformTemplate?transformTemplate(this.latestValues,""):void 0,this.updateSnapshot(),shouldNotifyListeners&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const now=performance.now();frameData.delta=clamp(0,1e3/60,now-frameData.timestamp),frameData.timestamp=now,frameData.isProcessing=!0,steps.update.process(frameData),steps.preRender.process(frameData),steps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let i=0;i<this.path.length;i++)this.path[i].updateScroll();const prevLayout=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement}=this.options;visualElement&&visualElement.notify("LayoutMeasure",this.layout.layoutBox,prevLayout?prevLayout.layoutBox:void 0)}updateScroll(phase="measure"){let needsMeasurement=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===phase&&(needsMeasurement=!1),needsMeasurement&&(this.scroll={animationId:this.root.animationId,phase,isRoot:checkIsScrollRoot(this.instance),offset:measureScroll(this.instance)})}resetTransform(){if(!resetTransform)return;const isResetRequested=this.isLayoutDirty||this.shouldResetTransform,hasProjection=this.projectionDelta&&!isDeltaZero(this.projectionDelta),transformTemplate=this.getTransformTemplate(),transformTemplateValue=transformTemplate?transformTemplate(this.latestValues,""):void 0,transformTemplateHasChanged=transformTemplateValue!==this.prevTransformTemplateValue;isResetRequested&&(hasProjection||hasTransform(this.latestValues)||transformTemplateHasChanged)&&(resetTransform(this.instance,transformTemplateValue),this.shouldResetTransform=!1,this.scheduleRender())}measure(removeTransform=!0){const pageBox=this.measurePageBox();let layoutBox=this.removeElementScroll(pageBox);return removeTransform&&(layoutBox=this.removeTransform(layoutBox)),roundBox(layoutBox),{animationId:this.root.animationId,measuredBox:pageBox,layoutBox,latestValues:{},source:this.id}}measurePageBox(){const{visualElement}=this.options;if(!visualElement)return createBox();const box=visualElement.measureViewportBox(),{scroll}=this.root;return scroll&&(translateAxis(box.x,scroll.offset.x),translateAxis(box.y,scroll.offset.y)),box}removeElementScroll(box){const boxWithoutScroll=createBox();copyBoxInto(boxWithoutScroll,box);for(let i=0;i<this.path.length;i++){const node=this.path[i],{scroll,options}=node;if(node!==this.root&&scroll&&options.layoutScroll){if(scroll.isRoot){copyBoxInto(boxWithoutScroll,box);const{scroll:rootScroll}=this.root;rootScroll&&(translateAxis(boxWithoutScroll.x,-rootScroll.offset.x),translateAxis(boxWithoutScroll.y,-rootScroll.offset.y))}translateAxis(boxWithoutScroll.x,scroll.offset.x),translateAxis(boxWithoutScroll.y,scroll.offset.y)}}return boxWithoutScroll}applyTransform(box,transformOnly=!1){const withTransforms=createBox();copyBoxInto(withTransforms,box);for(let i=0;i<this.path.length;i++){const node=this.path[i];!transformOnly&&node.options.layoutScroll&&node.scroll&&node!==node.root&&transformBox(withTransforms,{x:-node.scroll.offset.x,y:-node.scroll.offset.y}),hasTransform(node.latestValues)&&transformBox(withTransforms,node.latestValues)}return hasTransform(this.latestValues)&&transformBox(withTransforms,this.latestValues),withTransforms}removeTransform(box){const boxWithoutTransform=createBox();copyBoxInto(boxWithoutTransform,box);for(let i=0;i<this.path.length;i++){const node=this.path[i];if(!node.instance||!hasTransform(node.latestValues))continue;hasScale(node.latestValues)&&node.updateSnapshot();const sourceBox=createBox(),nodeBox=node.measurePageBox();copyBoxInto(sourceBox,nodeBox),removeBoxTransforms(boxWithoutTransform,node.latestValues,node.snapshot?node.snapshot.layoutBox:void 0,sourceBox)}return hasTransform(this.latestValues)&&removeBoxTransforms(boxWithoutTransform,this.latestValues),boxWithoutTransform}setTargetDelta(delta){this.targetDelta=delta,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(options){this.options={...this.options,...options,crossfade:options.crossfade!==void 0?options.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(forceRecalculation=!1){var _a;const lead=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=lead.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=lead.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=lead.isSharedProjectionDirty);const isShared=!!this.resumingFrom||this!==lead;if(!(forceRecalculation||isShared&&this.isSharedProjectionDirty||this.isProjectionDirty||!((_a=this.parent)===null||_a===void 0)&&_a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:layout2,layoutId}=this.options;if(!(!this.layout||!(layout2||layoutId))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const relativeParent=this.getClosestProjectingParent();relativeParent&&relativeParent.layout&&this.animationProgress!==1?(this.relativeParent=relativeParent,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,relativeParent.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const relativeParent=this.getClosestProjectingParent();relativeParent&&!!relativeParent.resumingFrom==!!this.resumingFrom&&!relativeParent.options.layoutScroll&&relativeParent.target&&this.animationProgress!==1?(this.relativeParent=relativeParent,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,relativeParent.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}projectionFrameData.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _a;const lead=this.getLead(),isShared=!!this.resumingFrom||this!==lead;let canSkip=!0;if((this.isProjectionDirty||!((_a=this.parent)===null||_a===void 0)&&_a.isProjectionDirty)&&(canSkip=!1),isShared&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(canSkip=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(canSkip=!1),canSkip)return;const{layout:layout2,layoutId}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(layout2||layoutId))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const prevTreeScaleX=this.treeScale.x,prevTreeScaleY=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,isShared),lead.layout&&!lead.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(lead.target=lead.layout.layoutBox);const{target}=lead;if(!target){this.projectionTransform&&(this.projectionDelta=createDelta(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta());const prevProjectionTransform=this.projectionTransform;calcBoxDelta(this.projectionDelta,this.layoutCorrected,target,this.latestValues),this.projectionTransform=buildProjectionTransform(this.projectionDelta,this.treeScale),(this.projectionTransform!==prevProjectionTransform||this.treeScale.x!==prevTreeScaleX||this.treeScale.y!==prevTreeScaleY)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",target)),projectionFrameData.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(notifyAll=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),notifyAll){const stack=this.getStack();stack&&stack.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(delta,hasOnlyRelativeTargetChanged=!1){const snapshot=this.snapshot,snapshotLatestValues=snapshot?snapshot.latestValues:{},mixedValues={...this.latestValues},targetDelta=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!hasOnlyRelativeTargetChanged;const relativeLayout=createBox(),snapshotSource=snapshot?snapshot.source:void 0,layoutSource=this.layout?this.layout.source:void 0,isSharedLayoutAnimation=snapshotSource!==layoutSource,stack=this.getStack(),isOnlyMember=!stack||stack.members.length<=1,shouldCrossfadeOpacity=!!(isSharedLayoutAnimation&&!isOnlyMember&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let prevRelativeTarget;this.mixTargetDelta=latest=>{const progress2=latest/1e3;mixAxisDelta(targetDelta.x,delta.x,progress2),mixAxisDelta(targetDelta.y,delta.y,progress2),this.setTargetDelta(targetDelta),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(relativeLayout,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,relativeLayout,progress2),prevRelativeTarget&&boxEquals(this.relativeTarget,prevRelativeTarget)&&(this.isProjectionDirty=!1),prevRelativeTarget||(prevRelativeTarget=createBox()),copyBoxInto(prevRelativeTarget,this.relativeTarget)),isSharedLayoutAnimation&&(this.animationValues=mixedValues,mixValues(mixedValues,snapshotLatestValues,this.latestValues,progress2,shouldCrossfadeOpacity,isOnlyMember)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=progress2},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(options){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...options,onUpdate:latest=>{this.mixTargetDelta(latest),options.onUpdate&&options.onUpdate(latest)},onComplete:()=>{options.onComplete&&options.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const stack=this.getStack();stack&&stack.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const lead=this.getLead();let{targetWithTransforms,target,layout:layout2,latestValues}=lead;if(!(!targetWithTransforms||!target||!layout2)){if(this!==lead&&this.layout&&layout2&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,layout2.layoutBox)){target=this.target||createBox();const xLength=calcLength(this.layout.layoutBox.x);target.x.min=lead.target.x.min,target.x.max=target.x.min+xLength;const yLength=calcLength(this.layout.layoutBox.y);target.y.min=lead.target.y.min,target.y.max=target.y.min+yLength}copyBoxInto(targetWithTransforms,target),transformBox(targetWithTransforms,latestValues),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,targetWithTransforms,latestValues)}}registerSharedNode(layoutId,node){this.sharedNodes.has(layoutId)||this.sharedNodes.set(layoutId,new NodeStack),this.sharedNodes.get(layoutId).add(node);const config=node.options.initialPromotionConfig;node.promote({transition:config?config.transition:void 0,preserveFollowOpacity:config&&config.shouldPreserveFollowOpacity?config.shouldPreserveFollowOpacity(node):void 0})}isLead(){const stack=this.getStack();return stack?stack.lead===this:!0}getLead(){var _a;const{layoutId}=this.options;return layoutId?((_a=this.getStack())===null||_a===void 0?void 0:_a.lead)||this:this}getPrevLead(){var _a;const{layoutId}=this.options;return layoutId?(_a=this.getStack())===null||_a===void 0?void 0:_a.prevLead:void 0}getStack(){const{layoutId}=this.options;if(layoutId)return this.root.sharedNodes.get(layoutId)}promote({needsReset,transition,preserveFollowOpacity}={}){const stack=this.getStack();stack&&stack.promote(this,preserveFollowOpacity),needsReset&&(this.projectionDelta=void 0,this.needsReset=!0),transition&&this.setOptions({transition})}relegate(){const stack=this.getStack();return stack?stack.relegate(this):!1}resetRotation(){const{visualElement}=this.options;if(!visualElement)return;let hasRotate=!1;const{latestValues}=visualElement;if((latestValues.rotate||latestValues.rotateX||latestValues.rotateY||latestValues.rotateZ)&&(hasRotate=!0),!hasRotate)return;const resetValues={};for(let i=0;i<transformAxes.length;i++){const key="rotate"+transformAxes[i];latestValues[key]&&(resetValues[key]=latestValues[key],visualElement.setStaticValue(key,0))}visualElement.render();for(const key in resetValues)visualElement.setStaticValue(key,resetValues[key]);visualElement.scheduleRender()}getProjectionStyles(styleProp){var _a,_b;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const styles={visibility:""},transformTemplate=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,styles.opacity="",styles.pointerEvents=resolveMotionValue(styleProp==null?void 0:styleProp.pointerEvents)||"",styles.transform=transformTemplate?transformTemplate(this.latestValues,""):"none",styles;const lead=this.getLead();if(!this.projectionDelta||!this.layout||!lead.target){const emptyStyles={};return this.options.layoutId&&(emptyStyles.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,emptyStyles.pointerEvents=resolveMotionValue(styleProp==null?void 0:styleProp.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(emptyStyles.transform=transformTemplate?transformTemplate({},""):"none",this.hasProjected=!1),emptyStyles}const valuesToRender=lead.animationValues||lead.latestValues;this.applyTransformsToTarget(),styles.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,valuesToRender),transformTemplate&&(styles.transform=transformTemplate(valuesToRender,styles.transform));const{x,y}=this.projectionDelta;styles.transformOrigin=`${x.origin*100}% ${y.origin*100}% 0`,lead.animationValues?styles.opacity=lead===this?(_b=(_a=valuesToRender.opacity)!==null&&_a!==void 0?_a:this.latestValues.opacity)!==null&&_b!==void 0?_b:1:this.preserveOpacity?this.latestValues.opacity:valuesToRender.opacityExit:styles.opacity=lead===this?valuesToRender.opacity!==void 0?valuesToRender.opacity:"":valuesToRender.opacityExit!==void 0?valuesToRender.opacityExit:0;for(const key in scaleCorrectors){if(valuesToRender[key]===void 0)continue;const{correct,applyTo}=scaleCorrectors[key],corrected=styles.transform==="none"?valuesToRender[key]:correct(valuesToRender[key],lead);if(applyTo){const num=applyTo.length;for(let i=0;i<num;i++)styles[applyTo[i]]=corrected}else styles[key]=corrected}return this.options.layoutId&&(styles.pointerEvents=lead===this?resolveMotionValue(styleProp==null?void 0:styleProp.pointerEvents)||"":"none"),styles}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(node=>{var _a;return(_a=node.currentAnimation)===null||_a===void 0?void 0:_a.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(node){node.updateLayout()}function notifyLayoutUpdate(node){var _a;const snapshot=((_a=node.resumeFrom)===null||_a===void 0?void 0:_a.snapshot)||node.snapshot;if(node.isLead()&&node.layout&&snapshot&&node.hasListeners("didUpdate")){const{layoutBox:layout2,measuredBox:measuredLayout}=node.layout,{animationType}=node.options,isShared=snapshot.source!==node.layout.source;animationType==="size"?eachAxis(axis=>{const axisSnapshot=isShared?snapshot.measuredBox[axis]:snapshot.layoutBox[axis],length=calcLength(axisSnapshot);axisSnapshot.min=layout2[axis].min,axisSnapshot.max=axisSnapshot.min+length}):shouldAnimatePositionOnly(animationType,snapshot.layoutBox,layout2)&&eachAxis(axis=>{const axisSnapshot=isShared?snapshot.measuredBox[axis]:snapshot.layoutBox[axis],length=calcLength(layout2[axis]);axisSnapshot.max=axisSnapshot.min+length,node.relativeTarget&&!node.currentAnimation&&(node.isProjectionDirty=!0,node.relativeTarget[axis].max=node.relativeTarget[axis].min+length)});const layoutDelta=createDelta();calcBoxDelta(layoutDelta,layout2,snapshot.layoutBox);const visualDelta=createDelta();isShared?calcBoxDelta(visualDelta,node.applyTransform(measuredLayout,!0),snapshot.measuredBox):calcBoxDelta(visualDelta,layout2,snapshot.layoutBox);const hasLayoutChanged=!isDeltaZero(layoutDelta);let hasRelativeTargetChanged=!1;if(!node.resumeFrom){const relativeParent=node.getClosestProjectingParent();if(relativeParent&&!relativeParent.resumeFrom){const{snapshot:parentSnapshot,layout:parentLayout}=relativeParent;if(parentSnapshot&&parentLayout){const relativeSnapshot=createBox();calcRelativePosition(relativeSnapshot,snapshot.layoutBox,parentSnapshot.layoutBox);const relativeLayout=createBox();calcRelativePosition(relativeLayout,layout2,parentLayout.layoutBox),boxEqualsRounded(relativeSnapshot,relativeLayout)||(hasRelativeTargetChanged=!0),relativeParent.options.layoutRoot&&(node.relativeTarget=relativeLayout,node.relativeTargetOrigin=relativeSnapshot,node.relativeParent=relativeParent)}}}node.notifyListeners("didUpdate",{layout:layout2,snapshot,delta:visualDelta,layoutDelta,hasLayoutChanged,hasRelativeTargetChanged})}else if(node.isLead()){const{onExitComplete}=node.options;onExitComplete&&onExitComplete()}node.options.transition=void 0}function propagateDirtyNodes(node){projectionFrameData.totalNodes++,node.parent&&(node.isProjecting()||(node.isProjectionDirty=node.parent.isProjectionDirty),node.isSharedProjectionDirty||(node.isSharedProjectionDirty=!!(node.isProjectionDirty||node.parent.isProjectionDirty||node.parent.isSharedProjectionDirty)),node.isTransformDirty||(node.isTransformDirty=node.parent.isTransformDirty))}function cleanDirtyNodes(node){node.isProjectionDirty=node.isSharedProjectionDirty=node.isTransformDirty=!1}function clearSnapshot(node){node.clearSnapshot()}function clearMeasurements(node){node.clearMeasurements()}function clearIsLayoutDirty(node){node.isLayoutDirty=!1}function resetTransformStyle(node){const{visualElement}=node.options;visualElement&&visualElement.getProps().onBeforeLayoutMeasure&&visualElement.notify("BeforeLayoutMeasure"),node.resetTransform()}function finishAnimation(node){node.finishAnimation(),node.targetDelta=node.relativeTarget=node.target=void 0,node.isProjectionDirty=!0}function resolveTargetDelta(node){node.resolveTargetDelta()}function calcProjection(node){node.calcProjection()}function resetRotation(node){node.resetRotation()}function removeLeadSnapshots(stack){stack.removeLeadSnapshot()}function mixAxisDelta(output,delta,p2){output.translate=mix(delta.translate,0,p2),output.scale=mix(delta.scale,1,p2),output.origin=delta.origin,output.originPoint=delta.originPoint}function mixAxis(output,from,to,p2){output.min=mix(from.min,to.min,p2),output.max=mix(from.max,to.max,p2)}function mixBox(output,from,to,p2){mixAxis(output.x,from.x,to.x,p2),mixAxis(output.y,from.y,to.y,p2)}function hasOpacityCrossfade(node){return node.animationValues&&node.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=string=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(string),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(axis){axis.min=roundPoint(axis.min),axis.max=roundPoint(axis.max)}function roundBox(box){roundAxis(box.x),roundAxis(box.y)}function shouldAnimatePositionOnly(animationType,snapshot,layout2){return animationType==="position"||animationType==="preserve-aspect"&&!isNear(aspectRatio(snapshot),aspectRatio(layout2),.2)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(ref,notify)=>addDomEvent(ref,"resize",notify),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:instance=>({x:instance.scrollLeft,y:instance.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const documentNode=new DocumentProjectionNode({});documentNode.mount(window),documentNode.setOptions({layoutScroll:!0}),rootProjectionNode.current=documentNode}return rootProjectionNode.current},resetTransform:(instance,value)=>{instance.style.transform=value!==void 0?value:"none"},checkIsScrollRoot:instance=>window.getComputedStyle(instance).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}},splitCSSVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function parseCSSVariable(current){const match=splitCSSVariableRegex.exec(current);if(!match)return[,];const[,token,fallback]=match;return[token,fallback]}function getVariableValue(current,element,depth=1){const[token,fallback]=parseCSSVariable(current);if(!token)return;const resolved=window.getComputedStyle(element).getPropertyValue(token);if(resolved){const trimmed=resolved.trim();return isNumericalString(trimmed)?parseFloat(trimmed):trimmed}else return isCSSVariableToken(fallback)?getVariableValue(fallback,element,depth+1):fallback}function resolveCSSVariables(visualElement,{...target},transitionEnd){const element=visualElement.current;if(!(element instanceof Element))return{target,transitionEnd};transitionEnd&&(transitionEnd={...transitionEnd}),visualElement.values.forEach(value=>{const current=value.get();if(!isCSSVariableToken(current))return;const resolved=getVariableValue(current,element);resolved&&value.set(resolved)});for(const key in target){const current=target[key];if(!isCSSVariableToken(current))continue;const resolved=getVariableValue(current,element);resolved&&(target[key]=resolved,transitionEnd||(transitionEnd={}),transitionEnd[key]===void 0&&(transitionEnd[key]=current))}return{target,transitionEnd}}const positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isPositionalKey=key=>positionalKeys.has(key),hasPositionalKey=target=>Object.keys(target).some(isPositionalKey),isNumOrPxType=v=>v===number||v===px,getPosFromMatrix=(matrix,pos)=>parseFloat(matrix.split(", ")[pos]),getTranslateFromMatrix=(pos2,pos3)=>(_bbox,{transform})=>{if(transform==="none"||!transform)return 0;const matrix3d=transform.match(/^matrix3d\((.+)\)$/);if(matrix3d)return getPosFromMatrix(matrix3d[1],pos3);{const matrix=transform.match(/^matrix\((.+)\)$/);return matrix?getPosFromMatrix(matrix[1],pos2):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(key=>!transformKeys.has(key));function removeNonTranslationalTransform(visualElement){const removedTransforms=[];return nonTranslationalTransformKeys.forEach(key=>{const value=visualElement.getValue(key);value!==void 0&&(removedTransforms.push([key,value.get()]),value.set(key.startsWith("scale")?1:0))}),removedTransforms.length&&visualElement.render(),removedTransforms}const positionalValues={width:({x},{paddingLeft="0",paddingRight="0"})=>x.max-x.min-parseFloat(paddingLeft)-parseFloat(paddingRight),height:({y},{paddingTop="0",paddingBottom="0"})=>y.max-y.min-parseFloat(paddingTop)-parseFloat(paddingBottom),top:(_bbox,{top})=>parseFloat(top),left:(_bbox,{left})=>parseFloat(left),bottom:({y},{top})=>parseFloat(top)+(y.max-y.min),right:({x},{left})=>parseFloat(left)+(x.max-x.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const convertChangedValueTypes=(target,visualElement,changedKeys)=>{const originBbox=visualElement.measureViewportBox(),element=visualElement.current,elementComputedStyle=getComputedStyle(element),{display}=elementComputedStyle,origin2={};display==="none"&&visualElement.setStaticValue("display",target.display||"block"),changedKeys.forEach(key=>{origin2[key]=positionalValues[key](originBbox,elementComputedStyle)}),visualElement.render();const targetBbox=visualElement.measureViewportBox();return changedKeys.forEach(key=>{const value=visualElement.getValue(key);value&&value.jump(origin2[key]),target[key]=positionalValues[key](targetBbox,elementComputedStyle)}),target},checkAndConvertChangedValueTypes=(visualElement,target,origin2={},transitionEnd={})=>{target={...target},transitionEnd={...transitionEnd};const targetPositionalKeys=Object.keys(target).filter(isPositionalKey);let removedTransformValues=[],hasAttemptedToRemoveTransformValues=!1;const changedValueTypeKeys=[];if(targetPositionalKeys.forEach(key=>{const value=visualElement.getValue(key);if(!visualElement.hasValue(key))return;let from=origin2[key],fromType=findDimensionValueType(from);const to=target[key];let toType;if(isKeyframesTarget(to)){const numKeyframes=to.length,fromIndex=to[0]===null?1:0;from=to[fromIndex],fromType=findDimensionValueType(from);for(let i=fromIndex;i<numKeyframes&&to[i]!==null;i++)toType?invariant(findDimensionValueType(to[i])===toType):toType=findDimensionValueType(to[i])}else toType=findDimensionValueType(to);if(fromType!==toType)if(isNumOrPxType(fromType)&&isNumOrPxType(toType)){const current=value.get();typeof current=="string"&&value.set(parseFloat(current)),typeof to=="string"?target[key]=parseFloat(to):Array.isArray(to)&&toType===px&&(target[key]=to.map(parseFloat))}else fromType!=null&&fromType.transform&&(toType!=null&&toType.transform)&&(from===0||to===0)?from===0?value.set(toType.transform(from)):target[key]=fromType.transform(to):(hasAttemptedToRemoveTransformValues||(removedTransformValues=removeNonTranslationalTransform(visualElement),hasAttemptedToRemoveTransformValues=!0),changedValueTypeKeys.push(key),transitionEnd[key]=transitionEnd[key]!==void 0?transitionEnd[key]:target[key],value.jump(to))}),changedValueTypeKeys.length){const scrollY=changedValueTypeKeys.indexOf("height")>=0?window.pageYOffset:null,convertedTarget=convertChangedValueTypes(target,visualElement,changedValueTypeKeys);return removedTransformValues.length&&removedTransformValues.forEach(([key,value])=>{visualElement.getValue(key).set(value)}),visualElement.render(),isBrowser&&scrollY!==null&&window.scrollTo({top:scrollY}),{target:convertedTarget,transitionEnd}}else return{target,transitionEnd}};function unitConversion(visualElement,target,origin2,transitionEnd){return hasPositionalKey(target)?checkAndConvertChangedValueTypes(visualElement,target,origin2,transitionEnd):{target,transitionEnd}}const parseDomVariant=(visualElement,target,origin2,transitionEnd)=>{const resolved=resolveCSSVariables(visualElement,target,transitionEnd);return target=resolved.target,transitionEnd=resolved.transitionEnd,unitConversion(visualElement,target,origin2,transitionEnd)},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const motionMediaQuery=window.matchMedia("(prefers-reduced-motion)"),setReducedMotionPreferences=()=>prefersReducedMotion.current=motionMediaQuery.matches;motionMediaQuery.addListener(setReducedMotionPreferences),setReducedMotionPreferences()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(element,next,prev){const{willChange}=next;for(const key in next){const nextValue=next[key],prevValue=prev[key];if(isMotionValue(nextValue))element.addValue(key,nextValue),isWillChangeMotionValue(willChange)&&willChange.add(key);else if(isMotionValue(prevValue))element.addValue(key,motionValue(nextValue,{owner:element})),isWillChangeMotionValue(willChange)&&willChange.remove(key);else if(prevValue!==nextValue)if(element.hasValue(key)){const existingValue=element.getValue(key);!existingValue.hasAnimated&&existingValue.set(nextValue)}else{const latestValue=element.getStaticValue(key);element.addValue(key,motionValue(latestValue!==void 0?latestValue:nextValue,{owner:element}))}}for(const key in prev)next[key]===void 0&&element.removeValue(key);return next}const visualElementStore=new WeakMap,featureNames=Object.keys(featureDefinitions),numFeatures=featureNames.length,propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],numVariantProps=variantProps.length;class VisualElement{constructor({parent,props,presenceContext,reducedMotionConfig,visualState},options={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>frame.render(this.render,!1,!0);const{latestValues,renderState}=visualState;this.latestValues=latestValues,this.baseTarget={...latestValues},this.initialValues=props.initial?{...latestValues}:{},this.renderState=renderState,this.parent=parent,this.props=props,this.presenceContext=presenceContext,this.depth=parent?parent.depth+1:0,this.reducedMotionConfig=reducedMotionConfig,this.options=options,this.isControllingVariants=isControllingVariants(props),this.isVariantNode=isVariantNode(props),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(parent&&parent.current);const{willChange,...initialMotionValues}=this.scrapeMotionValuesFromProps(props,{});for(const key in initialMotionValues){const value=initialMotionValues[key];latestValues[key]!==void 0&&isMotionValue(value)&&(value.set(latestValues[key],!1),isWillChangeMotionValue(willChange)&&willChange.add(key))}}scrapeMotionValuesFromProps(_props,_prevProps){return{}}mount(instance){this.current=instance,visualElementStore.set(instance,this),this.projection&&!this.projection.instance&&this.projection.mount(instance),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((value,key)=>this.bindToMotionValue(key,value)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(remove=>remove()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const key in this.events)this.events[key].clear();for(const key in this.features)this.features[key].unmount();this.current=null}bindToMotionValue(key,value){const valueIsTransform=transformProps.has(key),removeOnChange=value.on("change",latestValue=>{this.latestValues[key]=latestValue,this.props.onUpdate&&frame.update(this.notifyUpdate,!1,!0),valueIsTransform&&this.projection&&(this.projection.isTransformDirty=!0)}),removeOnRenderRequest=value.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(key,()=>{removeOnChange(),removeOnRenderRequest()})}sortNodePosition(other){return!this.current||!this.sortInstanceNodePosition||this.type!==other.type?0:this.sortInstanceNodePosition(this.current,other.current)}loadFeatures({children,...renderedProps},isStrict,preloadedFeatures2,initialLayoutGroupConfig){let ProjectionNodeConstructor,MeasureLayout2;for(let i=0;i<numFeatures;i++){const name2=featureNames[i],{isEnabled,Feature:FeatureConstructor,ProjectionNode,MeasureLayout:MeasureLayoutComponent}=featureDefinitions[name2];ProjectionNode&&(ProjectionNodeConstructor=ProjectionNode),isEnabled(renderedProps)&&(!this.features[name2]&&FeatureConstructor&&(this.features[name2]=new FeatureConstructor(this)),MeasureLayoutComponent&&(MeasureLayout2=MeasureLayoutComponent))}if((this.type==="html"||this.type==="svg")&&!this.projection&&ProjectionNodeConstructor){this.projection=new ProjectionNodeConstructor(this.latestValues,this.parent&&this.parent.projection);const{layoutId,layout:layout2,drag:drag2,dragConstraints,layoutScroll,layoutRoot}=renderedProps;this.projection.setOptions({layoutId,layout:layout2,alwaysMeasureLayout:!!drag2||dragConstraints&&isRefObject(dragConstraints),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof layout2=="string"?layout2:"both",initialPromotionConfig:initialLayoutGroupConfig,layoutScroll,layoutRoot})}return MeasureLayout2}updateFeatures(){for(const key in this.features){const feature=this.features[key];feature.isMounted?feature.update():(feature.mount(),feature.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(key){return this.latestValues[key]}setStaticValue(key,value){this.latestValues[key]=value}makeTargetAnimatable(target,canMutate=!0){return this.makeTargetAnimatableFromInstance(target,this.props,canMutate)}update(props,presenceContext){(props.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=props,this.prevPresenceContext=this.presenceContext,this.presenceContext=presenceContext;for(let i=0;i<propEventHandlers.length;i++){const key=propEventHandlers[i];this.propEventSubscriptions[key]&&(this.propEventSubscriptions[key](),delete this.propEventSubscriptions[key]);const listener=props["on"+key];listener&&(this.propEventSubscriptions[key]=this.on(key,listener))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(props,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(name2){return this.props.variants?this.props.variants[name2]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(startAtParent=!1){if(startAtParent)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const context2=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(context2.initial=this.props.initial),context2}const context={};for(let i=0;i<numVariantProps;i++){const name2=variantProps[i],prop=this.props[name2];(isVariantLabel(prop)||prop===!1)&&(context[name2]=prop)}return context}addVariantChild(child){const closestVariantNode=this.getClosestVariantNode();if(closestVariantNode)return closestVariantNode.variantChildren&&closestVariantNode.variantChildren.add(child),()=>closestVariantNode.variantChildren.delete(child)}addValue(key,value){value!==this.values.get(key)&&(this.removeValue(key),this.bindToMotionValue(key,value)),this.values.set(key,value),this.latestValues[key]=value.get()}removeValue(key){this.values.delete(key);const unsubscribe=this.valueSubscriptions.get(key);unsubscribe&&(unsubscribe(),this.valueSubscriptions.delete(key)),delete this.latestValues[key],this.removeValueFromRenderState(key,this.renderState)}hasValue(key){return this.values.has(key)}getValue(key,defaultValue){if(this.props.values&&this.props.values[key])return this.props.values[key];let value=this.values.get(key);return value===void 0&&defaultValue!==void 0&&(value=motionValue(defaultValue,{owner:this}),this.addValue(key,value)),value}readValue(key){var _a;return this.latestValues[key]!==void 0||!this.current?this.latestValues[key]:(_a=this.getBaseTargetFromProps(this.props,key))!==null&&_a!==void 0?_a:this.readValueFromInstance(this.current,key,this.options)}setBaseTarget(key,value){this.baseTarget[key]=value}getBaseTarget(key){var _a;const{initial}=this.props,valueFromInitial=typeof initial=="string"||typeof initial=="object"?(_a=resolveVariantFromProps(this.props,initial))===null||_a===void 0?void 0:_a[key]:void 0;if(initial&&valueFromInitial!==void 0)return valueFromInitial;const target=this.getBaseTargetFromProps(this.props,key);return target!==void 0&&!isMotionValue(target)?target:this.initialValues[key]!==void 0&&valueFromInitial===void 0?void 0:this.baseTarget[key]}on(eventName,callback){return this.events[eventName]||(this.events[eventName]=new SubscriptionManager),this.events[eventName].add(callback)}notify(eventName,...args){this.events[eventName]&&this.events[eventName].notify(...args)}}class DOMVisualElement extends VisualElement{sortInstanceNodePosition(a,b){return a.compareDocumentPosition(b)&2?1:-1}getBaseTargetFromProps(props,key){return props.style?props.style[key]:void 0}removeValueFromRenderState(key,{vars,style}){delete vars[key],delete style[key]}makeTargetAnimatableFromInstance({transition,transitionEnd,...target},{transformValues},isMounted){let origin2=getOrigin(target,transition||{},this);if(transformValues&&(transitionEnd&&(transitionEnd=transformValues(transitionEnd)),target&&(target=transformValues(target)),origin2&&(origin2=transformValues(origin2))),isMounted){checkTargetForNewValues(this,target,origin2);const parsed=parseDomVariant(this,target,origin2,transitionEnd);transitionEnd=parsed.transitionEnd,target=parsed.target}return{transition,transitionEnd,...target}}}function getComputedStyle$1(element){return window.getComputedStyle(element)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html"}readValueFromInstance(instance,key){if(transformProps.has(key)){const defaultType=getDefaultValueType(key);return defaultType&&defaultType.default||0}else{const computedStyle=getComputedStyle$1(instance),value=(isCSSVariableName(key)?computedStyle.getPropertyValue(key):computedStyle[key])||0;return typeof value=="string"?value.trim():value}}measureInstanceViewportBox(instance,{transformPagePoint}){return measureViewportBox(instance,transformPagePoint)}build(renderState,latestValues,options,props){buildHTMLStyles(renderState,latestValues,options,props.transformTemplate)}scrapeMotionValuesFromProps(props,prevProps){return scrapeMotionValuesFromProps$1(props,prevProps)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children}=this.props;isMotionValue(children)&&(this.childSubscription=children.on("change",latest=>{this.current&&(this.current.textContent=`${latest}`)}))}renderInstance(instance,renderState,styleProp,projection){renderHTML(instance,renderState,styleProp,projection)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(props,key){return props[key]}readValueFromInstance(instance,key){if(transformProps.has(key)){const defaultType=getDefaultValueType(key);return defaultType&&defaultType.default||0}return key=camelCaseAttributes.has(key)?key:camelToDash(key),instance.getAttribute(key)}measureInstanceViewportBox(){return createBox()}scrapeMotionValuesFromProps(props,prevProps){return scrapeMotionValuesFromProps(props,prevProps)}build(renderState,latestValues,options,props){buildSVGAttrs(renderState,latestValues,options,this.isSVGTag,props.transformTemplate)}renderInstance(instance,renderState,styleProp,projection){renderSVG(instance,renderState,styleProp,projection)}mount(instance){this.isSVGTag=isSVGTag(instance.tagName),super.mount(instance)}}const createDomVisualElement=(Component2,options)=>isSVGComponent(Component2)?new SVGVisualElement(options,{enableHardwareAcceleration:!1}):new HTMLVisualElement(options,{enableHardwareAcceleration:!0}),layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},preloadedFeatures={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy((Component2,config)=>createDomMotionConfig(Component2,config,preloadedFeatures,createDomVisualElement));function useIsMounted(){const isMounted=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>(isMounted.current=!0,()=>{isMounted.current=!1}),[]),isMounted}function useForceUpdate(){const isMounted=useIsMounted(),[forcedRenderCount,setForcedRenderCount]=reactExports.useState(0),forceRender=reactExports.useCallback(()=>{isMounted.current&&setForcedRenderCount(forcedRenderCount+1)},[forcedRenderCount]);return[reactExports.useCallback(()=>frame.postRender(forceRender),[forceRender]),forcedRenderCount]}class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(prevProps){const element=this.props.childRef.current;if(element&&prevProps.isPresent&&!this.props.isPresent){const size=this.props.sizeRef.current;size.height=element.offsetHeight||0,size.width=element.offsetWidth||0,size.top=element.offsetTop,size.left=element.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children,isPresent}){const id2=reactExports.useId(),ref=reactExports.useRef(null),size=reactExports.useRef({width:0,height:0,top:0,left:0});return reactExports.useInsertionEffect(()=>{const{width,height,top,left}=size.current;if(isPresent||!ref.current||!width||!height)return;ref.current.dataset.motionPopId=id2;const style=document.createElement("style");return document.head.appendChild(style),style.sheet&&style.sheet.insertRule(`
          [data-motion-pop-id="${id2}"] {
            position: absolute !important;
            width: ${width}px !important;
            height: ${height}px !important;
            top: ${top}px !important;
            left: ${left}px !important;
          }
        `),()=>{document.head.removeChild(style)}},[isPresent]),reactExports.createElement(PopChildMeasure,{isPresent,childRef:ref,sizeRef:size},reactExports.cloneElement(children,{ref}))}const PresenceChild=({children,initial,isPresent,onExitComplete,custom,presenceAffectsLayout,mode})=>{const presenceChildren=useConstant(newChildrenMap),id2=reactExports.useId(),context=reactExports.useMemo(()=>({id:id2,initial,isPresent,custom,onExitComplete:childId=>{presenceChildren.set(childId,!0);for(const isComplete of presenceChildren.values())if(!isComplete)return;onExitComplete&&onExitComplete()},register:childId=>(presenceChildren.set(childId,!1),()=>presenceChildren.delete(childId))}),presenceAffectsLayout?void 0:[isPresent]);return reactExports.useMemo(()=>{presenceChildren.forEach((_,key)=>presenceChildren.set(key,!1))},[isPresent]),reactExports.useEffect(()=>{!isPresent&&!presenceChildren.size&&onExitComplete&&onExitComplete()},[isPresent]),mode==="popLayout"&&(children=reactExports.createElement(PopChild,{isPresent},children)),reactExports.createElement(PresenceContext.Provider,{value:context},children)};function newChildrenMap(){return new Map}function useUnmountEffect(callback){return reactExports.useEffect(()=>()=>callback(),[])}const getChildKey=child=>child.key||"";function updateChildLookup(children,allChildren){children.forEach(child=>{const key=getChildKey(child);allChildren.set(key,child)})}function onlyElements(children){const filtered=[];return reactExports.Children.forEach(children,child=>{reactExports.isValidElement(child)&&filtered.push(child)}),filtered}const AnimatePresence=({children,custom,initial=!0,onExitComplete,exitBeforeEnter,presenceAffectsLayout=!0,mode="sync"})=>{const forceRender=reactExports.useContext(LayoutGroupContext).forceRender||useForceUpdate()[0],isMounted=useIsMounted(),filteredChildren=onlyElements(children);let childrenToRender=filteredChildren;const exitingChildren=reactExports.useRef(new Map).current,presentChildren=reactExports.useRef(childrenToRender),allChildren=reactExports.useRef(new Map).current,isInitialRender=reactExports.useRef(!0);if(useIsomorphicLayoutEffect(()=>{isInitialRender.current=!1,updateChildLookup(filteredChildren,allChildren),presentChildren.current=childrenToRender}),useUnmountEffect(()=>{isInitialRender.current=!0,allChildren.clear(),exitingChildren.clear()}),isInitialRender.current)return reactExports.createElement(reactExports.Fragment,null,childrenToRender.map(child=>reactExports.createElement(PresenceChild,{key:getChildKey(child),isPresent:!0,initial:initial?void 0:!1,presenceAffectsLayout,mode},child)));childrenToRender=[...childrenToRender];const presentKeys=presentChildren.current.map(getChildKey),targetKeys=filteredChildren.map(getChildKey),numPresent=presentKeys.length;for(let i=0;i<numPresent;i++){const key=presentKeys[i];targetKeys.indexOf(key)===-1&&!exitingChildren.has(key)&&exitingChildren.set(key,void 0)}return mode==="wait"&&exitingChildren.size&&(childrenToRender=[]),exitingChildren.forEach((component,key)=>{if(targetKeys.indexOf(key)!==-1)return;const child=allChildren.get(key);if(!child)return;const insertionIndex=presentKeys.indexOf(key);let exitingComponent=component;if(!exitingComponent){const onExit=()=>{exitingChildren.delete(key);const leftOverKeys=Array.from(allChildren.keys()).filter(childKey=>!targetKeys.includes(childKey));if(leftOverKeys.forEach(leftOverKey=>allChildren.delete(leftOverKey)),presentChildren.current=filteredChildren.filter(presentChild=>{const presentChildKey=getChildKey(presentChild);return presentChildKey===key||leftOverKeys.includes(presentChildKey)}),!exitingChildren.size){if(isMounted.current===!1)return;forceRender(),onExitComplete&&onExitComplete()}};exitingComponent=reactExports.createElement(PresenceChild,{key:getChildKey(child),isPresent:!1,onExitComplete:onExit,custom,presenceAffectsLayout,mode},child),exitingChildren.set(key,exitingComponent)}childrenToRender.splice(insertionIndex,0,exitingComponent)}),childrenToRender=childrenToRender.map(child=>{const key=child.key;return exitingChildren.has(key)?child:reactExports.createElement(PresenceChild,{key:getChildKey(child),isPresent:!0,presenceAffectsLayout,mode},child)}),reactExports.createElement(reactExports.Fragment,null,exitingChildren.size?childrenToRender:childrenToRender.map(child=>reactExports.cloneElement(child)))};function Bars3Icon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const ForwardRef$d=reactExports.forwardRef(Bars3Icon);function BellIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const ForwardRef$c=reactExports.forwardRef(BellIcon);function CheckCircleIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ForwardRef$b=reactExports.forwardRef(CheckCircleIcon);function ChevronDownIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const ForwardRef$a=reactExports.forwardRef(ChevronDownIcon);function Cog6ToothIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const ForwardRef$9=reactExports.forwardRef(Cog6ToothIcon);function ExclamationTriangleIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const ForwardRef$8=reactExports.forwardRef(ExclamationTriangleIcon);function InformationCircleIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const ForwardRef$7=reactExports.forwardRef(InformationCircleIcon);function MagnifyingGlassIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const ForwardRef$6=reactExports.forwardRef(MagnifyingGlassIcon);function MoonIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const ForwardRef$5=reactExports.forwardRef(MoonIcon);function PowerIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.636 5.636a9 9 0 1 0 12.728 0M12 3v9"}))}const ForwardRef$4=reactExports.forwardRef(PowerIcon);function SunIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const ForwardRef$3=reactExports.forwardRef(SunIcon);function UserCircleIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const ForwardRef$2=reactExports.forwardRef(UserCircleIcon);function XCircleIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ForwardRef$1=reactExports.forwardRef(XCircleIcon);function XMarkIcon({title,titleId,...props},svgRef){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?reactExports.createElement("title",{id:titleId},title):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ForwardRef=reactExports.forwardRef(XMarkIcon),Toast=({id:id2,type,title,message,duration=5e3,onClose})=>{reactExports.useEffect(()=>{const timer=setTimeout(()=>{onClose(id2)},duration);return()=>clearTimeout(timer)},[id2,duration,onClose]);const getIcon=()=>{switch(type){case"success":return jsxRuntimeExports.jsx(ForwardRef$b,{className:"w-6 h-6 text-green-500"});case"error":return jsxRuntimeExports.jsx(ForwardRef$1,{className:"w-6 h-6 text-red-500"});case"warning":return jsxRuntimeExports.jsx(ForwardRef$8,{className:"w-6 h-6 text-yellow-500"});case"info":return jsxRuntimeExports.jsx(ForwardRef$7,{className:"w-6 h-6 text-blue-500"})}},getBackgroundColor=()=>{switch(type){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700";case"info":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700"}};return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.95},transition:{duration:.3,ease:"easeOut"},className:`max-w-sm w-full ${getBackgroundColor()} border rounded-xl shadow-lg p-4 backdrop-blur-sm`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:getIcon()}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:title}),message&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:message})]}),jsxRuntimeExports.jsx("button",{onClick:()=>onClose(id2),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},ToastContainer=({toasts,onClose})=>jsxRuntimeExports.jsx("div",{className:"fixed top-4 right-4 z-[9999] space-y-2",children:jsxRuntimeExports.jsx(AnimatePresence,{children:toasts.map(toast=>jsxRuntimeExports.jsx(Toast,{...toast,onClose},toast.id))})}),ToastContext=reactExports.createContext(void 0),useToast=()=>{const context=reactExports.useContext(ToastContext);if(context===void 0)throw new Error("useToast must be used within a ToastProvider");return context},ToastProvider=({children})=>{const[toasts,setToasts]=reactExports.useState([]),showToast=toast=>{const id2=Math.random().toString(36).substr(2,9),newToast={...toast,id:id2};setToasts(prev=>[...prev,newToast])},removeToast=id2=>{setToasts(prev=>prev.filter(toast=>toast.id!==id2))},value={showToast,showSuccess:(title,message)=>{showToast({type:"success",title,message})},showError:(title,message)=>{showToast({type:"error",title,message})},showWarning:(title,message)=>{showToast({type:"warning",title,message})},showInfo:(title,message)=>{showToast({type:"info",title,message})}};return jsxRuntimeExports.jsxs(ToastContext.Provider,{value,children:[children,jsxRuntimeExports.jsx(ToastContainer,{toasts,onClose:removeToast})]})},Button=({children,variant="primary",size="md",onClick,disabled=!1,loading=!1,icon:Icon,iconPosition="left",className="",type="button",fullWidth=!1})=>{const baseClasses="inline-flex items-center justify-center font-medium rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed font-sans",variantClasses={primary:"bg-primary-500 hover:bg-primary-600 text-white focus:ring-primary-500 shadow-medium hover:shadow-large transform hover:-translate-y-0.5",secondary:"bg-secondary-100 hover:bg-secondary-200 text-secondary-800 focus:ring-secondary-300 dark:bg-dark-card dark:hover:bg-secondary-800 dark:text-white shadow-soft hover:shadow-medium",outline:"border-2 border-primary-500 text-primary-500 hover:bg-primary-500 hover:text-white focus:ring-primary-500",ghost:"text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900/20 focus:ring-primary-500/20",success:"bg-success-500 hover:bg-success-600 text-white focus:ring-success-500 shadow-medium hover:shadow-large transform hover:-translate-y-0.5",warning:"bg-warning-500 hover:bg-warning-600 text-white focus:ring-warning-500 shadow-medium hover:shadow-large transform hover:-translate-y-0.5",error:"bg-error-500 hover:bg-error-600 text-white focus:ring-error-500 shadow-medium hover:shadow-large transform hover:-translate-y-0.5"},sizeClasses={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"},widthClass=fullWidth?"w-full":"",classes=`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${widthClass} ${className}`;return jsxRuntimeExports.jsxs(motion.button,{type,className:classes,onClick,disabled:disabled||loading,whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[loading&&jsxRuntimeExports.jsx(motion.div,{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),Icon&&iconPosition==="left"&&!loading&&jsxRuntimeExports.jsx(Icon,{className:"w-4 h-4 mr-2"}),children,Icon&&iconPosition==="right"&&!loading&&jsxRuntimeExports.jsx(Icon,{className:"w-4 h-4 ml-2"})]})};function r(e){var t,f2,n2="";if(typeof e=="string"||typeof e=="number")n2+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f2=r(e[t]))&&(n2&&(n2+=" "),n2+=f2)}else for(f2 in e)e[f2]&&(n2&&(n2+=" "),n2+=f2);return n2}function clsx(){for(var e,t,f2=0,n2="",o=arguments.length;f2<o;f2++)(e=arguments[f2])&&(t=r(e))&&(n2&&(n2+=" "),n2+=t);return n2}const CLASS_PART_SEPARATOR="-",createClassGroupUtils=config=>{const classMap=createClassMap(config),{conflictingClassGroups,conflictingClassGroupModifiers}=config;return{getClassGroupId:className=>{const classParts=className.split(CLASS_PART_SEPARATOR);return classParts[0]===""&&classParts.length!==1&&classParts.shift(),getGroupRecursive(classParts,classMap)||getGroupIdForArbitraryProperty(className)},getConflictingClassGroupIds:(classGroupId,hasPostfixModifier)=>{const conflicts=conflictingClassGroups[classGroupId]||[];return hasPostfixModifier&&conflictingClassGroupModifiers[classGroupId]?[...conflicts,...conflictingClassGroupModifiers[classGroupId]]:conflicts}}},getGroupRecursive=(classParts,classPartObject)=>{var _a;if(classParts.length===0)return classPartObject.classGroupId;const currentClassPart=classParts[0],nextClassPartObject=classPartObject.nextPart.get(currentClassPart),classGroupFromNextClassPart=nextClassPartObject?getGroupRecursive(classParts.slice(1),nextClassPartObject):void 0;if(classGroupFromNextClassPart)return classGroupFromNextClassPart;if(classPartObject.validators.length===0)return;const classRest=classParts.join(CLASS_PART_SEPARATOR);return(_a=classPartObject.validators.find(({validator:validator2})=>validator2(classRest)))==null?void 0:_a.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=className=>{if(arbitraryPropertyRegex.test(className)){const arbitraryPropertyClassName=arbitraryPropertyRegex.exec(className)[1],property=arbitraryPropertyClassName==null?void 0:arbitraryPropertyClassName.substring(0,arbitraryPropertyClassName.indexOf(":"));if(property)return"arbitrary.."+property}},createClassMap=config=>{const{theme,classGroups}=config,classMap={nextPart:new Map,validators:[]};for(const classGroupId in classGroups)processClassesRecursively(classGroups[classGroupId],classMap,classGroupId,theme);return classMap},processClassesRecursively=(classGroup,classPartObject,classGroupId,theme)=>{classGroup.forEach(classDefinition=>{if(typeof classDefinition=="string"){const classPartObjectToEdit=classDefinition===""?classPartObject:getPart(classPartObject,classDefinition);classPartObjectToEdit.classGroupId=classGroupId;return}if(typeof classDefinition=="function"){if(isThemeGetter(classDefinition)){processClassesRecursively(classDefinition(theme),classPartObject,classGroupId,theme);return}classPartObject.validators.push({validator:classDefinition,classGroupId});return}Object.entries(classDefinition).forEach(([key,classGroup2])=>{processClassesRecursively(classGroup2,getPart(classPartObject,key),classGroupId,theme)})})},getPart=(classPartObject,path)=>{let currentClassPartObject=classPartObject;return path.split(CLASS_PART_SEPARATOR).forEach(pathPart=>{currentClassPartObject.nextPart.has(pathPart)||currentClassPartObject.nextPart.set(pathPart,{nextPart:new Map,validators:[]}),currentClassPartObject=currentClassPartObject.nextPart.get(pathPart)}),currentClassPartObject},isThemeGetter=func=>func.isThemeGetter,createLruCache=maxCacheSize=>{if(maxCacheSize<1)return{get:()=>{},set:()=>{}};let cacheSize=0,cache=new Map,previousCache=new Map;const update=(key,value)=>{cache.set(key,value),cacheSize++,cacheSize>maxCacheSize&&(cacheSize=0,previousCache=cache,cache=new Map)};return{get(key){let value=cache.get(key);if(value!==void 0)return value;if((value=previousCache.get(key))!==void 0)return update(key,value),value},set(key,value){cache.has(key)?cache.set(key,value):update(key,value)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",MODIFIER_SEPARATOR_LENGTH=MODIFIER_SEPARATOR.length,createParseClassName=config=>{const{prefix,experimentalParseClassName}=config;let parseClassName=className=>{const modifiers=[];let bracketDepth=0,parenDepth=0,modifierStart=0,postfixModifierPosition;for(let index=0;index<className.length;index++){let currentCharacter=className[index];if(bracketDepth===0&&parenDepth===0){if(currentCharacter===MODIFIER_SEPARATOR){modifiers.push(className.slice(modifierStart,index)),modifierStart=index+MODIFIER_SEPARATOR_LENGTH;continue}if(currentCharacter==="/"){postfixModifierPosition=index;continue}}currentCharacter==="["?bracketDepth++:currentCharacter==="]"?bracketDepth--:currentCharacter==="("?parenDepth++:currentCharacter===")"&&parenDepth--}const baseClassNameWithImportantModifier=modifiers.length===0?className:className.substring(modifierStart),baseClassName=stripImportantModifier(baseClassNameWithImportantModifier),hasImportantModifier=baseClassName!==baseClassNameWithImportantModifier,maybePostfixModifierPosition=postfixModifierPosition&&postfixModifierPosition>modifierStart?postfixModifierPosition-modifierStart:void 0;return{modifiers,hasImportantModifier,baseClassName,maybePostfixModifierPosition}};if(prefix){const fullPrefix=prefix+MODIFIER_SEPARATOR,parseClassNameOriginal=parseClassName;parseClassName=className=>className.startsWith(fullPrefix)?parseClassNameOriginal(className.substring(fullPrefix.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:className,maybePostfixModifierPosition:void 0}}if(experimentalParseClassName){const parseClassNameOriginal=parseClassName;parseClassName=className=>experimentalParseClassName({className,parseClassName:parseClassNameOriginal})}return parseClassName},stripImportantModifier=baseClassName=>baseClassName.endsWith(IMPORTANT_MODIFIER)?baseClassName.substring(0,baseClassName.length-1):baseClassName.startsWith(IMPORTANT_MODIFIER)?baseClassName.substring(1):baseClassName,createSortModifiers=config=>{const orderSensitiveModifiers=Object.fromEntries(config.orderSensitiveModifiers.map(modifier=>[modifier,!0]));return modifiers=>{if(modifiers.length<=1)return modifiers;const sortedModifiers=[];let unsortedModifiers=[];return modifiers.forEach(modifier=>{modifier[0]==="["||orderSensitiveModifiers[modifier]?(sortedModifiers.push(...unsortedModifiers.sort(),modifier),unsortedModifiers=[]):unsortedModifiers.push(modifier)}),sortedModifiers.push(...unsortedModifiers.sort()),sortedModifiers}},createConfigUtils=config=>({cache:createLruCache(config.cacheSize),parseClassName:createParseClassName(config),sortModifiers:createSortModifiers(config),...createClassGroupUtils(config)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(classList,configUtils)=>{const{parseClassName,getClassGroupId,getConflictingClassGroupIds,sortModifiers}=configUtils,classGroupsInConflict=[],classNames=classList.trim().split(SPLIT_CLASSES_REGEX);let result="";for(let index=classNames.length-1;index>=0;index-=1){const originalClassName=classNames[index],{isExternal,modifiers,hasImportantModifier,baseClassName,maybePostfixModifierPosition}=parseClassName(originalClassName);if(isExternal){result=originalClassName+(result.length>0?" "+result:result);continue}let hasPostfixModifier=!!maybePostfixModifierPosition,classGroupId=getClassGroupId(hasPostfixModifier?baseClassName.substring(0,maybePostfixModifierPosition):baseClassName);if(!classGroupId){if(!hasPostfixModifier){result=originalClassName+(result.length>0?" "+result:result);continue}if(classGroupId=getClassGroupId(baseClassName),!classGroupId){result=originalClassName+(result.length>0?" "+result:result);continue}hasPostfixModifier=!1}const variantModifier=sortModifiers(modifiers).join(":"),modifierId=hasImportantModifier?variantModifier+IMPORTANT_MODIFIER:variantModifier,classId=modifierId+classGroupId;if(classGroupsInConflict.includes(classId))continue;classGroupsInConflict.push(classId);const conflictGroups=getConflictingClassGroupIds(classGroupId,hasPostfixModifier);for(let i=0;i<conflictGroups.length;++i){const group=conflictGroups[i];classGroupsInConflict.push(modifierId+group)}result=originalClassName+(result.length>0?" "+result:result)}return result};function twJoin(){let index=0,argument,resolvedValue,string="";for(;index<arguments.length;)(argument=arguments[index++])&&(resolvedValue=toValue(argument))&&(string&&(string+=" "),string+=resolvedValue);return string}const toValue=mix2=>{if(typeof mix2=="string")return mix2;let resolvedValue,string="";for(let k2=0;k2<mix2.length;k2++)mix2[k2]&&(resolvedValue=toValue(mix2[k2]))&&(string&&(string+=" "),string+=resolvedValue);return string};function createTailwindMerge(createConfigFirst,...createConfigRest){let configUtils,cacheGet,cacheSet,functionToCall=initTailwindMerge;function initTailwindMerge(classList){const config=createConfigRest.reduce((previousConfig,createConfigCurrent)=>createConfigCurrent(previousConfig),createConfigFirst());return configUtils=createConfigUtils(config),cacheGet=configUtils.cache.get,cacheSet=configUtils.cache.set,functionToCall=tailwindMerge,tailwindMerge(classList)}function tailwindMerge(classList){const cachedResult=cacheGet(classList);if(cachedResult)return cachedResult;const result=mergeClassList(classList,configUtils);return cacheSet(classList,result),result}return function(){return functionToCall(twJoin.apply(null,arguments))}}const fromTheme=key=>{const themeGetter=theme=>theme[key]||[];return themeGetter.isThemeGetter=!0,themeGetter},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+\/\d+$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=value=>fractionRegex.test(value),isNumber=value=>!!value&&!Number.isNaN(Number(value)),isInteger=value=>!!value&&Number.isInteger(Number(value)),isPercent=value=>value.endsWith("%")&&isNumber(value.slice(0,-1)),isTshirtSize=value=>tshirtUnitRegex.test(value),isAny=()=>!0,isLengthOnly=value=>lengthUnitRegex.test(value)&&!colorFunctionRegex.test(value),isNever=()=>!1,isShadow=value=>shadowRegex.test(value),isImage=value=>imageRegex.test(value),isAnyNonArbitrary=value=>!isArbitraryValue(value)&&!isArbitraryVariable(value),isArbitrarySize=value=>getIsArbitraryValue(value,isLabelSize,isNever),isArbitraryValue=value=>arbitraryValueRegex.test(value),isArbitraryLength=value=>getIsArbitraryValue(value,isLabelLength,isLengthOnly),isArbitraryNumber=value=>getIsArbitraryValue(value,isLabelNumber,isNumber),isArbitraryPosition=value=>getIsArbitraryValue(value,isLabelPosition,isNever),isArbitraryImage=value=>getIsArbitraryValue(value,isLabelImage,isImage),isArbitraryShadow=value=>getIsArbitraryValue(value,isLabelShadow,isShadow),isArbitraryVariable=value=>arbitraryVariableRegex.test(value),isArbitraryVariableLength=value=>getIsArbitraryVariable(value,isLabelLength),isArbitraryVariableFamilyName=value=>getIsArbitraryVariable(value,isLabelFamilyName),isArbitraryVariablePosition=value=>getIsArbitraryVariable(value,isLabelPosition),isArbitraryVariableSize=value=>getIsArbitraryVariable(value,isLabelSize),isArbitraryVariableImage=value=>getIsArbitraryVariable(value,isLabelImage),isArbitraryVariableShadow=value=>getIsArbitraryVariable(value,isLabelShadow,!0),getIsArbitraryValue=(value,testLabel,testValue)=>{const result=arbitraryValueRegex.exec(value);return result?result[1]?testLabel(result[1]):testValue(result[2]):!1},getIsArbitraryVariable=(value,testLabel,shouldMatchNoLabel=!1)=>{const result=arbitraryVariableRegex.exec(value);return result?result[1]?testLabel(result[1]):shouldMatchNoLabel:!1},isLabelPosition=label=>label==="position"||label==="percentage",isLabelImage=label=>label==="image"||label==="url",isLabelSize=label=>label==="length"||label==="size"||label==="bg-size",isLabelLength=label=>label==="length",isLabelNumber=label=>label==="number",isLabelFamilyName=label=>label==="family-name",isLabelShadow=label=>label==="shadow",getDefaultConfig=()=>{const themeColor=fromTheme("color"),themeFont=fromTheme("font"),themeText=fromTheme("text"),themeFontWeight=fromTheme("font-weight"),themeTracking=fromTheme("tracking"),themeLeading=fromTheme("leading"),themeBreakpoint=fromTheme("breakpoint"),themeContainer=fromTheme("container"),themeSpacing=fromTheme("spacing"),themeRadius=fromTheme("radius"),themeShadow=fromTheme("shadow"),themeInsetShadow=fromTheme("inset-shadow"),themeTextShadow=fromTheme("text-shadow"),themeDropShadow=fromTheme("drop-shadow"),themeBlur=fromTheme("blur"),themePerspective=fromTheme("perspective"),themeAspect=fromTheme("aspect"),themeEase=fromTheme("ease"),themeAnimate=fromTheme("animate"),scaleBreak=()=>["auto","avoid","all","avoid-page","page","left","right","column"],scalePosition=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],scalePositionWithArbitrary=()=>[...scalePosition(),isArbitraryVariable,isArbitraryValue],scaleOverflow=()=>["auto","hidden","clip","visible","scroll"],scaleOverscroll=()=>["auto","contain","none"],scaleUnambiguousSpacing=()=>[isArbitraryVariable,isArbitraryValue,themeSpacing],scaleInset=()=>[isFraction,"full","auto",...scaleUnambiguousSpacing()],scaleGridTemplateColsRows=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],scaleGridColRowStartAndEnd=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],scaleGridColRowStartOrEnd=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],scaleGridAutoColsRows=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],scaleAlignPrimaryAxis=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],scaleAlignSecondaryAxis=()=>["start","end","center","stretch","center-safe","end-safe"],scaleMargin=()=>["auto",...scaleUnambiguousSpacing()],scaleSizing=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...scaleUnambiguousSpacing()],scaleColor=()=>[themeColor,isArbitraryVariable,isArbitraryValue],scaleBgPosition=()=>[...scalePosition(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],scaleBgRepeat=()=>["no-repeat",{repeat:["","x","y","space","round"]}],scaleBgSize=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],scaleGradientStopPosition=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],scaleRadius=()=>["","none","full",themeRadius,isArbitraryVariable,isArbitraryValue],scaleBorderWidth=()=>["",isNumber,isArbitraryVariableLength,isArbitraryLength],scaleLineStyle=()=>["solid","dashed","dotted","double"],scaleBlendMode=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],scaleMaskImagePosition=()=>[isNumber,isPercent,isArbitraryVariablePosition,isArbitraryPosition],scaleBlur=()=>["","none",themeBlur,isArbitraryVariable,isArbitraryValue],scaleRotate=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],scaleScale=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],scaleSkew=()=>[isNumber,isArbitraryVariable,isArbitraryValue],scaleTranslate=()=>[isFraction,"full",...scaleUnambiguousSpacing()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,themeAspect]}],container:["container"],columns:[{columns:[isNumber,isArbitraryValue,isArbitraryVariable,themeContainer]}],"break-after":[{"break-after":scaleBreak()}],"break-before":[{"break-before":scaleBreak()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:scalePositionWithArbitrary()}],overflow:[{overflow:scaleOverflow()}],"overflow-x":[{"overflow-x":scaleOverflow()}],"overflow-y":[{"overflow-y":scaleOverflow()}],overscroll:[{overscroll:scaleOverscroll()}],"overscroll-x":[{"overscroll-x":scaleOverscroll()}],"overscroll-y":[{"overscroll-y":scaleOverscroll()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:scaleInset()}],"inset-x":[{"inset-x":scaleInset()}],"inset-y":[{"inset-y":scaleInset()}],start:[{start:scaleInset()}],end:[{end:scaleInset()}],top:[{top:scaleInset()}],right:[{right:scaleInset()}],bottom:[{bottom:scaleInset()}],left:[{left:scaleInset()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",themeContainer,...scaleUnambiguousSpacing()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":scaleGridTemplateColsRows()}],"col-start-end":[{col:scaleGridColRowStartAndEnd()}],"col-start":[{"col-start":scaleGridColRowStartOrEnd()}],"col-end":[{"col-end":scaleGridColRowStartOrEnd()}],"grid-rows":[{"grid-rows":scaleGridTemplateColsRows()}],"row-start-end":[{row:scaleGridColRowStartAndEnd()}],"row-start":[{"row-start":scaleGridColRowStartOrEnd()}],"row-end":[{"row-end":scaleGridColRowStartOrEnd()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":scaleGridAutoColsRows()}],"auto-rows":[{"auto-rows":scaleGridAutoColsRows()}],gap:[{gap:scaleUnambiguousSpacing()}],"gap-x":[{"gap-x":scaleUnambiguousSpacing()}],"gap-y":[{"gap-y":scaleUnambiguousSpacing()}],"justify-content":[{justify:[...scaleAlignPrimaryAxis(),"normal"]}],"justify-items":[{"justify-items":[...scaleAlignSecondaryAxis(),"normal"]}],"justify-self":[{"justify-self":["auto",...scaleAlignSecondaryAxis()]}],"align-content":[{content:["normal",...scaleAlignPrimaryAxis()]}],"align-items":[{items:[...scaleAlignSecondaryAxis(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...scaleAlignSecondaryAxis(),{baseline:["","last"]}]}],"place-content":[{"place-content":scaleAlignPrimaryAxis()}],"place-items":[{"place-items":[...scaleAlignSecondaryAxis(),"baseline"]}],"place-self":[{"place-self":["auto",...scaleAlignSecondaryAxis()]}],p:[{p:scaleUnambiguousSpacing()}],px:[{px:scaleUnambiguousSpacing()}],py:[{py:scaleUnambiguousSpacing()}],ps:[{ps:scaleUnambiguousSpacing()}],pe:[{pe:scaleUnambiguousSpacing()}],pt:[{pt:scaleUnambiguousSpacing()}],pr:[{pr:scaleUnambiguousSpacing()}],pb:[{pb:scaleUnambiguousSpacing()}],pl:[{pl:scaleUnambiguousSpacing()}],m:[{m:scaleMargin()}],mx:[{mx:scaleMargin()}],my:[{my:scaleMargin()}],ms:[{ms:scaleMargin()}],me:[{me:scaleMargin()}],mt:[{mt:scaleMargin()}],mr:[{mr:scaleMargin()}],mb:[{mb:scaleMargin()}],ml:[{ml:scaleMargin()}],"space-x":[{"space-x":scaleUnambiguousSpacing()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":scaleUnambiguousSpacing()}],"space-y-reverse":["space-y-reverse"],size:[{size:scaleSizing()}],w:[{w:[themeContainer,"screen",...scaleSizing()]}],"min-w":[{"min-w":[themeContainer,"screen","none",...scaleSizing()]}],"max-w":[{"max-w":[themeContainer,"screen","none","prose",{screen:[themeBreakpoint]},...scaleSizing()]}],h:[{h:["screen","lh",...scaleSizing()]}],"min-h":[{"min-h":["screen","lh","none",...scaleSizing()]}],"max-h":[{"max-h":["screen","lh",...scaleSizing()]}],"font-size":[{text:["base",themeText,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[themeFontWeight,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,themeFont]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[themeTracking,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[themeLeading,...scaleUnambiguousSpacing()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:scaleColor()}],"text-color":[{text:scaleColor()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...scaleLineStyle(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:scaleColor()}],"underline-offset":[{"underline-offset":[isNumber,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:scaleUnambiguousSpacing()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:scaleBgPosition()}],"bg-repeat":[{bg:scaleBgRepeat()}],"bg-size":[{bg:scaleBgSize()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:scaleColor()}],"gradient-from-pos":[{from:scaleGradientStopPosition()}],"gradient-via-pos":[{via:scaleGradientStopPosition()}],"gradient-to-pos":[{to:scaleGradientStopPosition()}],"gradient-from":[{from:scaleColor()}],"gradient-via":[{via:scaleColor()}],"gradient-to":[{to:scaleColor()}],rounded:[{rounded:scaleRadius()}],"rounded-s":[{"rounded-s":scaleRadius()}],"rounded-e":[{"rounded-e":scaleRadius()}],"rounded-t":[{"rounded-t":scaleRadius()}],"rounded-r":[{"rounded-r":scaleRadius()}],"rounded-b":[{"rounded-b":scaleRadius()}],"rounded-l":[{"rounded-l":scaleRadius()}],"rounded-ss":[{"rounded-ss":scaleRadius()}],"rounded-se":[{"rounded-se":scaleRadius()}],"rounded-ee":[{"rounded-ee":scaleRadius()}],"rounded-es":[{"rounded-es":scaleRadius()}],"rounded-tl":[{"rounded-tl":scaleRadius()}],"rounded-tr":[{"rounded-tr":scaleRadius()}],"rounded-br":[{"rounded-br":scaleRadius()}],"rounded-bl":[{"rounded-bl":scaleRadius()}],"border-w":[{border:scaleBorderWidth()}],"border-w-x":[{"border-x":scaleBorderWidth()}],"border-w-y":[{"border-y":scaleBorderWidth()}],"border-w-s":[{"border-s":scaleBorderWidth()}],"border-w-e":[{"border-e":scaleBorderWidth()}],"border-w-t":[{"border-t":scaleBorderWidth()}],"border-w-r":[{"border-r":scaleBorderWidth()}],"border-w-b":[{"border-b":scaleBorderWidth()}],"border-w-l":[{"border-l":scaleBorderWidth()}],"divide-x":[{"divide-x":scaleBorderWidth()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":scaleBorderWidth()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...scaleLineStyle(),"hidden","none"]}],"divide-style":[{divide:[...scaleLineStyle(),"hidden","none"]}],"border-color":[{border:scaleColor()}],"border-color-x":[{"border-x":scaleColor()}],"border-color-y":[{"border-y":scaleColor()}],"border-color-s":[{"border-s":scaleColor()}],"border-color-e":[{"border-e":scaleColor()}],"border-color-t":[{"border-t":scaleColor()}],"border-color-r":[{"border-r":scaleColor()}],"border-color-b":[{"border-b":scaleColor()}],"border-color-l":[{"border-l":scaleColor()}],"divide-color":[{divide:scaleColor()}],"outline-style":[{outline:[...scaleLineStyle(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:scaleColor()}],shadow:[{shadow:["","none",themeShadow,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:scaleColor()}],"inset-shadow":[{"inset-shadow":["none",themeInsetShadow,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":scaleColor()}],"ring-w":[{ring:scaleBorderWidth()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:scaleColor()}],"ring-offset-w":[{"ring-offset":[isNumber,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":scaleColor()}],"inset-ring-w":[{"inset-ring":scaleBorderWidth()}],"inset-ring-color":[{"inset-ring":scaleColor()}],"text-shadow":[{"text-shadow":["none",themeTextShadow,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":scaleColor()}],opacity:[{opacity:[isNumber,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...scaleBlendMode(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":scaleBlendMode()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber]}],"mask-image-linear-from-pos":[{"mask-linear-from":scaleMaskImagePosition()}],"mask-image-linear-to-pos":[{"mask-linear-to":scaleMaskImagePosition()}],"mask-image-linear-from-color":[{"mask-linear-from":scaleColor()}],"mask-image-linear-to-color":[{"mask-linear-to":scaleColor()}],"mask-image-t-from-pos":[{"mask-t-from":scaleMaskImagePosition()}],"mask-image-t-to-pos":[{"mask-t-to":scaleMaskImagePosition()}],"mask-image-t-from-color":[{"mask-t-from":scaleColor()}],"mask-image-t-to-color":[{"mask-t-to":scaleColor()}],"mask-image-r-from-pos":[{"mask-r-from":scaleMaskImagePosition()}],"mask-image-r-to-pos":[{"mask-r-to":scaleMaskImagePosition()}],"mask-image-r-from-color":[{"mask-r-from":scaleColor()}],"mask-image-r-to-color":[{"mask-r-to":scaleColor()}],"mask-image-b-from-pos":[{"mask-b-from":scaleMaskImagePosition()}],"mask-image-b-to-pos":[{"mask-b-to":scaleMaskImagePosition()}],"mask-image-b-from-color":[{"mask-b-from":scaleColor()}],"mask-image-b-to-color":[{"mask-b-to":scaleColor()}],"mask-image-l-from-pos":[{"mask-l-from":scaleMaskImagePosition()}],"mask-image-l-to-pos":[{"mask-l-to":scaleMaskImagePosition()}],"mask-image-l-from-color":[{"mask-l-from":scaleColor()}],"mask-image-l-to-color":[{"mask-l-to":scaleColor()}],"mask-image-x-from-pos":[{"mask-x-from":scaleMaskImagePosition()}],"mask-image-x-to-pos":[{"mask-x-to":scaleMaskImagePosition()}],"mask-image-x-from-color":[{"mask-x-from":scaleColor()}],"mask-image-x-to-color":[{"mask-x-to":scaleColor()}],"mask-image-y-from-pos":[{"mask-y-from":scaleMaskImagePosition()}],"mask-image-y-to-pos":[{"mask-y-to":scaleMaskImagePosition()}],"mask-image-y-from-color":[{"mask-y-from":scaleColor()}],"mask-image-y-to-color":[{"mask-y-to":scaleColor()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":scaleMaskImagePosition()}],"mask-image-radial-to-pos":[{"mask-radial-to":scaleMaskImagePosition()}],"mask-image-radial-from-color":[{"mask-radial-from":scaleColor()}],"mask-image-radial-to-color":[{"mask-radial-to":scaleColor()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":scalePosition()}],"mask-image-conic-pos":[{"mask-conic":[isNumber]}],"mask-image-conic-from-pos":[{"mask-conic-from":scaleMaskImagePosition()}],"mask-image-conic-to-pos":[{"mask-conic-to":scaleMaskImagePosition()}],"mask-image-conic-from-color":[{"mask-conic-from":scaleColor()}],"mask-image-conic-to-color":[{"mask-conic-to":scaleColor()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:scaleBgPosition()}],"mask-repeat":[{mask:scaleBgRepeat()}],"mask-size":[{mask:scaleBgSize()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:scaleBlur()}],brightness:[{brightness:[isNumber,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",themeDropShadow,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":scaleColor()}],grayscale:[{grayscale:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":scaleBlur()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":scaleUnambiguousSpacing()}],"border-spacing-x":[{"border-spacing-x":scaleUnambiguousSpacing()}],"border-spacing-y":[{"border-spacing-y":scaleUnambiguousSpacing()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",themeEase,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",themeAnimate,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[themePerspective,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":scalePositionWithArbitrary()}],rotate:[{rotate:scaleRotate()}],"rotate-x":[{"rotate-x":scaleRotate()}],"rotate-y":[{"rotate-y":scaleRotate()}],"rotate-z":[{"rotate-z":scaleRotate()}],scale:[{scale:scaleScale()}],"scale-x":[{"scale-x":scaleScale()}],"scale-y":[{"scale-y":scaleScale()}],"scale-z":[{"scale-z":scaleScale()}],"scale-3d":["scale-3d"],skew:[{skew:scaleSkew()}],"skew-x":[{"skew-x":scaleSkew()}],"skew-y":[{"skew-y":scaleSkew()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:scalePositionWithArbitrary()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:scaleTranslate()}],"translate-x":[{"translate-x":scaleTranslate()}],"translate-y":[{"translate-y":scaleTranslate()}],"translate-z":[{"translate-z":scaleTranslate()}],"translate-none":["translate-none"],accent:[{accent:scaleColor()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:scaleColor()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":scaleUnambiguousSpacing()}],"scroll-mx":[{"scroll-mx":scaleUnambiguousSpacing()}],"scroll-my":[{"scroll-my":scaleUnambiguousSpacing()}],"scroll-ms":[{"scroll-ms":scaleUnambiguousSpacing()}],"scroll-me":[{"scroll-me":scaleUnambiguousSpacing()}],"scroll-mt":[{"scroll-mt":scaleUnambiguousSpacing()}],"scroll-mr":[{"scroll-mr":scaleUnambiguousSpacing()}],"scroll-mb":[{"scroll-mb":scaleUnambiguousSpacing()}],"scroll-ml":[{"scroll-ml":scaleUnambiguousSpacing()}],"scroll-p":[{"scroll-p":scaleUnambiguousSpacing()}],"scroll-px":[{"scroll-px":scaleUnambiguousSpacing()}],"scroll-py":[{"scroll-py":scaleUnambiguousSpacing()}],"scroll-ps":[{"scroll-ps":scaleUnambiguousSpacing()}],"scroll-pe":[{"scroll-pe":scaleUnambiguousSpacing()}],"scroll-pt":[{"scroll-pt":scaleUnambiguousSpacing()}],"scroll-pr":[{"scroll-pr":scaleUnambiguousSpacing()}],"scroll-pb":[{"scroll-pb":scaleUnambiguousSpacing()}],"scroll-pl":[{"scroll-pl":scaleUnambiguousSpacing()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...scaleColor()]}],"stroke-w":[{stroke:[isNumber,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...scaleColor()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...inputs){return twMerge(clsx(inputs))}const ModernButton=({children,variant="solid",size="md",icon:Icon,iconPosition="left",loading=!1,disabled=!1,fullWidth=!1,className,onClick,type="button"})=>{const mappedVariant=variant==="solid"?"primary":variant==="bordered"?"outline":variant==="secondary"?"secondary":variant==="ghost"?"ghost":"secondary",mappedSize=size;return jsxRuntimeExports.jsx(Button,{variant:mappedVariant,size:mappedSize,icon:Icon,iconPosition,loading,disabled,fullWidth,className:cn(className),onClick,type,children})},ModernCard=({children,className,variant="default",padding="md",shadow="medium",onClick,hover=!1,border=!0,background="solid",...motionProps})=>{const baseClasses=cn("relative overflow-hidden transition-all duration-300",{"p-0":padding==="none","p-4":padding==="sm","p-6":padding==="md","p-8":padding==="lg","p-12":padding==="xl","shadow-none":shadow==="none","shadow-soft":shadow==="soft","shadow-medium":shadow==="medium","shadow-large":shadow==="large","shadow-glow":shadow==="glow","border border-secondary-200 dark:border-secondary-700":border,"border-0":!border,"bg-white dark:bg-dark-card":background==="solid","bg-gradient-to-br from-white to-secondary-50 dark:from-dark-card dark:to-secondary-800":background==="gradient","backdrop-blur-md bg-white/80 dark:bg-dark-card/80 border-white/20 dark:border-secondary-700/50":background==="glass","cursor-pointer":onClick||hover,"hover:scale-[1.02] hover:-translate-y-1":hover,"active:scale-[0.98]":onClick},className),variantClasses={default:"rounded-2xl",glass:"rounded-3xl backdrop-blur-xl bg-white/10 dark:bg-dark-card/10 border-white/20 dark:border-secondary-700/30",gradient:"rounded-2xl bg-gradient-to-br from-primary-50 via-white to-secondary-50 dark:from-primary-900/20 dark:via-dark-card dark:to-secondary-800",elevated:"rounded-2xl shadow-xl hover:shadow-2xl",interactive:"rounded-2xl hover:shadow-xl hover:-translate-y-2 transition-all duration-300"},shadowGlow=shadow==="glow"?"shadow-glow":"";return jsxRuntimeExports.jsxs(motion.div,{className:cn(baseClasses,variantClasses[variant],shadowGlow),onClick,whileHover:hover?{scale:1.02,y:-4}:void 0,whileTap:onClick?{scale:.98}:void 0,...motionProps,children:[variant==="glass"&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent dark:from-white/5"}),jsxRuntimeExports.jsx("div",{className:"relative z-10",children}),variant==="interactive"&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-primary-500/0 via-primary-500/10 to-primary-500/0 opacity-0 hover:opacity-100 transition-opacity duration-300"})]})};var define_process_env_default={};const stringToByteArray$1=function(str){const out=[];let p2=0;for(let i=0;i<str.length;i++){let c=str.charCodeAt(i);c<128?out[p2++]=c:c<2048?(out[p2++]=c>>6|192,out[p2++]=c&63|128):(c&64512)===55296&&i+1<str.length&&(str.charCodeAt(i+1)&64512)===56320?(c=65536+((c&1023)<<10)+(str.charCodeAt(++i)&1023),out[p2++]=c>>18|240,out[p2++]=c>>12&63|128,out[p2++]=c>>6&63|128,out[p2++]=c&63|128):(out[p2++]=c>>12|224,out[p2++]=c>>6&63|128,out[p2++]=c&63|128)}return out},byteArrayToString=function(bytes){const out=[];let pos=0,c=0;for(;pos<bytes.length;){const c1=bytes[pos++];if(c1<128)out[c++]=String.fromCharCode(c1);else if(c1>191&&c1<224){const c2=bytes[pos++];out[c++]=String.fromCharCode((c1&31)<<6|c2&63)}else if(c1>239&&c1<365){const c2=bytes[pos++],c3=bytes[pos++],c4=bytes[pos++],u=((c1&7)<<18|(c2&63)<<12|(c3&63)<<6|c4&63)-65536;out[c++]=String.fromCharCode(55296+(u>>10)),out[c++]=String.fromCharCode(56320+(u&1023))}else{const c2=bytes[pos++],c3=bytes[pos++];out[c++]=String.fromCharCode((c1&15)<<12|(c2&63)<<6|c3&63)}}return out.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(input,webSafe){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();const byteToCharMap=webSafe?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[];for(let i=0;i<input.length;i+=3){const byte1=input[i],haveByte2=i+1<input.length,byte2=haveByte2?input[i+1]:0,haveByte3=i+2<input.length,byte3=haveByte3?input[i+2]:0,outByte1=byte1>>2,outByte2=(byte1&3)<<4|byte2>>4;let outByte3=(byte2&15)<<2|byte3>>6,outByte4=byte3&63;haveByte3||(outByte4=64,haveByte2||(outByte3=64)),output.push(byteToCharMap[outByte1],byteToCharMap[outByte2],byteToCharMap[outByte3],byteToCharMap[outByte4])}return output.join("")},encodeString(input,webSafe){return this.HAS_NATIVE_SUPPORT&&!webSafe?btoa(input):this.encodeByteArray(stringToByteArray$1(input),webSafe)},decodeString(input,webSafe){return this.HAS_NATIVE_SUPPORT&&!webSafe?atob(input):byteArrayToString(this.decodeStringToByteArray(input,webSafe))},decodeStringToByteArray(input,webSafe){this.init_();const charToByteMap=webSafe?this.charToByteMapWebSafe_:this.charToByteMap_,output=[];for(let i=0;i<input.length;){const byte1=charToByteMap[input.charAt(i++)],byte2=i<input.length?charToByteMap[input.charAt(i)]:0;++i;const byte3=i<input.length?charToByteMap[input.charAt(i)]:64;++i;const byte4=i<input.length?charToByteMap[input.charAt(i)]:64;if(++i,byte1==null||byte2==null||byte3==null||byte4==null)throw new DecodeBase64StringError;const outByte1=byte1<<2|byte2>>4;if(output.push(outByte1),byte3!==64){const outByte2=byte2<<4&240|byte3>>2;if(output.push(outByte2),byte4!==64){const outByte3=byte3<<6&192|byte4;output.push(outByte3)}}}return output},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(str){const utf8Bytes=stringToByteArray$1(str);return base64.encodeByteArray(utf8Bytes,!0)},base64urlEncodeWithoutPadding=function(str){return base64Encode(str).replace(/\./g,"")},base64Decode=function(str){try{return base64.decodeString(str,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const defaultsJsonString=define_process_env_default.__FIREBASE_DEFAULTS__;if(defaultsJsonString)return JSON.parse(defaultsJsonString)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let match;try{match=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const decoded=match&&base64Decode(match[1]);return decoded&&JSON.parse(decoded)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},getDefaultEmulatorHost=productName=>{var _a,_b;return(_b=(_a=getDefaults())===null||_a===void 0?void 0:_a.emulatorHosts)===null||_b===void 0?void 0:_b[productName]},getDefaultAppConfig=()=>{var _a;return(_a=getDefaults())===null||_a===void 0?void 0:_a.config},getExperimentalSetting=name2=>{var _a;return(_a=getDefaults())===null||_a===void 0?void 0:_a[`_${name2}`]};class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((resolve,reject)=>{this.resolve=resolve,this.reject=reject})}wrapCallback(callback){return(error,value)=>{error?this.reject(error):this.resolve(value),typeof callback=="function"&&(this.promise.catch(()=>{}),callback.length===1?callback(error):callback(error,value))}}}function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const runtime=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof runtime=="object"&&runtime.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const ua=getUA();return ua.indexOf("MSIE ")>=0||ua.indexOf("Trident/")>=0}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((resolve,reject)=>{try{let preExist=!0;const DB_CHECK_NAME="validate-browser-context-for-indexeddb-analytics-module",request=self.indexedDB.open(DB_CHECK_NAME);request.onsuccess=()=>{request.result.close(),preExist||self.indexedDB.deleteDatabase(DB_CHECK_NAME),resolve(!0)},request.onupgradeneeded=()=>{preExist=!1},request.onerror=()=>{var _a;reject(((_a=request.error)===null||_a===void 0?void 0:_a.message)||"")}}catch(error){reject(error)}})}const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(code,message,customData){super(message),this.code=code,this.customData=customData,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(service,serviceName,errors){this.service=service,this.serviceName=serviceName,this.errors=errors}create(code,...data){const customData=data[0]||{},fullCode=`${this.service}/${code}`,template=this.errors[code],message=template?replaceTemplate(template,customData):"Error",fullMessage=`${this.serviceName}: ${message} (${fullCode}).`;return new FirebaseError(fullCode,fullMessage,customData)}}function replaceTemplate(template,data){return template.replace(PATTERN,(_,key)=>{const value=data[key];return value!=null?String(value):`<${key}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty(obj){for(const key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))return!1;return!0}function deepEqual(a,b){if(a===b)return!0;const aKeys=Object.keys(a),bKeys=Object.keys(b);for(const k2 of aKeys){if(!bKeys.includes(k2))return!1;const aProp=a[k2],bProp=b[k2];if(isObject(aProp)&&isObject(bProp)){if(!deepEqual(aProp,bProp))return!1}else if(aProp!==bProp)return!1}for(const k2 of bKeys)if(!aKeys.includes(k2))return!1;return!0}function isObject(thing){return thing!==null&&typeof thing=="object"}function querystring(querystringParams){const params=[];for(const[key,value]of Object.entries(querystringParams))Array.isArray(value)?value.forEach(arrayVal=>{params.push(encodeURIComponent(key)+"="+encodeURIComponent(arrayVal))}):params.push(encodeURIComponent(key)+"="+encodeURIComponent(value));return params.length?"&"+params.join("&"):""}function createSubscribe(executor,onNoObservers){const proxy=new ObserverProxy(executor,onNoObservers);return proxy.subscribe.bind(proxy)}class ObserverProxy{constructor(executor,onNoObservers){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=onNoObservers,this.task.then(()=>{executor(this)}).catch(e=>{this.error(e)})}next(value){this.forEachObserver(observer=>{observer.next(value)})}error(error){this.forEachObserver(observer=>{observer.error(error)}),this.close(error)}complete(){this.forEachObserver(observer=>{observer.complete()}),this.close()}subscribe(nextOrObserver,error,complete){let observer;if(nextOrObserver===void 0&&error===void 0&&complete===void 0)throw new Error("Missing Observer.");implementsAnyMethods(nextOrObserver,["next","error","complete"])?observer=nextOrObserver:observer={next:nextOrObserver,error,complete},observer.next===void 0&&(observer.next=noop),observer.error===void 0&&(observer.error=noop),observer.complete===void 0&&(observer.complete=noop);const unsub=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?observer.error(this.finalError):observer.complete()}catch{}}),this.observers.push(observer),unsub}unsubscribeOne(i){this.observers===void 0||this.observers[i]===void 0||(delete this.observers[i],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(fn){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,fn)}sendOne(i,fn){this.task.then(()=>{if(this.observers!==void 0&&this.observers[i]!==void 0)try{fn(this.observers[i])}catch(e){typeof console<"u"&&console.error&&console.error(e)}})}close(err){this.finalized||(this.finalized=!0,err!==void 0&&(this.finalError=err),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(obj,methods){if(typeof obj!="object"||obj===null)return!1;for(const method of methods)if(method in obj&&typeof obj[method]=="function")return!0;return!1}function noop(){}function getModularInstance(service){return service&&service._delegate?service._delegate:service}class Component{constructor(name2,instanceFactory,type){this.name=name2,this.instanceFactory=instanceFactory,this.type=type,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(mode){return this.instantiationMode=mode,this}setMultipleInstances(multipleInstances){return this.multipleInstances=multipleInstances,this}setServiceProps(props){return this.serviceProps=props,this}setInstanceCreatedCallback(callback){return this.onInstanceCreated=callback,this}}const DEFAULT_ENTRY_NAME$1="[DEFAULT]";class Provider{constructor(name2,container){this.name=name2,this.container=container,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(identifier){const normalizedIdentifier=this.normalizeInstanceIdentifier(identifier);if(!this.instancesDeferred.has(normalizedIdentifier)){const deferred=new Deferred;if(this.instancesDeferred.set(normalizedIdentifier,deferred),this.isInitialized(normalizedIdentifier)||this.shouldAutoInitialize())try{const instance=this.getOrInitializeService({instanceIdentifier:normalizedIdentifier});instance&&deferred.resolve(instance)}catch{}}return this.instancesDeferred.get(normalizedIdentifier).promise}getImmediate(options){var _a;const normalizedIdentifier=this.normalizeInstanceIdentifier(options==null?void 0:options.identifier),optional=(_a=options==null?void 0:options.optional)!==null&&_a!==void 0?_a:!1;if(this.isInitialized(normalizedIdentifier)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:normalizedIdentifier})}catch(e){if(optional)return null;throw e}else{if(optional)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(component){if(component.name!==this.name)throw Error(`Mismatching Component ${component.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=component,!!this.shouldAutoInitialize()){if(isComponentEager(component))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[instanceIdentifier,instanceDeferred]of this.instancesDeferred.entries()){const normalizedIdentifier=this.normalizeInstanceIdentifier(instanceIdentifier);try{const instance=this.getOrInitializeService({instanceIdentifier:normalizedIdentifier});instanceDeferred.resolve(instance)}catch{}}}}clearInstance(identifier=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(identifier),this.instancesOptions.delete(identifier),this.instances.delete(identifier)}async delete(){const services=Array.from(this.instances.values());await Promise.all([...services.filter(service=>"INTERNAL"in service).map(service=>service.INTERNAL.delete()),...services.filter(service=>"_delete"in service).map(service=>service._delete())])}isComponentSet(){return this.component!=null}isInitialized(identifier=DEFAULT_ENTRY_NAME$1){return this.instances.has(identifier)}getOptions(identifier=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(identifier)||{}}initialize(opts={}){const{options={}}=opts,normalizedIdentifier=this.normalizeInstanceIdentifier(opts.instanceIdentifier);if(this.isInitialized(normalizedIdentifier))throw Error(`${this.name}(${normalizedIdentifier}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const instance=this.getOrInitializeService({instanceIdentifier:normalizedIdentifier,options});for(const[instanceIdentifier,instanceDeferred]of this.instancesDeferred.entries()){const normalizedDeferredIdentifier=this.normalizeInstanceIdentifier(instanceIdentifier);normalizedIdentifier===normalizedDeferredIdentifier&&instanceDeferred.resolve(instance)}return instance}onInit(callback,identifier){var _a;const normalizedIdentifier=this.normalizeInstanceIdentifier(identifier),existingCallbacks=(_a=this.onInitCallbacks.get(normalizedIdentifier))!==null&&_a!==void 0?_a:new Set;existingCallbacks.add(callback),this.onInitCallbacks.set(normalizedIdentifier,existingCallbacks);const existingInstance=this.instances.get(normalizedIdentifier);return existingInstance&&callback(existingInstance,normalizedIdentifier),()=>{existingCallbacks.delete(callback)}}invokeOnInitCallbacks(instance,identifier){const callbacks=this.onInitCallbacks.get(identifier);if(callbacks)for(const callback of callbacks)try{callback(instance,identifier)}catch{}}getOrInitializeService({instanceIdentifier,options={}}){let instance=this.instances.get(instanceIdentifier);if(!instance&&this.component&&(instance=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(instanceIdentifier),options}),this.instances.set(instanceIdentifier,instance),this.instancesOptions.set(instanceIdentifier,options),this.invokeOnInitCallbacks(instance,instanceIdentifier),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,instanceIdentifier,instance)}catch{}return instance||null}normalizeInstanceIdentifier(identifier=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?identifier:DEFAULT_ENTRY_NAME$1:identifier}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(identifier){return identifier===DEFAULT_ENTRY_NAME$1?void 0:identifier}function isComponentEager(component){return component.instantiationMode==="EAGER"}class ComponentContainer{constructor(name2){this.name=name2,this.providers=new Map}addComponent(component){const provider=this.getProvider(component.name);if(provider.isComponentSet())throw new Error(`Component ${component.name} has already been registered with ${this.name}`);provider.setComponent(component)}addOrOverwriteComponent(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)}getProvider(name2){if(this.providers.has(name2))return this.providers.get(name2);const provider=new Provider(name2,this);return this.providers.set(name2,provider),provider}getProviders(){return Array.from(this.providers.values())}}var LogLevel;(function(LogLevel2){LogLevel2[LogLevel2.DEBUG=0]="DEBUG",LogLevel2[LogLevel2.VERBOSE=1]="VERBOSE",LogLevel2[LogLevel2.INFO=2]="INFO",LogLevel2[LogLevel2.WARN=3]="WARN",LogLevel2[LogLevel2.ERROR=4]="ERROR",LogLevel2[LogLevel2.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(instance,logType,...args)=>{if(logType<instance.logLevel)return;const now=new Date().toISOString(),method=ConsoleMethod[logType];if(method)console[method](`[${now}]  ${instance.name}:`,...args);else throw new Error(`Attempted to log a message with an invalid logType (value: ${logType})`)};class Logger{constructor(name2){this.name=name2,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(val){if(!(val in LogLevel))throw new TypeError(`Invalid value "${val}" assigned to \`logLevel\``);this._logLevel=val}setLogLevel(val){this._logLevel=typeof val=="string"?levelStringToEnum[val]:val}get logHandler(){return this._logHandler}set logHandler(val){if(typeof val!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=val}get userLogHandler(){return this._userLogHandler}set userLogHandler(val){this._userLogHandler=val}debug(...args){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...args),this._logHandler(this,LogLevel.DEBUG,...args)}log(...args){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...args),this._logHandler(this,LogLevel.VERBOSE,...args)}info(...args){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...args),this._logHandler(this,LogLevel.INFO,...args)}warn(...args){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...args),this._logHandler(this,LogLevel.WARN,...args)}error(...args){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...args),this._logHandler(this,LogLevel.ERROR,...args)}}const instanceOfAny=(object,constructors)=>constructors.some(c=>object instanceof c);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(request){const promise=new Promise((resolve,reject)=>{const unlisten=()=>{request.removeEventListener("success",success),request.removeEventListener("error",error)},success=()=>{resolve(wrap(request.result)),unlisten()},error=()=>{reject(request.error),unlisten()};request.addEventListener("success",success),request.addEventListener("error",error)});return promise.then(value=>{value instanceof IDBCursor&&cursorRequestMap.set(value,request)}).catch(()=>{}),reverseTransformCache.set(promise,request),promise}function cacheDonePromiseForTransaction(tx){if(transactionDoneMap.has(tx))return;const done=new Promise((resolve,reject)=>{const unlisten=()=>{tx.removeEventListener("complete",complete),tx.removeEventListener("error",error),tx.removeEventListener("abort",error)},complete=()=>{resolve(),unlisten()},error=()=>{reject(tx.error||new DOMException("AbortError","AbortError")),unlisten()};tx.addEventListener("complete",complete),tx.addEventListener("error",error),tx.addEventListener("abort",error)});transactionDoneMap.set(tx,done)}let idbProxyTraps={get(target,prop,receiver){if(target instanceof IDBTransaction){if(prop==="done")return transactionDoneMap.get(target);if(prop==="objectStoreNames")return target.objectStoreNames||transactionStoreNamesMap.get(target);if(prop==="store")return receiver.objectStoreNames[1]?void 0:receiver.objectStore(receiver.objectStoreNames[0])}return wrap(target[prop])},set(target,prop,value){return target[prop]=value,!0},has(target,prop){return target instanceof IDBTransaction&&(prop==="done"||prop==="store")?!0:prop in target}};function replaceTraps(callback){idbProxyTraps=callback(idbProxyTraps)}function wrapFunction(func){return func===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(storeNames,...args){const tx=func.call(unwrap(this),storeNames,...args);return transactionStoreNamesMap.set(tx,storeNames.sort?storeNames.sort():[storeNames]),wrap(tx)}:getCursorAdvanceMethods().includes(func)?function(...args){return func.apply(unwrap(this),args),wrap(cursorRequestMap.get(this))}:function(...args){return wrap(func.apply(unwrap(this),args))}}function transformCachableValue(value){return typeof value=="function"?wrapFunction(value):(value instanceof IDBTransaction&&cacheDonePromiseForTransaction(value),instanceOfAny(value,getIdbProxyableTypes())?new Proxy(value,idbProxyTraps):value)}function wrap(value){if(value instanceof IDBRequest)return promisifyRequest(value);if(transformCache.has(value))return transformCache.get(value);const newValue=transformCachableValue(value);return newValue!==value&&(transformCache.set(value,newValue),reverseTransformCache.set(newValue,value)),newValue}const unwrap=value=>reverseTransformCache.get(value);function openDB(name2,version2,{blocked,upgrade,blocking,terminated}={}){const request=indexedDB.open(name2,version2),openPromise=wrap(request);return upgrade&&request.addEventListener("upgradeneeded",event=>{upgrade(wrap(request.result),event.oldVersion,event.newVersion,wrap(request.transaction),event)}),blocked&&request.addEventListener("blocked",event=>blocked(event.oldVersion,event.newVersion,event)),openPromise.then(db=>{terminated&&db.addEventListener("close",()=>terminated()),blocking&&db.addEventListener("versionchange",event=>blocking(event.oldVersion,event.newVersion,event))}).catch(()=>{}),openPromise}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(target,prop){if(!(target instanceof IDBDatabase&&!(prop in target)&&typeof prop=="string"))return;if(cachedMethods.get(prop))return cachedMethods.get(prop);const targetFuncName=prop.replace(/FromIndex$/,""),useIndex=prop!==targetFuncName,isWrite=writeMethods.includes(targetFuncName);if(!(targetFuncName in(useIndex?IDBIndex:IDBObjectStore).prototype)||!(isWrite||readMethods.includes(targetFuncName)))return;const method=async function(storeName,...args){const tx=this.transaction(storeName,isWrite?"readwrite":"readonly");let target2=tx.store;return useIndex&&(target2=target2.index(args.shift())),(await Promise.all([target2[targetFuncName](...args),isWrite&&tx.done]))[0]};return cachedMethods.set(prop,method),method}replaceTraps(oldTraps=>({...oldTraps,get:(target,prop,receiver)=>getMethod(target,prop)||oldTraps.get(target,prop,receiver),has:(target,prop)=>!!getMethod(target,prop)||oldTraps.has(target,prop)}));class PlatformLoggerServiceImpl{constructor(container){this.container=container}getPlatformInfoString(){return this.container.getProviders().map(provider=>{if(isVersionServiceProvider(provider)){const service=provider.getImmediate();return`${service.library}/${service.version}`}else return null}).filter(logString=>logString).join(" ")}}function isVersionServiceProvider(provider){const component=provider.getComponent();return(component==null?void 0:component.type)==="VERSION"}const name$q="@firebase/app",version$1$1="0.10.13";const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2="@firebase/vertexai-preview",name$1$1="@firebase/firestore-compat",name$r="firebase",version$2="10.14.1";const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(app2,component){try{app2.container.addComponent(component)}catch(e){logger.debug(`Component ${component.name} failed to register with FirebaseApp ${app2.name}`,e)}}function _registerComponent(component){const componentName=component.name;if(_components.has(componentName))return logger.debug(`There were multiple attempts to register component ${componentName}.`),!1;_components.set(componentName,component);for(const app2 of _apps.values())_addComponent(app2,component);for(const serverApp of _serverApps.values())_addComponent(serverApp,component);return!0}function _getProvider(app2,name2){const heartbeatController=app2.container.getProvider("heartbeat").getImmediate({optional:!0});return heartbeatController&&heartbeatController.triggerHeartbeat(),app2.container.getProvider(name2)}function _isFirebaseServerApp(obj){return obj.settings!==void 0}const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);class FirebaseAppImpl{constructor(options,config,container){this._isDeleted=!1,this._options=Object.assign({},options),this._config=Object.assign({},config),this._name=config.name,this._automaticDataCollectionEnabled=config.automaticDataCollectionEnabled,this._container=container,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(val){this.checkDestroyed(),this._automaticDataCollectionEnabled=val}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(val){this._isDeleted=val}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}const SDK_VERSION=version$2;function initializeApp(_options,rawConfig={}){let options=_options;typeof rawConfig!="object"&&(rawConfig={name:rawConfig});const config=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},rawConfig),name2=config.name;if(typeof name2!="string"||!name2)throw ERROR_FACTORY.create("bad-app-name",{appName:String(name2)});if(options||(options=getDefaultAppConfig()),!options)throw ERROR_FACTORY.create("no-options");const existingApp=_apps.get(name2);if(existingApp){if(deepEqual(options,existingApp.options)&&deepEqual(config,existingApp.config))return existingApp;throw ERROR_FACTORY.create("duplicate-app",{appName:name2})}const container=new ComponentContainer(name2);for(const component of _components.values())container.addComponent(component);const newApp=new FirebaseAppImpl(options,config,container);return _apps.set(name2,newApp),newApp}function getApp(name2=DEFAULT_ENTRY_NAME){const app2=_apps.get(name2);if(!app2&&name2===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!app2)throw ERROR_FACTORY.create("no-app",{appName:name2});return app2}function registerVersion(libraryKeyOrName,version2,variant){var _a;let library=(_a=PLATFORM_LOG_STRING[libraryKeyOrName])!==null&&_a!==void 0?_a:libraryKeyOrName;variant&&(library+=`-${variant}`);const libraryMismatch=library.match(/\s|\//),versionMismatch=version2.match(/\s|\//);if(libraryMismatch||versionMismatch){const warning=[`Unable to register library "${library}" with version "${version2}":`];libraryMismatch&&warning.push(`library name "${library}" contains illegal characters (whitespace or "/")`),libraryMismatch&&versionMismatch&&warning.push("and"),versionMismatch&&warning.push(`version name "${version2}" contains illegal characters (whitespace or "/")`),logger.warn(warning.join(" "));return}_registerComponent(new Component(`${library}-version`,()=>({library,version:version2}),"VERSION"))}const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(db,oldVersion)=>{switch(oldVersion){case 0:try{db.createObjectStore(STORE_NAME)}catch(e){console.warn(e)}}}}).catch(e=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:e.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(app2){try{const tx=(await getDbPromise()).transaction(STORE_NAME),result=await tx.objectStore(STORE_NAME).get(computeKey(app2));return await tx.done,result}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const idbGetError=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});logger.warn(idbGetError.message)}}}async function writeHeartbeatsToIndexedDB(app2,heartbeatObject){try{const tx=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await tx.objectStore(STORE_NAME).put(heartbeatObject,computeKey(app2)),await tx.done}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const idbGetError=ERROR_FACTORY.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});logger.warn(idbGetError.message)}}}function computeKey(app2){return`${app2.name}!${app2.options.appId}`}const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(container){this.container=container,this._heartbeatsCache=null;const app2=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(app2),this._heartbeatsCachePromise=this._storage.read().then(result=>(this._heartbeatsCache=result,result))}async triggerHeartbeat(){var _a,_b;try{const agent=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),date=getUTCDateString();return((_a=this._heartbeatsCache)===null||_a===void 0?void 0:_a.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((_b=this._heartbeatsCache)===null||_b===void 0?void 0:_b.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===date||this._heartbeatsCache.heartbeats.some(singleDateHeartbeat=>singleDateHeartbeat.date===date)?void 0:(this._heartbeatsCache.heartbeats.push({date,agent}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(singleDateHeartbeat=>{const hbTimestamp=new Date(singleDateHeartbeat.date).valueOf();return Date.now()-hbTimestamp<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache))}catch(e){logger.warn(e)}}async getHeartbeatsHeader(){var _a;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((_a=this._heartbeatsCache)===null||_a===void 0?void 0:_a.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const date=getUTCDateString(),{heartbeatsToSend,unsentEntries}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),headerString=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:heartbeatsToSend}));return this._heartbeatsCache.lastSentHeartbeatDate=date,unsentEntries.length>0?(this._heartbeatsCache.heartbeats=unsentEntries,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),headerString}catch(e){return logger.warn(e),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(heartbeatsCache,maxSize=MAX_HEADER_BYTES){const heartbeatsToSend=[];let unsentEntries=heartbeatsCache.slice();for(const singleDateHeartbeat of heartbeatsCache){const heartbeatEntry=heartbeatsToSend.find(hb=>hb.agent===singleDateHeartbeat.agent);if(heartbeatEntry){if(heartbeatEntry.dates.push(singleDateHeartbeat.date),countBytes(heartbeatsToSend)>maxSize){heartbeatEntry.dates.pop();break}}else if(heartbeatsToSend.push({agent:singleDateHeartbeat.agent,dates:[singleDateHeartbeat.date]}),countBytes(heartbeatsToSend)>maxSize){heartbeatsToSend.pop();break}unsentEntries=unsentEntries.slice(1)}return{heartbeatsToSend,unsentEntries}}class HeartbeatStorageImpl{constructor(app2){this.app=app2,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const idbHeartbeatObject=await readHeartbeatsFromIndexedDB(this.app);return idbHeartbeatObject!=null&&idbHeartbeatObject.heartbeats?idbHeartbeatObject:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(heartbeatsObject){var _a;if(await this._canUseIndexedDBPromise){const existingHeartbeatsObject=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(_a=heartbeatsObject.lastSentHeartbeatDate)!==null&&_a!==void 0?_a:existingHeartbeatsObject.lastSentHeartbeatDate,heartbeats:heartbeatsObject.heartbeats})}else return}async add(heartbeatsObject){var _a;if(await this._canUseIndexedDBPromise){const existingHeartbeatsObject=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(_a=heartbeatsObject.lastSentHeartbeatDate)!==null&&_a!==void 0?_a:existingHeartbeatsObject.lastSentHeartbeatDate,heartbeats:[...existingHeartbeatsObject.heartbeats,...heartbeatsObject.heartbeats]})}else return}}function countBytes(heartbeatsCache){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:heartbeatsCache})).length}function registerCoreComponents(variant){_registerComponent(new Component("platform-logger",container=>new PlatformLoggerServiceImpl(container),"PRIVATE")),_registerComponent(new Component("heartbeat",container=>new HeartbeatServiceImpl(container),"PRIVATE")),registerVersion(name$q,version$1$1,variant),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");function __rest(s,e){var t={};for(var p2 in s)Object.prototype.hasOwnProperty.call(s,p2)&&e.indexOf(p2)<0&&(t[p2]=s[p2]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,p2=Object.getOwnPropertySymbols(s);i<p2.length;i++)e.indexOf(p2[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p2[i])&&(t[p2[i]]=s[p2[i]]);return t}function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());const logClient=new Logger("@firebase/auth");function _logWarn(msg,...args){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${msg}`,...args)}function _logError(msg,...args){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${msg}`,...args)}function _fail(authOrCode,...rest){throw createErrorInternal(authOrCode,...rest)}function _createError(authOrCode,...rest){return createErrorInternal(authOrCode,...rest)}function _errorWithCustomMessage(auth2,code,message){const errorMap=Object.assign(Object.assign({},prodErrorMap()),{[code]:message});return new ErrorFactory("auth","Firebase",errorMap).create(code,{appName:auth2.name})}function _serverAppCurrentUserOperationNotSupportedError(auth2){return _errorWithCustomMessage(auth2,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(auth2,object,instance){const constructorInstance=instance;if(!(object instanceof constructorInstance))throw constructorInstance.name!==object.constructor.name&&_fail(auth2,"argument-error"),_errorWithCustomMessage(auth2,"argument-error",`Type of ${object.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(authOrCode,...rest){if(typeof authOrCode!="string"){const code=rest[0],fullParams=[...rest.slice(1)];return fullParams[0]&&(fullParams[0].appName=authOrCode.name),authOrCode._errorFactory.create(code,...fullParams)}return _DEFAULT_AUTH_ERROR_FACTORY.create(authOrCode,...rest)}function _assert(assertion,authOrCode,...rest){if(!assertion)throw createErrorInternal(authOrCode,...rest)}function debugFail(failure){const message="INTERNAL ASSERTION FAILED: "+failure;throw _logError(message),new Error(message)}function debugAssert(assertion,message){assertion||debugFail(message)}function _getCurrentUrl(){var _a;return typeof self<"u"&&((_a=self.location)===null||_a===void 0?void 0:_a.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var _a;return typeof self<"u"&&((_a=self.location)===null||_a===void 0?void 0:_a.protocol)||null}function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const navigatorLanguage=navigator;return navigatorLanguage.languages&&navigatorLanguage.languages[0]||navigatorLanguage.language||null}class Delay{constructor(shortDelay,longDelay){this.shortDelay=shortDelay,this.longDelay=longDelay,debugAssert(longDelay>shortDelay,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _emulatorUrl(config,path){debugAssert(config.emulator,"Emulator should always be set here");const{url}=config.emulator;return path?`${url}${path.startsWith("/")?path.slice(1):path}`:url}class FetchProvider{static initialize(fetchImpl,headersImpl,responseImpl){this.fetchImpl=fetchImpl,headersImpl&&(this.headersImpl=headersImpl),responseImpl&&(this.responseImpl=responseImpl)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(auth2,request){return auth2.tenantId&&!request.tenantId?Object.assign(Object.assign({},request),{tenantId:auth2.tenantId}):request}async function _performApiRequest(auth2,method,path,request,customErrorMap={}){return _performFetchWithErrorHandling(auth2,customErrorMap,async()=>{let body={},params={};request&&(method==="GET"?params=request:body={body:JSON.stringify(request)});const query=querystring(Object.assign({key:auth2.config.apiKey},params)).slice(1),headers=await auth2._getAdditionalHeaders();headers["Content-Type"]="application/json",auth2.languageCode&&(headers["X-Firebase-Locale"]=auth2.languageCode);const fetchArgs=Object.assign({method,headers},body);return isCloudflareWorker()||(fetchArgs.referrerPolicy="no-referrer"),FetchProvider.fetch()(_getFinalTarget(auth2,auth2.config.apiHost,path,query),fetchArgs)})}async function _performFetchWithErrorHandling(auth2,customErrorMap,fetchFn){auth2._canInitEmulator=!1;const errorMap=Object.assign(Object.assign({},SERVER_ERROR_MAP),customErrorMap);try{const networkTimeout=new NetworkTimeout(auth2),response=await Promise.race([fetchFn(),networkTimeout.promise]);networkTimeout.clearNetworkTimeout();const json=await response.json();if("needConfirmation"in json)throw _makeTaggedError(auth2,"account-exists-with-different-credential",json);if(response.ok&&!("errorMessage"in json))return json;{const errorMessage=response.ok?json.errorMessage:json.error.message,[serverErrorCode,serverErrorMessage]=errorMessage.split(" : ");if(serverErrorCode==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(auth2,"credential-already-in-use",json);if(serverErrorCode==="EMAIL_EXISTS")throw _makeTaggedError(auth2,"email-already-in-use",json);if(serverErrorCode==="USER_DISABLED")throw _makeTaggedError(auth2,"user-disabled",json);const authError=errorMap[serverErrorCode]||serverErrorCode.toLowerCase().replace(/[_\s]+/g,"-");if(serverErrorMessage)throw _errorWithCustomMessage(auth2,authError,serverErrorMessage);_fail(auth2,authError)}}catch(e){if(e instanceof FirebaseError)throw e;_fail(auth2,"network-request-failed",{message:String(e)})}}async function _performSignInRequest(auth2,method,path,request,customErrorMap={}){const serverResponse=await _performApiRequest(auth2,method,path,request,customErrorMap);return"mfaPendingCredential"in serverResponse&&_fail(auth2,"multi-factor-auth-required",{_serverResponse:serverResponse}),serverResponse}function _getFinalTarget(auth2,host,path,query){const base=`${host}${path}?${query}`;return auth2.config.emulator?_emulatorUrl(auth2.config,base):`${auth2.config.apiScheme}://${base}`}class NetworkTimeout{constructor(auth2){this.auth=auth2,this.timer=null,this.promise=new Promise((_,reject)=>{this.timer=setTimeout(()=>reject(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(auth2,code,response){const errorParams={appName:auth2.name};response.email&&(errorParams.email=response.email),response.phoneNumber&&(errorParams.phoneNumber=response.phoneNumber);const error=_createError(auth2,code,errorParams);return error.customData._tokenResponse=response,error}async function deleteAccount(auth2,request){return _performApiRequest(auth2,"POST","/v1/accounts:delete",request)}async function getAccountInfo(auth2,request){return _performApiRequest(auth2,"POST","/v1/accounts:lookup",request)}function utcTimestampToDateString(utcTimestamp){if(utcTimestamp)try{const date=new Date(Number(utcTimestamp));if(!isNaN(date.getTime()))return date.toUTCString()}catch{}}async function getIdTokenResult(user,forceRefresh=!1){const userInternal=getModularInstance(user),token=await userInternal.getIdToken(forceRefresh),claims=_parseToken(token);_assert(claims&&claims.exp&&claims.auth_time&&claims.iat,userInternal.auth,"internal-error");const firebase=typeof claims.firebase=="object"?claims.firebase:void 0,signInProvider=firebase==null?void 0:firebase.sign_in_provider;return{claims,token,authTime:utcTimestampToDateString(secondsStringToMilliseconds(claims.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(claims.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(claims.exp)),signInProvider:signInProvider||null,signInSecondFactor:(firebase==null?void 0:firebase.sign_in_second_factor)||null}}function secondsStringToMilliseconds(seconds){return Number(seconds)*1e3}function _parseToken(token){const[algorithm,payload,signature]=token.split(".");if(algorithm===void 0||payload===void 0||signature===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const decoded=base64Decode(payload);return decoded?JSON.parse(decoded):(_logError("Failed to decode base64 JWT payload"),null)}catch(e){return _logError("Caught error parsing JWT payload as JSON",e==null?void 0:e.toString()),null}}function _tokenExpiresIn(token){const parsedToken=_parseToken(token);return _assert(parsedToken,"internal-error"),_assert(typeof parsedToken.exp<"u","internal-error"),_assert(typeof parsedToken.iat<"u","internal-error"),Number(parsedToken.exp)-Number(parsedToken.iat)}async function _logoutIfInvalidated(user,promise,bypassAuthState=!1){if(bypassAuthState)return promise;try{return await promise}catch(e){throw e instanceof FirebaseError&&isUserInvalidated(e)&&user.auth.currentUser===user&&await user.auth.signOut(),e}}function isUserInvalidated({code}){return code==="auth/user-disabled"||code==="auth/user-token-expired"}class ProactiveRefresh{constructor(user){this.user=user,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(wasError){var _a;if(wasError){const interval=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),interval}else{this.errorBackoff=3e4;const interval=((_a=this.user.stsTokenManager.expirationTime)!==null&&_a!==void 0?_a:0)-Date.now()-3e5;return Math.max(0,interval)}}schedule(wasError=!1){if(!this.isRunning)return;const interval=this.getInterval(wasError);this.timerId=setTimeout(async()=>{await this.iteration()},interval)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class UserMetadata{constructor(createdAt,lastLoginAt){this.createdAt=createdAt,this.lastLoginAt=lastLoginAt,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(metadata){this.createdAt=metadata.createdAt,this.lastLoginAt=metadata.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _reloadWithoutSaving(user){var _a;const auth2=user.auth,idToken=await user.getIdToken(),response=await _logoutIfInvalidated(user,getAccountInfo(auth2,{idToken}));_assert(response==null?void 0:response.users.length,auth2,"internal-error");const coreAccount=response.users[0];user._notifyReloadListener(coreAccount);const newProviderData=!((_a=coreAccount.providerUserInfo)===null||_a===void 0)&&_a.length?extractProviderData(coreAccount.providerUserInfo):[],providerData=mergeProviderData(user.providerData,newProviderData),oldIsAnonymous=user.isAnonymous,newIsAnonymous=!(user.email&&coreAccount.passwordHash)&&!(providerData!=null&&providerData.length),isAnonymous=oldIsAnonymous?newIsAnonymous:!1,updates={uid:coreAccount.localId,displayName:coreAccount.displayName||null,photoURL:coreAccount.photoUrl||null,email:coreAccount.email||null,emailVerified:coreAccount.emailVerified||!1,phoneNumber:coreAccount.phoneNumber||null,tenantId:coreAccount.tenantId||null,providerData,metadata:new UserMetadata(coreAccount.createdAt,coreAccount.lastLoginAt),isAnonymous};Object.assign(user,updates)}async function reload(user){const userInternal=getModularInstance(user);await _reloadWithoutSaving(userInternal),await userInternal.auth._persistUserIfCurrent(userInternal),userInternal.auth._notifyListenersIfCurrent(userInternal)}function mergeProviderData(original,newData){return[...original.filter(o=>!newData.some(n2=>n2.providerId===o.providerId)),...newData]}function extractProviderData(providers){return providers.map(_a=>{var{providerId}=_a,provider=__rest(_a,["providerId"]);return{providerId,uid:provider.rawId||"",displayName:provider.displayName||null,email:provider.email||null,phoneNumber:provider.phoneNumber||null,photoURL:provider.photoUrl||null}})}async function requestStsToken(auth2,refreshToken){const response=await _performFetchWithErrorHandling(auth2,{},async()=>{const body=querystring({grant_type:"refresh_token",refresh_token:refreshToken}).slice(1),{tokenApiHost,apiKey}=auth2.config,url=_getFinalTarget(auth2,tokenApiHost,"/v1/token",`key=${apiKey}`),headers=await auth2._getAdditionalHeaders();return headers["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(url,{method:"POST",headers,body})});return{accessToken:response.access_token,expiresIn:response.expires_in,refreshToken:response.refresh_token}}async function revokeToken(auth2,request){return _performApiRequest(auth2,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(auth2,request))}class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(response){_assert(response.idToken,"internal-error"),_assert(typeof response.idToken<"u","internal-error"),_assert(typeof response.refreshToken<"u","internal-error");const expiresIn="expiresIn"in response&&typeof response.expiresIn<"u"?Number(response.expiresIn):_tokenExpiresIn(response.idToken);this.updateTokensAndExpiration(response.idToken,response.refreshToken,expiresIn)}updateFromIdToken(idToken){_assert(idToken.length!==0,"internal-error");const expiresIn=_tokenExpiresIn(idToken);this.updateTokensAndExpiration(idToken,null,expiresIn)}async getToken(auth2,forceRefresh=!1){return!forceRefresh&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,auth2,"user-token-expired"),this.refreshToken?(await this.refresh(auth2,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(auth2,oldToken){const{accessToken,refreshToken,expiresIn}=await requestStsToken(auth2,oldToken);this.updateTokensAndExpiration(accessToken,refreshToken,Number(expiresIn))}updateTokensAndExpiration(accessToken,refreshToken,expiresInSec){this.refreshToken=refreshToken||null,this.accessToken=accessToken||null,this.expirationTime=Date.now()+expiresInSec*1e3}static fromJSON(appName,object){const{refreshToken,accessToken,expirationTime}=object,manager=new StsTokenManager;return refreshToken&&(_assert(typeof refreshToken=="string","internal-error",{appName}),manager.refreshToken=refreshToken),accessToken&&(_assert(typeof accessToken=="string","internal-error",{appName}),manager.accessToken=accessToken),expirationTime&&(_assert(typeof expirationTime=="number","internal-error",{appName}),manager.expirationTime=expirationTime),manager}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(stsTokenManager){this.accessToken=stsTokenManager.accessToken,this.refreshToken=stsTokenManager.refreshToken,this.expirationTime=stsTokenManager.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}function assertStringOrUndefined(assertion,appName){_assert(typeof assertion=="string"||typeof assertion>"u","internal-error",{appName})}class UserImpl{constructor(_a){var{uid,auth:auth2,stsTokenManager}=_a,opt=__rest(_a,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=uid,this.auth=auth2,this.stsTokenManager=stsTokenManager,this.accessToken=stsTokenManager.accessToken,this.displayName=opt.displayName||null,this.email=opt.email||null,this.emailVerified=opt.emailVerified||!1,this.phoneNumber=opt.phoneNumber||null,this.photoURL=opt.photoURL||null,this.isAnonymous=opt.isAnonymous||!1,this.tenantId=opt.tenantId||null,this.providerData=opt.providerData?[...opt.providerData]:[],this.metadata=new UserMetadata(opt.createdAt||void 0,opt.lastLoginAt||void 0)}async getIdToken(forceRefresh){const accessToken=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,forceRefresh));return _assert(accessToken,this.auth,"internal-error"),this.accessToken!==accessToken&&(this.accessToken=accessToken,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),accessToken}getIdTokenResult(forceRefresh){return getIdTokenResult(this,forceRefresh)}reload(){return reload(this)}_assign(user){this!==user&&(_assert(this.uid===user.uid,this.auth,"internal-error"),this.displayName=user.displayName,this.photoURL=user.photoURL,this.email=user.email,this.emailVerified=user.emailVerified,this.phoneNumber=user.phoneNumber,this.isAnonymous=user.isAnonymous,this.tenantId=user.tenantId,this.providerData=user.providerData.map(userInfo=>Object.assign({},userInfo)),this.metadata._copy(user.metadata),this.stsTokenManager._assign(user.stsTokenManager))}_clone(auth2){const newUser=new UserImpl(Object.assign(Object.assign({},this),{auth:auth2,stsTokenManager:this.stsTokenManager._clone()}));return newUser.metadata._copy(this.metadata),newUser}_onReload(callback){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=callback,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(userInfo){this.reloadListener?this.reloadListener(userInfo):this.reloadUserInfo=userInfo}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(response,reload2=!1){let tokensRefreshed=!1;response.idToken&&response.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(response),tokensRefreshed=!0),reload2&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),tokensRefreshed&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const idToken=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(userInfo=>Object.assign({},userInfo)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(auth2,object){var _a,_b,_c,_d,_e,_f,_g,_h;const displayName=(_a=object.displayName)!==null&&_a!==void 0?_a:void 0,email=(_b=object.email)!==null&&_b!==void 0?_b:void 0,phoneNumber=(_c=object.phoneNumber)!==null&&_c!==void 0?_c:void 0,photoURL=(_d=object.photoURL)!==null&&_d!==void 0?_d:void 0,tenantId=(_e=object.tenantId)!==null&&_e!==void 0?_e:void 0,_redirectEventId=(_f=object._redirectEventId)!==null&&_f!==void 0?_f:void 0,createdAt=(_g=object.createdAt)!==null&&_g!==void 0?_g:void 0,lastLoginAt=(_h=object.lastLoginAt)!==null&&_h!==void 0?_h:void 0,{uid,emailVerified,isAnonymous,providerData,stsTokenManager:plainObjectTokenManager}=object;_assert(uid&&plainObjectTokenManager,auth2,"internal-error");const stsTokenManager=StsTokenManager.fromJSON(this.name,plainObjectTokenManager);_assert(typeof uid=="string",auth2,"internal-error"),assertStringOrUndefined(displayName,auth2.name),assertStringOrUndefined(email,auth2.name),_assert(typeof emailVerified=="boolean",auth2,"internal-error"),_assert(typeof isAnonymous=="boolean",auth2,"internal-error"),assertStringOrUndefined(phoneNumber,auth2.name),assertStringOrUndefined(photoURL,auth2.name),assertStringOrUndefined(tenantId,auth2.name),assertStringOrUndefined(_redirectEventId,auth2.name),assertStringOrUndefined(createdAt,auth2.name),assertStringOrUndefined(lastLoginAt,auth2.name);const user=new UserImpl({uid,auth:auth2,email,emailVerified,displayName,isAnonymous,photoURL,phoneNumber,tenantId,stsTokenManager,createdAt,lastLoginAt});return providerData&&Array.isArray(providerData)&&(user.providerData=providerData.map(userInfo=>Object.assign({},userInfo))),_redirectEventId&&(user._redirectEventId=_redirectEventId),user}static async _fromIdTokenResponse(auth2,idTokenResponse,isAnonymous=!1){const stsTokenManager=new StsTokenManager;stsTokenManager.updateFromServerResponse(idTokenResponse);const user=new UserImpl({uid:idTokenResponse.localId,auth:auth2,stsTokenManager,isAnonymous});return await _reloadWithoutSaving(user),user}static async _fromGetAccountInfoResponse(auth2,response,idToken){const coreAccount=response.users[0];_assert(coreAccount.localId!==void 0,"internal-error");const providerData=coreAccount.providerUserInfo!==void 0?extractProviderData(coreAccount.providerUserInfo):[],isAnonymous=!(coreAccount.email&&coreAccount.passwordHash)&&!(providerData!=null&&providerData.length),stsTokenManager=new StsTokenManager;stsTokenManager.updateFromIdToken(idToken);const user=new UserImpl({uid:coreAccount.localId,auth:auth2,stsTokenManager,isAnonymous}),updates={uid:coreAccount.localId,displayName:coreAccount.displayName||null,photoURL:coreAccount.photoUrl||null,email:coreAccount.email||null,emailVerified:coreAccount.emailVerified||!1,phoneNumber:coreAccount.phoneNumber||null,tenantId:coreAccount.tenantId||null,providerData,metadata:new UserMetadata(coreAccount.createdAt,coreAccount.lastLoginAt),isAnonymous:!(coreAccount.email&&coreAccount.passwordHash)&&!(providerData!=null&&providerData.length)};return Object.assign(user,updates),user}}const instanceCache=new Map;function _getInstance(cls){debugAssert(cls instanceof Function,"Expected a class definition");let instance=instanceCache.get(cls);return instance?(debugAssert(instance instanceof cls,"Instance stored in cache mismatched with class"),instance):(instance=new cls,instanceCache.set(cls,instance),instance)}class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(key,value){this.storage[key]=value}async _get(key){const value=this.storage[key];return value===void 0?null:value}async _remove(key){delete this.storage[key]}_addListener(_key,_listener){}_removeListener(_key,_listener){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;function _persistenceKeyName(key,apiKey,appName){return`firebase:${key}:${apiKey}:${appName}`}class PersistenceUserManager{constructor(persistence,auth2,userKey){this.persistence=persistence,this.auth=auth2,this.userKey=userKey;const{config,name:name2}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,config.apiKey,name2),this.fullPersistenceKey=_persistenceKeyName("persistence",config.apiKey,name2),this.boundEventHandler=auth2._onStorageEvent.bind(auth2),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(user){return this.persistence._set(this.fullUserKey,user.toJSON())}async getCurrentUser(){const blob=await this.persistence._get(this.fullUserKey);return blob?UserImpl._fromJSON(this.auth,blob):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(newPersistence){if(this.persistence===newPersistence)return;const currentUser=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=newPersistence,currentUser)return this.setCurrentUser(currentUser)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(auth2,persistenceHierarchy,userKey="authUser"){if(!persistenceHierarchy.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),auth2,userKey);const availablePersistences=(await Promise.all(persistenceHierarchy.map(async persistence=>{if(await persistence._isAvailable())return persistence}))).filter(persistence=>persistence);let selectedPersistence=availablePersistences[0]||_getInstance(inMemoryPersistence);const key=_persistenceKeyName(userKey,auth2.config.apiKey,auth2.name);let userToMigrate=null;for(const persistence of persistenceHierarchy)try{const blob=await persistence._get(key);if(blob){const user=UserImpl._fromJSON(auth2,blob);persistence!==selectedPersistence&&(userToMigrate=user),selectedPersistence=persistence;break}}catch{}const migrationHierarchy=availablePersistences.filter(p2=>p2._shouldAllowMigration);return!selectedPersistence._shouldAllowMigration||!migrationHierarchy.length?new PersistenceUserManager(selectedPersistence,auth2,userKey):(selectedPersistence=migrationHierarchy[0],userToMigrate&&await selectedPersistence._set(key,userToMigrate.toJSON()),await Promise.all(persistenceHierarchy.map(async persistence=>{if(persistence!==selectedPersistence)try{await persistence._remove(key)}catch{}})),new PersistenceUserManager(selectedPersistence,auth2,userKey))}}function _getBrowserName(userAgent){const ua=userAgent.toLowerCase();if(ua.includes("opera/")||ua.includes("opr/")||ua.includes("opios/"))return"Opera";if(_isIEMobile(ua))return"IEMobile";if(ua.includes("msie")||ua.includes("trident/"))return"IE";if(ua.includes("edge/"))return"Edge";if(_isFirefox(ua))return"Firefox";if(ua.includes("silk/"))return"Silk";if(_isBlackBerry(ua))return"Blackberry";if(_isWebOS(ua))return"Webos";if(_isSafari(ua))return"Safari";if((ua.includes("chrome/")||_isChromeIOS(ua))&&!ua.includes("edge/"))return"Chrome";if(_isAndroid(ua))return"Android";{const re=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,matches=userAgent.match(re);if((matches==null?void 0:matches.length)===2)return matches[1]}return"Other"}function _isFirefox(ua=getUA()){return/firefox\//i.test(ua)}function _isSafari(userAgent=getUA()){const ua=userAgent.toLowerCase();return ua.includes("safari/")&&!ua.includes("chrome/")&&!ua.includes("crios/")&&!ua.includes("android")}function _isChromeIOS(ua=getUA()){return/crios\//i.test(ua)}function _isIEMobile(ua=getUA()){return/iemobile/i.test(ua)}function _isAndroid(ua=getUA()){return/android/i.test(ua)}function _isBlackBerry(ua=getUA()){return/blackberry/i.test(ua)}function _isWebOS(ua=getUA()){return/webos/i.test(ua)}function _isIOS(ua=getUA()){return/iphone|ipad|ipod/i.test(ua)||/macintosh/i.test(ua)&&/mobile/i.test(ua)}function _isIOSStandalone(ua=getUA()){var _a;return _isIOS(ua)&&!!(!((_a=window.navigator)===null||_a===void 0)&&_a.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(ua=getUA()){return _isIOS(ua)||_isAndroid(ua)||_isWebOS(ua)||_isBlackBerry(ua)||/windows phone/i.test(ua)||_isIEMobile(ua)}function _getClientVersion(clientPlatform,frameworks=[]){let reportedPlatform;switch(clientPlatform){case"Browser":reportedPlatform=_getBrowserName(getUA());break;case"Worker":reportedPlatform=`${_getBrowserName(getUA())}-${clientPlatform}`;break;default:reportedPlatform=clientPlatform}const reportedFrameworks=frameworks.length?frameworks.join(","):"FirebaseCore-web";return`${reportedPlatform}/JsCore/${SDK_VERSION}/${reportedFrameworks}`}class AuthMiddlewareQueue{constructor(auth2){this.auth=auth2,this.queue=[]}pushCallback(callback,onAbort){const wrappedCallback=user=>new Promise((resolve,reject)=>{try{const result=callback(user);resolve(result)}catch(e){reject(e)}});wrappedCallback.onAbort=onAbort,this.queue.push(wrappedCallback);const index=this.queue.length-1;return()=>{this.queue[index]=()=>Promise.resolve()}}async runMiddleware(nextUser){if(this.auth.currentUser===nextUser)return;const onAbortStack=[];try{for(const beforeStateCallback of this.queue)await beforeStateCallback(nextUser),beforeStateCallback.onAbort&&onAbortStack.push(beforeStateCallback.onAbort)}catch(e){onAbortStack.reverse();for(const onAbort of onAbortStack)try{onAbort()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e==null?void 0:e.message})}}}async function _getPasswordPolicy(auth2,request={}){return _performApiRequest(auth2,"GET","/v2/passwordPolicy",_addTidIfNecessary(auth2,request))}const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(response){var _a,_b,_c,_d;const responseOptions=response.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(_a=responseOptions.minPasswordLength)!==null&&_a!==void 0?_a:MINIMUM_MIN_PASSWORD_LENGTH,responseOptions.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=responseOptions.maxPasswordLength),responseOptions.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=responseOptions.containsLowercaseCharacter),responseOptions.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=responseOptions.containsUppercaseCharacter),responseOptions.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=responseOptions.containsNumericCharacter),responseOptions.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=responseOptions.containsNonAlphanumericCharacter),this.enforcementState=response.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(_c=(_b=response.allowedNonAlphanumericCharacters)===null||_b===void 0?void 0:_b.join(""))!==null&&_c!==void 0?_c:"",this.forceUpgradeOnSignin=(_d=response.forceUpgradeOnSignin)!==null&&_d!==void 0?_d:!1,this.schemaVersion=response.schemaVersion}validatePassword(password){var _a,_b,_c,_d,_e,_f;const status={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(password,status),this.validatePasswordCharacterOptions(password,status),status.isValid&&(status.isValid=(_a=status.meetsMinPasswordLength)!==null&&_a!==void 0?_a:!0),status.isValid&&(status.isValid=(_b=status.meetsMaxPasswordLength)!==null&&_b!==void 0?_b:!0),status.isValid&&(status.isValid=(_c=status.containsLowercaseLetter)!==null&&_c!==void 0?_c:!0),status.isValid&&(status.isValid=(_d=status.containsUppercaseLetter)!==null&&_d!==void 0?_d:!0),status.isValid&&(status.isValid=(_e=status.containsNumericCharacter)!==null&&_e!==void 0?_e:!0),status.isValid&&(status.isValid=(_f=status.containsNonAlphanumericCharacter)!==null&&_f!==void 0?_f:!0),status}validatePasswordLengthOptions(password,status){const minPasswordLength=this.customStrengthOptions.minPasswordLength,maxPasswordLength=this.customStrengthOptions.maxPasswordLength;minPasswordLength&&(status.meetsMinPasswordLength=password.length>=minPasswordLength),maxPasswordLength&&(status.meetsMaxPasswordLength=password.length<=maxPasswordLength)}validatePasswordCharacterOptions(password,status){this.updatePasswordCharacterOptionsStatuses(status,!1,!1,!1,!1);let passwordChar;for(let i=0;i<password.length;i++)passwordChar=password.charAt(i),this.updatePasswordCharacterOptionsStatuses(status,passwordChar>="a"&&passwordChar<="z",passwordChar>="A"&&passwordChar<="Z",passwordChar>="0"&&passwordChar<="9",this.allowedNonAlphanumericCharacters.includes(passwordChar))}updatePasswordCharacterOptionsStatuses(status,containsLowercaseCharacter,containsUppercaseCharacter,containsNumericCharacter,containsNonAlphanumericCharacter){this.customStrengthOptions.containsLowercaseLetter&&(status.containsLowercaseLetter||(status.containsLowercaseLetter=containsLowercaseCharacter)),this.customStrengthOptions.containsUppercaseLetter&&(status.containsUppercaseLetter||(status.containsUppercaseLetter=containsUppercaseCharacter)),this.customStrengthOptions.containsNumericCharacter&&(status.containsNumericCharacter||(status.containsNumericCharacter=containsNumericCharacter)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(status.containsNonAlphanumericCharacter||(status.containsNonAlphanumericCharacter=containsNonAlphanumericCharacter))}}class AuthImpl{constructor(app2,heartbeatServiceProvider,appCheckServiceProvider,config){this.app=app2,this.heartbeatServiceProvider=heartbeatServiceProvider,this.appCheckServiceProvider=appCheckServiceProvider,this.config=config,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=app2.name,this.clientVersion=config.sdkClientVersion}_initializeWithPersistence(persistenceHierarchy,popupRedirectResolver){return popupRedirectResolver&&(this._popupRedirectResolver=_getInstance(popupRedirectResolver)),this._initializationPromise=this.queue(async()=>{var _a,_b;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,persistenceHierarchy),!this._deleted)){if(!((_a=this._popupRedirectResolver)===null||_a===void 0)&&_a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(popupRedirectResolver),this.lastNotifiedUid=((_b=this.currentUser)===null||_b===void 0?void 0:_b.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const user=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!user)){if(this.currentUser&&user&&this.currentUser.uid===user.uid){this._currentUser._assign(user),await this.currentUser.getIdToken();return}await this._updateCurrentUser(user,!0)}}async initializeCurrentUserFromIdToken(idToken){try{const response=await getAccountInfo(this,{idToken}),user=await UserImpl._fromGetAccountInfoResponse(this,response,idToken);await this.directlySetCurrentUser(user)}catch(err){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",err),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(popupRedirectResolver){var _a;if(_isFirebaseServerApp(this.app)){const idToken=this.app.settings.authIdToken;return idToken?new Promise(resolve=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(idToken).then(resolve,resolve))}):this.directlySetCurrentUser(null)}const previouslyStoredUser=await this.assertedPersistence.getCurrentUser();let futureCurrentUser=previouslyStoredUser,needsTocheckMiddleware=!1;if(popupRedirectResolver&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const redirectUserEventId=(_a=this.redirectUser)===null||_a===void 0?void 0:_a._redirectEventId,storedUserEventId=futureCurrentUser==null?void 0:futureCurrentUser._redirectEventId,result=await this.tryRedirectSignIn(popupRedirectResolver);(!redirectUserEventId||redirectUserEventId===storedUserEventId)&&(result!=null&&result.user)&&(futureCurrentUser=result.user,needsTocheckMiddleware=!0)}if(!futureCurrentUser)return this.directlySetCurrentUser(null);if(!futureCurrentUser._redirectEventId){if(needsTocheckMiddleware)try{await this.beforeStateQueue.runMiddleware(futureCurrentUser)}catch(e){futureCurrentUser=previouslyStoredUser,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return futureCurrentUser?this.reloadAndSetCurrentUserOrClear(futureCurrentUser):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===futureCurrentUser._redirectEventId?this.directlySetCurrentUser(futureCurrentUser):this.reloadAndSetCurrentUserOrClear(futureCurrentUser)}async tryRedirectSignIn(redirectResolver){let result=null;try{result=await this._popupRedirectResolver._completeRedirectFn(this,redirectResolver,!0)}catch{await this._setRedirectUser(null)}return result}async reloadAndSetCurrentUserOrClear(user){try{await _reloadWithoutSaving(user)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(user)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(userExtern){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const user=userExtern?getModularInstance(userExtern):null;return user&&_assert(user.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(user&&user._clone(this))}async _updateCurrentUser(user,skipBeforeStateCallbacks=!1){if(!this._deleted)return user&&_assert(this.tenantId===user.tenantId,this,"tenant-id-mismatch"),skipBeforeStateCallbacks||await this.beforeStateQueue.runMiddleware(user),this.queue(async()=>{await this.directlySetCurrentUser(user),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(persistence){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(persistence))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(password){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const passwordPolicy=this._getPasswordPolicyInternal();return passwordPolicy.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):passwordPolicy.validatePassword(password)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const response=await _getPasswordPolicy(this),passwordPolicy=new PasswordPolicyImpl(response);this.tenantId===null?this._projectPasswordPolicy=passwordPolicy:this._tenantPasswordPolicies[this.tenantId]=passwordPolicy}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(errorMap){this._errorFactory=new ErrorFactory("auth","Firebase",errorMap())}onAuthStateChanged(nextOrObserver,error,completed){return this.registerStateListener(this.authStateSubscription,nextOrObserver,error,completed)}beforeAuthStateChanged(callback,onAbort){return this.beforeStateQueue.pushCallback(callback,onAbort)}onIdTokenChanged(nextOrObserver,error,completed){return this.registerStateListener(this.idTokenSubscription,nextOrObserver,error,completed)}authStateReady(){return new Promise((resolve,reject)=>{if(this.currentUser)resolve();else{const unsubscribe=this.onAuthStateChanged(()=>{unsubscribe(),resolve()},reject)}})}async revokeAccessToken(token){if(this.currentUser){const idToken=await this.currentUser.getIdToken(),request={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token,idToken};this.tenantId!=null&&(request.tenantId=this.tenantId),await revokeToken(this,request)}}toJSON(){var _a;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(_a=this._currentUser)===null||_a===void 0?void 0:_a.toJSON()}}async _setRedirectUser(user,popupRedirectResolver){const redirectManager=await this.getOrInitRedirectPersistenceManager(popupRedirectResolver);return user===null?redirectManager.removeCurrentUser():redirectManager.setCurrentUser(user)}async getOrInitRedirectPersistenceManager(popupRedirectResolver){if(!this.redirectPersistenceManager){const resolver=popupRedirectResolver&&_getInstance(popupRedirectResolver)||this._popupRedirectResolver;_assert(resolver,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(resolver._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(id2){var _a,_b;return this._isInitialized&&await this.queue(async()=>{}),((_a=this._currentUser)===null||_a===void 0?void 0:_a._redirectEventId)===id2?this._currentUser:((_b=this.redirectUser)===null||_b===void 0?void 0:_b._redirectEventId)===id2?this.redirectUser:null}async _persistUserIfCurrent(user){if(user===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(user))}_notifyListenersIfCurrent(user){user===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _a,_b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const currentUid=(_b=(_a=this.currentUser)===null||_a===void 0?void 0:_a.uid)!==null&&_b!==void 0?_b:null;this.lastNotifiedUid!==currentUid&&(this.lastNotifiedUid=currentUid,this.authStateSubscription.next(this.currentUser))}registerStateListener(subscription,nextOrObserver,error,completed){if(this._deleted)return()=>{};const cb=typeof nextOrObserver=="function"?nextOrObserver:nextOrObserver.next.bind(nextOrObserver);let isUnsubscribed=!1;const promise=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(promise,this,"internal-error"),promise.then(()=>{isUnsubscribed||cb(this.currentUser)}),typeof nextOrObserver=="function"){const unsubscribe=subscription.addObserver(nextOrObserver,error,completed);return()=>{isUnsubscribed=!0,unsubscribe()}}else{const unsubscribe=subscription.addObserver(nextOrObserver);return()=>{isUnsubscribed=!0,unsubscribe()}}}async directlySetCurrentUser(user){this.currentUser&&this.currentUser!==user&&this._currentUser._stopProactiveRefresh(),user&&this.isProactiveRefreshEnabled&&user._startProactiveRefresh(),this.currentUser=user,user?await this.assertedPersistence.setCurrentUser(user):await this.assertedPersistence.removeCurrentUser()}queue(action){return this.operations=this.operations.then(action,action),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(framework){!framework||this.frameworks.includes(framework)||(this.frameworks.push(framework),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var _a;const headers={"X-Client-Version":this.clientVersion};this.app.options.appId&&(headers["X-Firebase-gmpid"]=this.app.options.appId);const heartbeatsHeader=await((_a=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||_a===void 0?void 0:_a.getHeartbeatsHeader());heartbeatsHeader&&(headers["X-Firebase-Client"]=heartbeatsHeader);const appCheckToken=await this._getAppCheckToken();return appCheckToken&&(headers["X-Firebase-AppCheck"]=appCheckToken),headers}async _getAppCheckToken(){var _a;const appCheckTokenResult=await((_a=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||_a===void 0?void 0:_a.getToken());return appCheckTokenResult!=null&&appCheckTokenResult.error&&_logWarn(`Error while retrieving App Check token: ${appCheckTokenResult.error}`),appCheckTokenResult==null?void 0:appCheckTokenResult.token}}function _castAuth(auth2){return getModularInstance(auth2)}class Subscription{constructor(auth2){this.auth=auth2,this.observer=null,this.addObserver=createSubscribe(observer=>this.observer=observer)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(p2){externalJSProvider=p2}function _loadJS(url){return externalJSProvider.loadJS(url)}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(prefix){return`__${prefix}${Math.floor(Math.random()*1e6)}`}function initializeAuth(app2,deps){const provider=_getProvider(app2,"auth");if(provider.isInitialized()){const auth3=provider.getImmediate(),initialOptions=provider.getOptions();if(deepEqual(initialOptions,deps??{}))return auth3;_fail(auth3,"already-initialized")}return provider.initialize({options:deps})}function _initializeAuthInstance(auth2,deps){const persistence=(deps==null?void 0:deps.persistence)||[],hierarchy=(Array.isArray(persistence)?persistence:[persistence]).map(_getInstance);deps!=null&&deps.errorMap&&auth2._updateErrorMap(deps.errorMap),auth2._initializeWithPersistence(hierarchy,deps==null?void 0:deps.popupRedirectResolver)}function connectAuthEmulator(auth2,url,options){const authInternal=_castAuth(auth2);_assert(authInternal._canInitEmulator,authInternal,"emulator-config-failed"),_assert(/^https?:\/\//.test(url),authInternal,"invalid-emulator-scheme");const disableWarnings=!1,protocol=extractProtocol(url),{host,port}=extractHostAndPort(url),portStr=port===null?"":`:${port}`;authInternal.config.emulator={url:`${protocol}//${host}${portStr}/`},authInternal.settings.appVerificationDisabledForTesting=!0,authInternal.emulatorConfig=Object.freeze({host,port,protocol:protocol.replace(":",""),options:Object.freeze({disableWarnings})}),emitEmulatorWarning()}function extractProtocol(url){const protocolEnd=url.indexOf(":");return protocolEnd<0?"":url.substr(0,protocolEnd+1)}function extractHostAndPort(url){const protocol=extractProtocol(url),authority=/(\/\/)?([^?#/]+)/.exec(url.substr(protocol.length));if(!authority)return{host:"",port:null};const hostAndPort=authority[2].split("@").pop()||"",bracketedIPv6=/^(\[[^\]]+\])(:|$)/.exec(hostAndPort);if(bracketedIPv6){const host=bracketedIPv6[1];return{host,port:parsePort(hostAndPort.substr(host.length+1))}}else{const[host,port]=hostAndPort.split(":");return{host,port:parsePort(port)}}}function parsePort(portStr){if(!portStr)return null;const port=Number(portStr);return isNaN(port)?null:port}function emitEmulatorWarning(){function attachBanner(){const el=document.createElement("p"),sty=el.style;el.innerText="Running in emulator mode. Do not use with production credentials.",sty.position="fixed",sty.width="100%",sty.backgroundColor="#ffffff",sty.border=".1em solid #000000",sty.color="#b50000",sty.bottom="0px",sty.left="0px",sty.margin="0px",sty.zIndex="10000",sty.textAlign="center",el.classList.add("firebase-emulator-warning"),document.body.appendChild(el)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",attachBanner):attachBanner())}class AuthCredential{constructor(providerId,signInMethod){this.providerId=providerId,this.signInMethod=signInMethod}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(_auth){return debugFail("not implemented")}_linkToIdToken(_auth,_idToken){return debugFail("not implemented")}_getReauthenticationResolver(_auth){return debugFail("not implemented")}}async function signInWithIdp(auth2,request){return _performSignInRequest(auth2,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(auth2,request))}const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(params){const cred=new OAuthCredential(params.providerId,params.signInMethod);return params.idToken||params.accessToken?(params.idToken&&(cred.idToken=params.idToken),params.accessToken&&(cred.accessToken=params.accessToken),params.nonce&&!params.pendingToken&&(cred.nonce=params.nonce),params.pendingToken&&(cred.pendingToken=params.pendingToken)):params.oauthToken&&params.oauthTokenSecret?(cred.accessToken=params.oauthToken,cred.secret=params.oauthTokenSecret):_fail("argument-error"),cred}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(json){const obj=typeof json=="string"?JSON.parse(json):json,{providerId,signInMethod}=obj,rest=__rest(obj,["providerId","signInMethod"]);if(!providerId||!signInMethod)return null;const cred=new OAuthCredential(providerId,signInMethod);return cred.idToken=rest.idToken||void 0,cred.accessToken=rest.accessToken||void 0,cred.secret=rest.secret,cred.nonce=rest.nonce,cred.pendingToken=rest.pendingToken||null,cred}_getIdTokenResponse(auth2){const request=this.buildRequest();return signInWithIdp(auth2,request)}_linkToIdToken(auth2,idToken){const request=this.buildRequest();return request.idToken=idToken,signInWithIdp(auth2,request)}_getReauthenticationResolver(auth2){const request=this.buildRequest();return request.autoCreate=!1,signInWithIdp(auth2,request)}buildRequest(){const request={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)request.pendingToken=this.pendingToken;else{const postBody={};this.idToken&&(postBody.id_token=this.idToken),this.accessToken&&(postBody.access_token=this.accessToken),this.secret&&(postBody.oauth_token_secret=this.secret),postBody.providerId=this.providerId,this.nonce&&!this.pendingToken&&(postBody.nonce=this.nonce),request.postBody=querystring(postBody)}return request}}class FederatedAuthProvider{constructor(providerId){this.providerId=providerId,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(languageCode){this.defaultLanguageCode=languageCode}setCustomParameters(customOAuthParameters){return this.customParameters=customOAuthParameters,this}getCustomParameters(){return this.customParameters}}class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(scope){return this.scopes.includes(scope)||this.scopes.push(scope),this}getScopes(){return[...this.scopes]}}class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(accessToken){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken})}static credentialFromResult(userCredential){return FacebookAuthProvider.credentialFromTaggedObject(userCredential)}static credentialFromError(error){return FacebookAuthProvider.credentialFromTaggedObject(error.customData||{})}static credentialFromTaggedObject({_tokenResponse:tokenResponse}){if(!tokenResponse||!("oauthAccessToken"in tokenResponse)||!tokenResponse.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(tokenResponse.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(idToken,accessToken){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken,accessToken})}static credentialFromResult(userCredential){return GoogleAuthProvider.credentialFromTaggedObject(userCredential)}static credentialFromError(error){return GoogleAuthProvider.credentialFromTaggedObject(error.customData||{})}static credentialFromTaggedObject({_tokenResponse:tokenResponse}){if(!tokenResponse)return null;const{oauthIdToken,oauthAccessToken}=tokenResponse;if(!oauthIdToken&&!oauthAccessToken)return null;try{return GoogleAuthProvider.credential(oauthIdToken,oauthAccessToken)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(accessToken){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken})}static credentialFromResult(userCredential){return GithubAuthProvider.credentialFromTaggedObject(userCredential)}static credentialFromError(error){return GithubAuthProvider.credentialFromTaggedObject(error.customData||{})}static credentialFromTaggedObject({_tokenResponse:tokenResponse}){if(!tokenResponse||!("oauthAccessToken"in tokenResponse)||!tokenResponse.oauthAccessToken)return null;try{return GithubAuthProvider.credential(tokenResponse.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(token,secret){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:token,oauthTokenSecret:secret})}static credentialFromResult(userCredential){return TwitterAuthProvider.credentialFromTaggedObject(userCredential)}static credentialFromError(error){return TwitterAuthProvider.credentialFromTaggedObject(error.customData||{})}static credentialFromTaggedObject({_tokenResponse:tokenResponse}){if(!tokenResponse)return null;const{oauthAccessToken,oauthTokenSecret}=tokenResponse;if(!oauthAccessToken||!oauthTokenSecret)return null;try{return TwitterAuthProvider.credential(oauthAccessToken,oauthTokenSecret)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";class UserCredentialImpl{constructor(params){this.user=params.user,this.providerId=params.providerId,this._tokenResponse=params._tokenResponse,this.operationType=params.operationType}static async _fromIdTokenResponse(auth2,operationType,idTokenResponse,isAnonymous=!1){const user=await UserImpl._fromIdTokenResponse(auth2,idTokenResponse,isAnonymous),providerId=providerIdForResponse(idTokenResponse);return new UserCredentialImpl({user,providerId,_tokenResponse:idTokenResponse,operationType})}static async _forOperation(user,operationType,response){await user._updateTokensIfNecessary(response,!0);const providerId=providerIdForResponse(response);return new UserCredentialImpl({user,providerId,_tokenResponse:response,operationType})}}function providerIdForResponse(response){return response.providerId?response.providerId:"phoneNumber"in response?"phone":null}class MultiFactorError extends FirebaseError{constructor(auth2,error,operationType,user){var _a;super(error.code,error.message),this.operationType=operationType,this.user=user,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:auth2.name,tenantId:(_a=auth2.tenantId)!==null&&_a!==void 0?_a:void 0,_serverResponse:error.customData._serverResponse,operationType}}static _fromErrorAndOperation(auth2,error,operationType,user){return new MultiFactorError(auth2,error,operationType,user)}}function _processCredentialSavingMfaContextIfNecessary(auth2,operationType,credential,user){return(operationType==="reauthenticate"?credential._getReauthenticationResolver(auth2):credential._getIdTokenResponse(auth2)).catch(error=>{throw error.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(auth2,error,operationType,user):error})}async function _link$1(user,credential,bypassAuthState=!1){const response=await _logoutIfInvalidated(user,credential._linkToIdToken(user.auth,await user.getIdToken()),bypassAuthState);return UserCredentialImpl._forOperation(user,"link",response)}async function _reauthenticate(user,credential,bypassAuthState=!1){const{auth:auth2}=user;if(_isFirebaseServerApp(auth2.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(auth2));const operationType="reauthenticate";try{const response=await _logoutIfInvalidated(user,_processCredentialSavingMfaContextIfNecessary(auth2,operationType,credential,user),bypassAuthState);_assert(response.idToken,auth2,"internal-error");const parsed=_parseToken(response.idToken);_assert(parsed,auth2,"internal-error");const{sub:localId}=parsed;return _assert(user.uid===localId,auth2,"user-mismatch"),UserCredentialImpl._forOperation(user,operationType,response)}catch(e){throw(e==null?void 0:e.code)==="auth/user-not-found"&&_fail(auth2,"user-mismatch"),e}}async function _signInWithCredential(auth2,credential,bypassAuthState=!1){if(_isFirebaseServerApp(auth2.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(auth2));const operationType="signIn",response=await _processCredentialSavingMfaContextIfNecessary(auth2,operationType,credential),userCredential=await UserCredentialImpl._fromIdTokenResponse(auth2,operationType,response);return bypassAuthState||await auth2._updateCurrentUser(userCredential.user),userCredential}function onIdTokenChanged(auth2,nextOrObserver,error,completed){return getModularInstance(auth2).onIdTokenChanged(nextOrObserver,error,completed)}function beforeAuthStateChanged(auth2,callback,onAbort){return getModularInstance(auth2).beforeAuthStateChanged(callback,onAbort)}const STORAGE_AVAILABLE_KEY="__sak";class BrowserPersistenceClass{constructor(storageRetriever,type){this.storageRetriever=storageRetriever,this.type=type}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(key,value){return this.storage.setItem(key,JSON.stringify(value)),Promise.resolve()}_get(key){const json=this.storage.getItem(key);return Promise.resolve(json?JSON.parse(json):null)}_remove(key){return this.storage.removeItem(key),Promise.resolve()}get storage(){return this.storageRetriever()}}const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(event,poll)=>this.onStorageEvent(event,poll),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(cb){for(const key of Object.keys(this.listeners)){const newValue=this.storage.getItem(key),oldValue=this.localCache[key];newValue!==oldValue&&cb(key,oldValue,newValue)}}onStorageEvent(event,poll=!1){if(!event.key){this.forAllChangedKeys((key2,_oldValue,newValue)=>{this.notifyListeners(key2,newValue)});return}const key=event.key;poll?this.detachListener():this.stopPolling();const triggerListeners=()=>{const storedValue2=this.storage.getItem(key);!poll&&this.localCache[key]===storedValue2||this.notifyListeners(key,storedValue2)},storedValue=this.storage.getItem(key);_isIE10()&&storedValue!==event.newValue&&event.newValue!==event.oldValue?setTimeout(triggerListeners,IE10_LOCAL_STORAGE_SYNC_DELAY):triggerListeners()}notifyListeners(key,value){this.localCache[key]=value;const listeners=this.listeners[key];if(listeners)for(const listener of Array.from(listeners))listener(value&&JSON.parse(value))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((key,oldValue,newValue)=>{this.onStorageEvent(new StorageEvent("storage",{key,oldValue,newValue}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(key,listener){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[key]||(this.listeners[key]=new Set,this.localCache[key]=this.storage.getItem(key)),this.listeners[key].add(listener)}_removeListener(key,listener){this.listeners[key]&&(this.listeners[key].delete(listener),this.listeners[key].size===0&&delete this.listeners[key]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(key,value){await super._set(key,value),this.localCache[key]=JSON.stringify(value)}async _get(key){const value=await super._get(key);return this.localCache[key]=JSON.stringify(value),value}async _remove(key){await super._remove(key),delete this.localCache[key]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_key,_listener){}_removeListener(_key,_listener){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;function _allSettled(promises){return Promise.all(promises.map(async promise=>{try{return{fulfilled:!0,value:await promise}}catch(reason){return{fulfilled:!1,reason}}}))}class Receiver{constructor(eventTarget){this.eventTarget=eventTarget,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(eventTarget){const existingInstance=this.receivers.find(receiver=>receiver.isListeningto(eventTarget));if(existingInstance)return existingInstance;const newInstance=new Receiver(eventTarget);return this.receivers.push(newInstance),newInstance}isListeningto(eventTarget){return this.eventTarget===eventTarget}async handleEvent(event){const messageEvent=event,{eventId,eventType,data}=messageEvent.data,handlers=this.handlersMap[eventType];if(!(handlers!=null&&handlers.size))return;messageEvent.ports[0].postMessage({status:"ack",eventId,eventType});const promises=Array.from(handlers).map(async handler=>handler(messageEvent.origin,data)),response=await _allSettled(promises);messageEvent.ports[0].postMessage({status:"done",eventId,eventType,response})}_subscribe(eventType,eventHandler){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[eventType]||(this.handlersMap[eventType]=new Set),this.handlersMap[eventType].add(eventHandler)}_unsubscribe(eventType,eventHandler){this.handlersMap[eventType]&&eventHandler&&this.handlersMap[eventType].delete(eventHandler),(!eventHandler||this.handlersMap[eventType].size===0)&&delete this.handlersMap[eventType],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];function _generateEventId(prefix="",digits=10){let random="";for(let i=0;i<digits;i++)random+=Math.floor(Math.random()*10);return prefix+random}class Sender{constructor(target){this.target=target,this.handlers=new Set}removeMessageHandler(handler){handler.messageChannel&&(handler.messageChannel.port1.removeEventListener("message",handler.onMessage),handler.messageChannel.port1.close()),this.handlers.delete(handler)}async _send(eventType,data,timeout=50){const messageChannel=typeof MessageChannel<"u"?new MessageChannel:null;if(!messageChannel)throw new Error("connection_unavailable");let completionTimer,handler;return new Promise((resolve,reject)=>{const eventId=_generateEventId("",20);messageChannel.port1.start();const ackTimer=setTimeout(()=>{reject(new Error("unsupported_event"))},timeout);handler={messageChannel,onMessage(event){const messageEvent=event;if(messageEvent.data.eventId===eventId)switch(messageEvent.data.status){case"ack":clearTimeout(ackTimer),completionTimer=setTimeout(()=>{reject(new Error("timeout"))},3e3);break;case"done":clearTimeout(completionTimer),resolve(messageEvent.data.response);break;default:clearTimeout(ackTimer),clearTimeout(completionTimer),reject(new Error("invalid_response"));break}}},this.handlers.add(handler),messageChannel.port1.addEventListener("message",handler.onMessage),this.target.postMessage({eventType,eventId,data},[messageChannel.port2])}).finally(()=>{handler&&this.removeMessageHandler(handler)})}}function _window(){return window}function _setWindowLocation(url){_window().location.href=url}function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var _a;return((_a=navigator==null?void 0:navigator.serviceWorker)===null||_a===void 0?void 0:_a.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(request){this.request=request}toPromise(){return new Promise((resolve,reject)=>{this.request.addEventListener("success",()=>{resolve(this.request.result)}),this.request.addEventListener("error",()=>{reject(this.request.error)})})}}function getObjectStore(db,isReadWrite){return db.transaction([DB_OBJECTSTORE_NAME],isReadWrite?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const request=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(request).toPromise()}function _openDatabase(){const request=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((resolve,reject)=>{request.addEventListener("error",()=>{reject(request.error)}),request.addEventListener("upgradeneeded",()=>{const db=request.result;try{db.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(e){reject(e)}}),request.addEventListener("success",async()=>{const db=request.result;db.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?resolve(db):(db.close(),await _deleteDatabase(),resolve(await _openDatabase()))})})}async function _putObject(db,key,value){const request=getObjectStore(db,!0).put({[DB_DATA_KEYPATH]:key,value});return new DBPromise(request).toPromise()}async function getObject(db,key){const request=getObjectStore(db,!1).get(key),data=await new DBPromise(request).toPromise();return data===void 0?null:data.value}function _deleteObject(db,key){const request=getObjectStore(db,!0).delete(key);return new DBPromise(request).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(op){let numAttempts=0;for(;;)try{const db=await this._openDb();return await op(db)}catch(e){if(numAttempts++>_TRANSACTION_RETRY_COUNT)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(_origin,data)=>({keyProcessed:(await this._poll()).includes(data.key)})),this.receiver._subscribe("ping",async(_origin,_data)=>["keyChanged"])}async initializeSender(){var _a,_b;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const results=await this.sender._send("ping",{},800);results&&!((_a=results[0])===null||_a===void 0)&&_a.fulfilled&&!((_b=results[0])===null||_b===void 0)&&_b.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(key){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const db=await _openDatabase();return await _putObject(db,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(db,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(write){this.pendingWrites++;try{await write()}finally{this.pendingWrites--}}async _set(key,value){return this._withPendingWrite(async()=>(await this._withRetries(db=>_putObject(db,key,value)),this.localCache[key]=value,this.notifyServiceWorker(key)))}async _get(key){const obj=await this._withRetries(db=>getObject(db,key));return this.localCache[key]=obj,obj}async _remove(key){return this._withPendingWrite(async()=>(await this._withRetries(db=>_deleteObject(db,key)),delete this.localCache[key],this.notifyServiceWorker(key)))}async _poll(){const result=await this._withRetries(db=>{const getAllRequest=getObjectStore(db,!1).getAll();return new DBPromise(getAllRequest).toPromise()});if(!result)return[];if(this.pendingWrites!==0)return[];const keys=[],keysInResult=new Set;if(result.length!==0)for(const{fbase_key:key,value}of result)keysInResult.add(key),JSON.stringify(this.localCache[key])!==JSON.stringify(value)&&(this.notifyListeners(key,value),keys.push(key));for(const localKey of Object.keys(this.localCache))this.localCache[localKey]&&!keysInResult.has(localKey)&&(this.notifyListeners(localKey,null),keys.push(localKey));return keys}notifyListeners(key,newValue){this.localCache[key]=newValue;const listeners=this.listeners[key];if(listeners)for(const listener of Array.from(listeners))listener(newValue)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(key,listener){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[key]||(this.listeners[key]=new Set,this._get(key)),this.listeners[key].add(listener)}_removeListener(key,listener){this.listeners[key]&&(this.listeners[key].delete(listener),this.listeners[key].size===0&&delete this.listeners[key]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);function _withDefaultResolver(auth2,resolverOverride){return resolverOverride?_getInstance(resolverOverride):(_assert(auth2._popupRedirectResolver,auth2,"argument-error"),auth2._popupRedirectResolver)}class IdpCredential extends AuthCredential{constructor(params){super("custom","custom"),this.params=params}_getIdTokenResponse(auth2){return signInWithIdp(auth2,this._buildIdpRequest())}_linkToIdToken(auth2,idToken){return signInWithIdp(auth2,this._buildIdpRequest(idToken))}_getReauthenticationResolver(auth2){return signInWithIdp(auth2,this._buildIdpRequest())}_buildIdpRequest(idToken){const request={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return idToken&&(request.idToken=idToken),request}}function _signIn(params){return _signInWithCredential(params.auth,new IdpCredential(params),params.bypassAuthState)}function _reauth(params){const{auth:auth2,user}=params;return _assert(user,auth2,"internal-error"),_reauthenticate(user,new IdpCredential(params),params.bypassAuthState)}async function _link(params){const{auth:auth2,user}=params;return _assert(user,auth2,"internal-error"),_link$1(user,new IdpCredential(params),params.bypassAuthState)}class AbstractPopupRedirectOperation{constructor(auth2,filter3,resolver,user,bypassAuthState=!1){this.auth=auth2,this.resolver=resolver,this.user=user,this.bypassAuthState=bypassAuthState,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(filter3)?filter3:[filter3]}execute(){return new Promise(async(resolve,reject)=>{this.pendingPromise={resolve,reject};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(event){const{urlResponse,sessionId,postBody,tenantId,error,type}=event;if(error){this.reject(error);return}const params={auth:this.auth,requestUri:urlResponse,sessionId,tenantId:tenantId||void 0,postBody:postBody||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(type)(params))}catch(e){this.reject(e)}}onError(error){this.reject(error)}getIdpTask(type){switch(type){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(cred){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(cred),this.unregisterAndCleanUp()}reject(error){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(error),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(auth2,provider,resolver){if(_isFirebaseServerApp(auth2.app))return Promise.reject(_createError(auth2,"operation-not-supported-in-this-environment"));const authInternal=_castAuth(auth2);_assertInstanceOf(auth2,provider,FederatedAuthProvider);const resolverInternal=_withDefaultResolver(authInternal,resolver);return new PopupOperation(authInternal,"signInViaPopup",provider,resolverInternal).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(auth2,filter3,provider,resolver,user){super(auth2,filter3,resolver,user),this.provider=provider,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const result=await this.execute();return _assert(result,this.auth,"internal-error"),result}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const eventId=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],eventId),this.authWindow.associatedEvent=eventId,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,isSupported=>{isSupported||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var _a;return((_a=this.authWindow)===null||_a===void 0?void 0:_a.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const poll=()=>{var _a,_b;if(!((_b=(_a=this.authWindow)===null||_a===void 0?void 0:_a.window)===null||_b===void 0)&&_b.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(poll,_POLL_WINDOW_CLOSE_TIMEOUT.get())};poll()}}PopupOperation.currentPopupAction=null;const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(auth2,resolver,bypassAuthState=!1){super(auth2,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],resolver,void 0,bypassAuthState),this.eventId=null}async execute(){let readyOutcome=redirectOutcomeMap.get(this.auth._key());if(!readyOutcome){try{const result=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;readyOutcome=()=>Promise.resolve(result)}catch(e){readyOutcome=()=>Promise.reject(e)}redirectOutcomeMap.set(this.auth._key(),readyOutcome)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),readyOutcome()}async onAuthEvent(event){if(event.type==="signInViaRedirect")return super.onAuthEvent(event);if(event.type==="unknown"){this.resolve(null);return}if(event.eventId){const user=await this.auth._redirectUserForId(event.eventId);if(user)return this.user=user,super.onAuthEvent(event);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(resolver,auth2){const key=pendingRedirectKey(auth2),persistence=resolverPersistence(resolver);if(!await persistence._isAvailable())return!1;const hasPendingRedirect=await persistence._get(key)==="true";return await persistence._remove(key),hasPendingRedirect}function _overrideRedirectResult(auth2,result){redirectOutcomeMap.set(auth2._key(),result)}function resolverPersistence(resolver){return _getInstance(resolver._redirectPersistence)}function pendingRedirectKey(auth2){return _persistenceKeyName(PENDING_REDIRECT_KEY,auth2.config.apiKey,auth2.name)}async function _getRedirectResult(auth2,resolverExtern,bypassAuthState=!1){if(_isFirebaseServerApp(auth2.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(auth2));const authInternal=_castAuth(auth2),resolver=_withDefaultResolver(authInternal,resolverExtern),result=await new RedirectAction(authInternal,resolver,bypassAuthState).execute();return result&&!bypassAuthState&&(delete result.user._redirectEventId,await authInternal._persistUserIfCurrent(result.user),await authInternal._setRedirectUser(null,resolverExtern)),result}const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(auth2){this.auth=auth2,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(authEventConsumer){this.consumers.add(authEventConsumer),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,authEventConsumer)&&(this.sendToConsumer(this.queuedRedirectEvent,authEventConsumer),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(authEventConsumer){this.consumers.delete(authEventConsumer)}onEvent(event){if(this.hasEventBeenHandled(event))return!1;let handled=!1;return this.consumers.forEach(consumer=>{this.isEventForConsumer(event,consumer)&&(handled=!0,this.sendToConsumer(event,consumer),this.saveEventToCache(event))}),this.hasHandledPotentialRedirect||!isRedirectEvent(event)||(this.hasHandledPotentialRedirect=!0,handled||(this.queuedRedirectEvent=event,handled=!0)),handled}sendToConsumer(event,consumer){var _a;if(event.error&&!isNullRedirectEvent(event)){const code=((_a=event.error.code)===null||_a===void 0?void 0:_a.split("auth/")[1])||"internal-error";consumer.onError(_createError(this.auth,code))}else consumer.onAuthEvent(event)}isEventForConsumer(event,consumer){const eventIdMatches=consumer.eventId===null||!!event.eventId&&event.eventId===consumer.eventId;return consumer.filter.includes(event.type)&&eventIdMatches}hasEventBeenHandled(event){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(event))}saveEventToCache(event){this.cachedEventUids.add(eventUid(event)),this.lastProcessedEventTime=Date.now()}}function eventUid(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(v=>v).join("-")}function isNullRedirectEvent({type,error}){return type==="unknown"&&(error==null?void 0:error.code)==="auth/no-auth-event"}function isRedirectEvent(event){switch(event.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(event);default:return!1}}async function _getProjectConfig(auth2,request={}){return _performApiRequest(auth2,"GET","/v1/projects",request)}const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(auth2){if(auth2.config.emulator)return;const{authorizedDomains}=await _getProjectConfig(auth2);for(const domain of authorizedDomains)try{if(matchDomain(domain))return}catch{}_fail(auth2,"unauthorized-domain")}function matchDomain(expected){const currentUrl=_getCurrentUrl(),{protocol,hostname}=new URL(currentUrl);if(expected.startsWith("chrome-extension://")){const ceUrl=new URL(expected);return ceUrl.hostname===""&&hostname===""?protocol==="chrome-extension:"&&expected.replace("chrome-extension://","")===currentUrl.replace("chrome-extension://",""):protocol==="chrome-extension:"&&ceUrl.hostname===hostname}if(!HTTP_REGEX.test(protocol))return!1;if(IP_ADDRESS_REGEX.test(expected))return hostname===expected;const escapedDomainPattern=expected.replace(/\./g,"\\.");return new RegExp("^(.+\\."+escapedDomainPattern+"|"+escapedDomainPattern+")$","i").test(hostname)}const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const beacon=_window().___jsl;if(beacon!=null&&beacon.H){for(const hint of Object.keys(beacon.H))if(beacon.H[hint].r=beacon.H[hint].r||[],beacon.H[hint].L=beacon.H[hint].L||[],beacon.H[hint].r=[...beacon.H[hint].L],beacon.CP)for(let i=0;i<beacon.CP.length;i++)beacon.CP[i]=null}}function loadGapi(auth2){return new Promise((resolve,reject)=>{var _a,_b,_c;function loadGapiIframe(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{resolve(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),reject(_createError(auth2,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((_b=(_a=_window().gapi)===null||_a===void 0?void 0:_a.iframes)===null||_b===void 0)&&_b.Iframe)resolve(gapi.iframes.getContext());else if(!((_c=_window().gapi)===null||_c===void 0)&&_c.load)loadGapiIframe();else{const cbName=_generateCallbackName("iframefcb");return _window()[cbName]=()=>{gapi.load?loadGapiIframe():reject(_createError(auth2,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${cbName}`).catch(e=>reject(e))}}).catch(error=>{throw cachedGApiLoader=null,error})}let cachedGApiLoader=null;function _loadGapi(auth2){return cachedGApiLoader=cachedGApiLoader||loadGapi(auth2),cachedGApiLoader}const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(auth2){const config=auth2.config;_assert(config.authDomain,auth2,"auth-domain-config-required");const url=config.emulator?_emulatorUrl(config,EMULATED_IFRAME_PATH):`https://${auth2.config.authDomain}/${IFRAME_PATH}`,params={apiKey:config.apiKey,appName:auth2.name,v:SDK_VERSION},eid=EID_FROM_APIHOST.get(auth2.config.apiHost);eid&&(params.eid=eid);const frameworks=auth2._getFrameworks();return frameworks.length&&(params.fw=frameworks.join(",")),`${url}?${querystring(params).slice(1)}`}async function _openIframe(auth2){const context=await _loadGapi(auth2),gapi2=_window().gapi;return _assert(gapi2,auth2,"internal-error"),context.open({where:document.body,url:getIframeUrl(auth2),messageHandlersFilter:gapi2.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},iframe=>new Promise(async(resolve,reject)=>{await iframe.restyle({setHideOnLeave:!1});const networkError=_createError(auth2,"network-request-failed"),networkErrorTimer=_window().setTimeout(()=>{reject(networkError)},PING_TIMEOUT.get());function clearTimerAndResolve(){_window().clearTimeout(networkErrorTimer),resolve(iframe)}iframe.ping(clearTimerAndResolve).then(clearTimerAndResolve,()=>{reject(networkError)})}))}const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(window2){this.window=window2,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(auth2,url,name2,width=DEFAULT_WIDTH,height=DEFAULT_HEIGHT){const top=Math.max((window.screen.availHeight-height)/2,0).toString(),left=Math.max((window.screen.availWidth-width)/2,0).toString();let target="";const options=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:width.toString(),height:height.toString(),top,left}),ua=getUA().toLowerCase();name2&&(target=_isChromeIOS(ua)?TARGET_BLANK:name2),_isFirefox(ua)&&(url=url||FIREFOX_EMPTY_URL,options.scrollbars="yes");const optionsString=Object.entries(options).reduce((accum,[key,value])=>`${accum}${key}=${value},`,"");if(_isIOSStandalone(ua)&&target!=="_self")return openAsNewWindowIOS(url||"",target),new AuthPopup(null);const newWin=window.open(url||"",target,optionsString);_assert(newWin,auth2,"popup-blocked");try{newWin.focus()}catch{}return new AuthPopup(newWin)}function openAsNewWindowIOS(url,target){const el=document.createElement("a");el.href=url,el.target=target;const click=document.createEvent("MouseEvent");click.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),el.dispatchEvent(click)}const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(auth2,provider,authType,redirectUrl,eventId,additionalParams){_assert(auth2.config.authDomain,auth2,"auth-domain-config-required"),_assert(auth2.config.apiKey,auth2,"invalid-api-key");const params={apiKey:auth2.config.apiKey,appName:auth2.name,authType,redirectUrl,v:SDK_VERSION,eventId};if(provider instanceof FederatedAuthProvider){provider.setDefaultLanguage(auth2.languageCode),params.providerId=provider.providerId||"",isEmpty(provider.getCustomParameters())||(params.customParameters=JSON.stringify(provider.getCustomParameters()));for(const[key,value]of Object.entries({}))params[key]=value}if(provider instanceof BaseOAuthProvider){const scopes=provider.getScopes().filter(scope=>scope!=="");scopes.length>0&&(params.scopes=scopes.join(","))}auth2.tenantId&&(params.tid=auth2.tenantId);const paramsDict=params;for(const key of Object.keys(paramsDict))paramsDict[key]===void 0&&delete paramsDict[key];const appCheckToken=await auth2._getAppCheckToken(),appCheckTokenFragment=appCheckToken?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(appCheckToken)}`:"";return`${getHandlerBase(auth2)}?${querystring(paramsDict).slice(1)}${appCheckTokenFragment}`}function getHandlerBase({config}){return config.emulator?_emulatorUrl(config,EMULATOR_WIDGET_PATH):`https://${config.authDomain}/${WIDGET_PATH}`}const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(auth2,provider,authType,eventId){var _a;debugAssert((_a=this.eventManagers[auth2._key()])===null||_a===void 0?void 0:_a.manager,"_initialize() not called before _openPopup()");const url=await _getRedirectUrl(auth2,provider,authType,_getCurrentUrl(),eventId);return _open(auth2,url,_generateEventId())}async _openRedirect(auth2,provider,authType,eventId){await this._originValidation(auth2);const url=await _getRedirectUrl(auth2,provider,authType,_getCurrentUrl(),eventId);return _setWindowLocation(url),new Promise(()=>{})}_initialize(auth2){const key=auth2._key();if(this.eventManagers[key]){const{manager,promise:promise2}=this.eventManagers[key];return manager?Promise.resolve(manager):(debugAssert(promise2,"If manager is not set, promise should be"),promise2)}const promise=this.initAndGetManager(auth2);return this.eventManagers[key]={promise},promise.catch(()=>{delete this.eventManagers[key]}),promise}async initAndGetManager(auth2){const iframe=await _openIframe(auth2),manager=new AuthEventManager(auth2);return iframe.register("authEvent",iframeEvent=>(_assert(iframeEvent==null?void 0:iframeEvent.authEvent,auth2,"invalid-auth-event"),{status:manager.onEvent(iframeEvent.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[auth2._key()]={manager},this.iframes[auth2._key()]=iframe,manager}_isIframeWebStorageSupported(auth2,cb){this.iframes[auth2._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},result=>{var _a;const isSupported=(_a=result==null?void 0:result[0])===null||_a===void 0?void 0:_a[WEB_STORAGE_SUPPORT_KEY];isSupported!==void 0&&cb(!!isSupported),_fail(auth2,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(auth2){const key=auth2._key();return this.originValidationPromises[key]||(this.originValidationPromises[key]=_validateOrigin(auth2)),this.originValidationPromises[key]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$1="@firebase/auth",version$1="1.7.9";class AuthInterop{constructor(auth2){this.auth=auth2,this.internalListeners=new Map}getUid(){var _a;return this.assertAuthConfigured(),((_a=this.auth.currentUser)===null||_a===void 0?void 0:_a.uid)||null}async getToken(forceRefresh){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(forceRefresh)}:null}addAuthTokenListener(listener){if(this.assertAuthConfigured(),this.internalListeners.has(listener))return;const unsubscribe=this.auth.onIdTokenChanged(user=>{listener((user==null?void 0:user.stsTokenManager.accessToken)||null)});this.internalListeners.set(listener,unsubscribe),this.updateProactiveRefresh()}removeAuthTokenListener(listener){this.assertAuthConfigured();const unsubscribe=this.internalListeners.get(listener);unsubscribe&&(this.internalListeners.delete(listener),unsubscribe(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function getVersionForPlatform(clientPlatform){switch(clientPlatform){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(clientPlatform){_registerComponent(new Component("auth",(container,{options:deps})=>{const app2=container.getProvider("app").getImmediate(),heartbeatServiceProvider=container.getProvider("heartbeat"),appCheckServiceProvider=container.getProvider("app-check-internal"),{apiKey,authDomain}=app2.options;_assert(apiKey&&!apiKey.includes(":"),"invalid-api-key",{appName:app2.name});const config={apiKey,authDomain,clientPlatform,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(clientPlatform)},authInstance=new AuthImpl(app2,heartbeatServiceProvider,appCheckServiceProvider,config);return _initializeAuthInstance(authInstance,deps),authInstance},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((container,_instanceIdentifier,_instance)=>{container.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",container=>{const auth2=_castAuth(container.getProvider("auth").getImmediate());return(auth3=>new AuthInterop(auth3))(auth2)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$1,version$1,getVersionForPlatform(clientPlatform)),registerVersion(name$1,version$1,"esm2017")}const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=url=>async user=>{const idTokenResult=user&&await user.getIdTokenResult(),idTokenAge=idTokenResult&&(new Date().getTime()-Date.parse(idTokenResult.issuedAtTime))/1e3;if(idTokenAge&&idTokenAge>authIdTokenMaxAge)return;const idToken=idTokenResult==null?void 0:idTokenResult.token;lastPostedIdToken!==idToken&&(lastPostedIdToken=idToken,await fetch(url,{method:idToken?"POST":"DELETE",headers:idToken?{Authorization:`Bearer ${idToken}`}:{}}))};function getAuth(app2=getApp()){const provider=_getProvider(app2,"auth");if(provider.isInitialized())return provider.getImmediate();const auth2=initializeAuth(app2,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),authTokenSyncPath=getExperimentalSetting("authTokenSyncURL");if(authTokenSyncPath&&typeof isSecureContext=="boolean"&&isSecureContext){const authTokenSyncUrl=new URL(authTokenSyncPath,location.origin);if(location.origin===authTokenSyncUrl.origin){const mintCookie=mintCookieFactory(authTokenSyncUrl.toString());beforeAuthStateChanged(auth2,mintCookie,()=>mintCookie(auth2.currentUser)),onIdTokenChanged(auth2,user=>mintCookie(user))}}const authEmulatorHost=getDefaultEmulatorHost("auth");return authEmulatorHost&&connectAuthEmulator(auth2,`http://${authEmulatorHost}`),auth2}function getScriptParentElement(){var _a,_b;return(_b=(_a=document.getElementsByTagName("head"))===null||_a===void 0?void 0:_a[0])!==null&&_b!==void 0?_b:document}_setExternalJSProvider({loadJS(url){return new Promise((resolve,reject)=>{const el=document.createElement("script");el.setAttribute("src",url),el.onload=resolve,el.onerror=e=>{const error=_createError("internal-error");error.customData=e,reject(error)},el.type="text/javascript",el.charset="UTF-8",getScriptParentElement().appendChild(el)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var name="firebase",version="10.14.1";registerVersion(name,version,"app");const firebaseConfig={apiKey:"your-api-key",authDomain:"your-project.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project.appspot.com",messagingSenderId:"123456789",appId:"your-app-id"},app=initializeApp(firebaseConfig),auth=getAuth(app),GoogleSignIn=({onSuccess,onError,className="",children})=>{const[isLoading,setIsLoading]=reactExports.useState(!1),{setUser}=useAuth(),{showToast}=useToast(),handleGoogleSignIn=async()=>{var _a,_b,_c,_d;setIsLoading(!0);try{if(!auth)throw new Error("Firebase authentication is not initialized");const provider=new GoogleAuthProvider;provider.addScope("email"),provider.addScope("profile");const idToken=await(await signInWithPopup(auth,provider)).user.getIdToken(),response=await api.post("google/google-signin",{id_token:idToken});if(response.data.success){const{user,access_token}=response.data.data;localStorage.setItem("accessToken",access_token),setUser(user),onSuccess==null||onSuccess(user)}else throw new Error(response.data.message||"Google sign-in failed")}catch(error){console.error("Google sign-in error:",error);let errorMessage="Failed to sign in with Google. Please try again.";error.code==="auth/popup-closed-by-user"?errorMessage="Sign-in was cancelled.":error.code==="auth/popup-blocked"?errorMessage="Popup was blocked. Please allow popups and try again.":error.code==="auth/network-request-failed"?errorMessage="Network error. Please check your connection.":error.code==="auth/configuration-not-found"?errorMessage="Firebase configuration not found. Please check your environment variables.":error.code==="auth/invalid-api-key"?errorMessage="Invalid Firebase API key. Please check your configuration.":(_b=(_a=error.response)==null?void 0:_a.data)!=null&&_b.message?errorMessage=error.response.data.message:(_c=error.message)!=null&&_c.includes("Network Error")&&(errorMessage="Backend API not available. Please check if the server is running."),console.error("Error details:",{code:error.code,message:error.message,response:(_d=error.response)==null?void 0:_d.data}),showToast({type:"error",title:"Google Sign-In Failed",message:errorMessage}),onError==null||onError(errorMessage)}finally{setIsLoading(!1)}};return children?jsxRuntimeExports.jsx("div",{onClick:handleGoogleSignIn,className,children}):jsxRuntimeExports.jsx("button",{onClick:handleGoogleSignIn,disabled:isLoading,className:`
        w-full flex items-center justify-center px-4 py-2 border border-gray-300 
        rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 
        hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 
        focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed
        ${className}
      `,children:isLoading?jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Signing in..."]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),jsxRuntimeExports.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),jsxRuntimeExports.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),jsxRuntimeExports.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})})},logoImage="/assets/logo-CvSaxuJH.png",LoginPopup=({isOpen,onClose,onLoginSuccess})=>{const{login}=useAuth(),navigate=useNavigate(),[formData,setFormData]=reactExports.useState({email:"",password:""}),[showPassword,setShowPassword]=reactExports.useState(!1),[errors,setErrors]=reactExports.useState({}),[success,setSuccess]=reactExports.useState(null),[isSubmitting,setIsSubmitting]=reactExports.useState(!1);reactExports.useEffect(()=>{isOpen&&(setFormData({email:"",password:""}),setErrors({}),setSuccess(null))},[isOpen]);const handleInputChange=e=>{const{name:name2,value}=e.target;setFormData(prev=>({...prev,[name2]:value})),errors[name2]&&setErrors(prev=>({...prev,[name2]:void 0})),errors.general&&setErrors(prev=>({...prev,general:void 0}))};reactExports.useEffect(()=>{const validateField=(name2,value)=>{switch(name2){case"email":return value&&!value.includes("@")?"Please enter a valid email address":void 0;case"password":return;default:return}},newErrors={};Object.entries(formData).forEach(([key,value])=>{const error=validateField(key,value);error&&(newErrors[key]=error)}),setErrors(prev=>({...prev,...newErrors}))},[formData]);const validateForm=()=>{const newErrors={},emailTrimmed=formData.email.trim();return emailTrimmed?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailTrimmed)?emailTrimmed.length>254&&(newErrors.email="Email address is too long"):newErrors.email="Please enter a valid email address":newErrors.email="Please enter your email address",formData.password.trim()?formData.password.length>128&&(newErrors.password="Password is too long"):newErrors.password="Please enter your password",newErrors},handleSubmit=async e=>{e.preventDefault();const validationErrors=validateForm();if(Object.keys(validationErrors).length>0){setErrors(validationErrors);return}try{setIsSubmitting(!0),setErrors({}),setSuccess(null),await login(formData.email,formData.password),setSuccess("Login successful!"),onLoginSuccess(),onClose()}catch(err){console.error("Login error:",err),setErrors({general:err.message||"Login failed. Please check your credentials and try again."})}finally{setIsSubmitting(!1)}},handleGoogleLoginSuccess=user=>{console.log("Google login successful:",user),onLoginSuccess()},handleGoogleLoginError=error=>{console.error("Google login error:",error),setErrors({general:error})},handleFacebookLogin=()=>{console.log("Facebook login clicked")};return jsxRuntimeExports.jsx(AnimatePresence,{children:isOpen&&jsxRuntimeExports.jsxs(motion.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:onClose}),jsxRuntimeExports.jsx(motion.div,{className:"relative w-full max-w-md",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.5},children:jsxRuntimeExports.jsxs(ModernCard,{variant:"glass",padding:"xl",shadow:"glow",className:"backdrop-blur-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("img",{src:logoImage,alt:"SafarBot Logo",className:"w-20 h-20 object-contain"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Welcome Back"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Sign in to your account"})]})]}),jsxRuntimeExports.jsx("button",{onClick:onClose,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5 text-gray-500"})})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:errors.general&&jsxRuntimeExports.jsx(motion.div,{className:"mb-4 bg-red-50 border border-red-200 rounded-xl p-3",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-4 h-4 text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-red-700 text-sm",children:errors.general})]})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:success&&jsxRuntimeExports.jsx(motion.div,{className:"mb-4 bg-green-50 border border-green-200 rounded-xl p-3",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-green-500"}),jsxRuntimeExports.jsx("span",{className:"text-green-700 text-sm",children:success})]})})}),jsxRuntimeExports.jsxs("form",{onSubmit:handleSubmit,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"email",name:"email",type:"email",value:formData.email,onChange:handleInputChange,placeholder:"Enter your email",className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500 placeholder:text-sm transition-all duration-200 ${errors.email?"border-red-300":"border-gray-300"}`,required:!0})]}),errors.email&&jsxRuntimeExports.jsx(motion.p,{className:"mt-1 text-sm text-red-500",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:errors.email})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"password",name:"password",type:showPassword?"text":"password",value:formData.password,onChange:handleInputChange,placeholder:"Enter your password",className:`w-full pl-10 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500 placeholder:text-sm transition-all duration-200 ${errors.password?"border-red-300":"border-gray-300"}`,required:!0}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>setShowPassword(!showPassword),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:showPassword?jsxRuntimeExports.jsx(EyeOff,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4"})})]}),errors.password&&jsxRuntimeExports.jsx(motion.p,{className:"mt-1 text-sm text-red-500",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:errors.password})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-500 focus:ring-primary-500 border-gray-300 rounded"}),jsxRuntimeExports.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{onClose(),navigate("/forgot-password")},className:"text-sm text-primary-600 hover:text-primary-500 font-medium transition-colors",children:"Forgot password?"})]}),jsxRuntimeExports.jsx(Button,{type:"submit",loading:isSubmitting,icon:isSubmitting?Loader2:User,className:"w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm",size:"md",disabled:isSubmitting,children:isSubmitting?"Signing In...":"Sign In"})]}),jsxRuntimeExports.jsx("div",{className:"mt-6",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-gray-300"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center text-sm",children:jsxRuntimeExports.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsx(GoogleSignIn,{onSuccess:handleGoogleLoginSuccess,onError:handleGoogleLoginError,className:"w-full border-gray-300 text-gray-700 hover:bg-gray-50 text-sm"}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"md",onClick:handleFacebookLogin,className:"w-full border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"#1877F2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),jsxRuntimeExports.jsx("span",{className:"ml-2",children:"Facebook"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>{onClose(),navigate("/signup")},className:"font-medium text-primary-600 hover:text-primary-500 transition-colors",children:"Sign up here"})]})})]})})]})})},SignupPopup=({isOpen,onClose,onSignupSuccess})=>{const{signup}=useAuth(),navigate=useNavigate(),[formData,setFormData]=reactExports.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[showPassword,setShowPassword]=reactExports.useState(!1),[showConfirmPassword,setShowConfirmPassword]=reactExports.useState(!1),[isSubmitting,setIsSubmitting]=reactExports.useState(!1),[errors,setErrors]=reactExports.useState({}),[success,setSuccess]=reactExports.useState(null),[passwordStrength,setPasswordStrength]=reactExports.useState({score:0,feedback:"",color:"text-gray-400"});reactExports.useEffect(()=>{isOpen&&(setFormData({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),setErrors({}),setSuccess(null),setPasswordStrength({score:0,feedback:"",color:"text-gray-400"}))},[isOpen]);const calculatePasswordStrength=password=>{let score=0,feedback="";return password.length===0?{score:0,feedback:"",color:"text-gray-400"}:(password.length>=8&&(score+=1),password.length>=12&&(score+=1),/[a-z]/.test(password)&&(score+=1),/[A-Z]/.test(password)&&(score+=1),/[0-9]/.test(password)&&(score+=1),/[^A-Za-z0-9]/.test(password)&&(score+=1),score<=2?(feedback="Weak password",{score,feedback,color:"text-red-500"}):score<=4?(feedback="Medium strength",{score,feedback,color:"text-yellow-500"}):(feedback="Strong password",{score,feedback,color:"text-green-500"}))},handleInputChange=e=>{const{name:name2,value}=e.target;setFormData(prev=>({...prev,[name2]:value})),errors[name2]&&setErrors(prev=>({...prev,[name2]:void 0})),errors.general&&setErrors(prev=>({...prev,general:void 0})),name2==="password"&&setPasswordStrength(calculatePasswordStrength(value))};reactExports.useEffect(()=>{const validateField=(name2,value)=>{switch(name2){case"firstName":case"lastName":return value&&value.trim().length<2?"Name must be at least 2 characters long":void 0;case"email":return value&&!value.includes("@")?"Please enter a valid email address":void 0;case"password":return value&&value.length<6?"Password must be at least 6 characters long":void 0;case"confirmPassword":return value&&formData.password&&value!==formData.password?"Passwords do not match":void 0;default:return}},newErrors={};Object.entries(formData).forEach(([key,value])=>{const error=validateField(key,value);error&&(newErrors[key]=error)}),setErrors(prev=>({...prev,...newErrors}))},[formData]);const validateForm=()=>{const newErrors={};return formData.firstName.trim()?formData.firstName.trim().length<2&&(newErrors.firstName="First name must be at least 2 characters long"):newErrors.firstName="Please enter your first name",formData.lastName.trim()?formData.lastName.trim().length<2&&(newErrors.lastName="Last name must be at least 2 characters long"):newErrors.lastName="Please enter your last name",formData.email.trim()?formData.email.includes("@")||(newErrors.email="Please enter a valid email address"):newErrors.email="Please enter your email address",formData.password.trim()?formData.password.length<6&&(newErrors.password="Password must be at least 6 characters long"):newErrors.password="Please enter your password",formData.confirmPassword.trim()?formData.password!==formData.confirmPassword&&(newErrors.confirmPassword="Passwords do not match"):newErrors.confirmPassword="Please confirm your password",newErrors},handleSubmit=async e=>{e.preventDefault();const validationErrors=validateForm();if(Object.keys(validationErrors).length>0){setErrors(validationErrors);return}try{setIsSubmitting(!0),setErrors({}),setSuccess(null),await signup({first_name:formData.firstName,last_name:formData.lastName,email:formData.email,password:formData.password,confirm_password:formData.confirmPassword}),setSuccess("Account created successfully! Please check your email for verification."),setTimeout(()=>{onSignupSuccess(formData.email)},1500)}catch(err){console.error("Signup error:",err),setErrors({general:err.message||"Signup failed. Please try again."})}finally{setIsSubmitting(!1)}},handleGoogleSignup=()=>{console.log("Google signup clicked")},handleFacebookSignup=()=>{console.log("Facebook signup clicked")};return jsxRuntimeExports.jsx(AnimatePresence,{children:isOpen&&jsxRuntimeExports.jsxs(motion.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:onClose}),jsxRuntimeExports.jsx(motion.div,{className:"relative w-full max-w-lg",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.5},children:jsxRuntimeExports.jsxs(ModernCard,{variant:"glass",padding:"xl",shadow:"glow",className:"backdrop-blur-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("img",{src:logoImage,alt:"SafarBot Logo",className:"w-20 h-20 object-contain"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Account"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Join SafarBot and start your journey"})]})]}),jsxRuntimeExports.jsx("button",{onClick:onClose,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5 text-gray-500"})})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:errors.general&&jsxRuntimeExports.jsx(motion.div,{className:"mb-4 bg-red-50 border border-red-200 rounded-xl p-3",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-4 h-4 text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-red-700 text-sm",children:errors.general})]})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:success&&jsxRuntimeExports.jsx(motion.div,{className:"mb-4 bg-green-50 border border-green-200 rounded-xl p-3",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-green-500"}),jsxRuntimeExports.jsx("span",{className:"text-green-700 text-sm",children:success})]})})}),jsxRuntimeExports.jsxs("form",{onSubmit:handleSubmit,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"firstName",name:"firstName",type:"text",value:formData.firstName,onChange:handleInputChange,placeholder:"First name",className:`w-full pl-10 pr-4 py-2.5 border-2 rounded-xl focus:ring-4 focus:ring-primary-500/20 focus:border-primary-500 bg-white text-gray-900 placeholder-gray-500 placeholder:text-sm transition-all duration-200 ${errors.firstName?"border-red-300":"border-gray-200 hover:border-gray-300"}`,required:!0})]}),errors.firstName&&jsxRuntimeExports.jsx(motion.p,{className:"mt-1 text-sm text-red-500",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:errors.firstName})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"lastName",name:"lastName",type:"text",value:formData.lastName,onChange:handleInputChange,placeholder:"Last name",className:`w-full pl-10 pr-4 py-2.5 border-2 rounded-xl focus:ring-4 focus:ring-primary-500/20 focus:border-primary-500 bg-white text-gray-900 placeholder-gray-500 placeholder:text-sm transition-all duration-200 ${errors.lastName?"border-red-300":"border-gray-200 hover:border-gray-300"}`,required:!0})]}),errors.lastName&&jsxRuntimeExports.jsx(motion.p,{className:"mt-1 text-sm text-red-500",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:errors.lastName})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"email",name:"email",type:"email",value:formData.email,onChange:handleInputChange,placeholder:"Enter your email",className:`w-full pl-10 pr-4 py-2.5 border-2 rounded-xl focus:ring-4 focus:ring-primary-500/20 focus:border-primary-500 bg-white text-gray-900 placeholder-gray-500 placeholder:text-sm transition-all duration-200 ${errors.email?"border-red-300":"border-gray-200 hover:border-gray-300"}`,required:!0})]}),errors.email&&jsxRuntimeExports.jsx(motion.p,{className:"mt-1 text-sm text-red-500",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:errors.email})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"password",name:"password",type:showPassword?"text":"password",value:formData.password,onChange:handleInputChange,placeholder:"Create a password",className:`w-full pl-10 pr-12 py-2.5 border-2 rounded-xl focus:ring-4 focus:ring-primary-500/20 focus:border-primary-500 bg-white text-gray-900 placeholder-gray-500 placeholder:text-sm transition-all duration-200 ${errors.password?"border-red-300":"border-gray-200 hover:border-gray-300"}`,required:!0}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>setShowPassword(!showPassword),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:showPassword?jsxRuntimeExports.jsx(EyeOff,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4"})})]}),formData.password&&jsxRuntimeExports.jsx(motion.div,{className:"mt-2",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${passwordStrength.score<=2?"bg-red-400":passwordStrength.score<=4?"bg-yellow-400":"bg-green-400"}`,style:{width:`${passwordStrength.score/6*100}%`}})}),jsxRuntimeExports.jsx("span",{className:`text-sm ${passwordStrength.color}`,children:passwordStrength.feedback})]})}),errors.password&&jsxRuntimeExports.jsx(motion.p,{className:"mt-1 text-sm text-red-500",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:errors.password})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:showConfirmPassword?"text":"password",value:formData.confirmPassword,onChange:handleInputChange,placeholder:"Confirm your password",className:`w-full pl-10 pr-12 py-2.5 border-2 rounded-xl focus:ring-4 focus:ring-primary-500/20 focus:border-primary-500 bg-white text-gray-900 placeholder-gray-500 placeholder:text-sm transition-all duration-200 ${errors.confirmPassword?"border-red-300":"border-gray-200 hover:border-gray-300"}`,required:!0}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>setShowConfirmPassword(!showConfirmPassword),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:showConfirmPassword?jsxRuntimeExports.jsx(EyeOff,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4"})})]}),formData.confirmPassword&&formData.password&&jsxRuntimeExports.jsx(motion.div,{className:"mt-2 flex items-center space-x-2",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:formData.password===formData.confirmPassword?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 text-green-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-green-600",children:"Passwords match"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-4 h-4 text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-red-500",children:"Passwords do not match"})]})}),errors.confirmPassword&&jsxRuntimeExports.jsx(motion.p,{className:"mt-1 text-sm text-red-500",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:errors.confirmPassword})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("input",{id:"terms",name:"terms",type:"checkbox",className:"h-4 w-4 text-primary-500 focus:ring-primary-500 border-gray-300 rounded mt-1",required:!0}),jsxRuntimeExports.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700",children:["I agree to the"," ",jsxRuntimeExports.jsx("button",{type:"button",className:"text-primary-600 hover:text-primary-500 underline",children:"Terms and Conditions"})," ","and"," ",jsxRuntimeExports.jsx("button",{type:"button",className:"text-primary-600 hover:text-primary-500 underline",children:"Privacy Policy"})]})]}),jsxRuntimeExports.jsx(ModernButton,{type:"submit",loading:isSubmitting,icon:isSubmitting?Loader2:UserPlus,className:"w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm",size:"md",disabled:isSubmitting,children:isSubmitting?"Creating Account...":"Create Account"})]}),jsxRuntimeExports.jsx("div",{className:"mt-6",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-gray-300"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center text-sm",children:jsxRuntimeExports.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs(ModernButton,{variant:"bordered",size:"md",onClick:handleGoogleSignup,className:"w-full border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",children:[jsxRuntimeExports.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),jsxRuntimeExports.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),jsxRuntimeExports.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),jsxRuntimeExports.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),jsxRuntimeExports.jsx("span",{className:"ml-2",children:"Google"})]}),jsxRuntimeExports.jsxs(ModernButton,{variant:"bordered",size:"md",onClick:handleFacebookSignup,className:"w-full border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"#1877F2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),jsxRuntimeExports.jsx("span",{className:"ml-2",children:"Facebook"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>{onClose(),navigate("/login")},className:"font-medium text-primary-600 hover:text-primary-500 transition-colors",children:"Sign in here"})]})})]})})]})})},ForgotPasswordPopup=({isOpen,onClose})=>{const{forgotPassword}=useAuth(),navigate=useNavigate(),[email,setEmail]=reactExports.useState(""),[isSubmitting,setIsSubmitting]=reactExports.useState(!1),[error,setError]=reactExports.useState(null),[success,setSuccess]=reactExports.useState(null);reactExports.useEffect(()=>{isOpen&&(setEmail(""),setError(null),setSuccess(null))},[isOpen]);const handleInputChange=e=>{setEmail(e.target.value),error&&setError(null)},validateEmail=email2=>email2.trim()?email2.includes("@")?null:"Please enter a valid email address":"Please enter your email address",handleSubmit=async e=>{e.preventDefault();const validationError=validateEmail(email);if(validationError){setError(validationError);return}try{setIsSubmitting(!0),setError(null),setSuccess(null),await forgotPassword(email),setSuccess("Password reset instructions sent to your email! Check your inbox and follow the link to reset your password.")}catch(err){console.error("Forgot password error:",err),setError(err.message||"Failed to send reset instructions. Please try again.")}finally{setIsSubmitting(!1)}};return jsxRuntimeExports.jsx(AnimatePresence,{children:isOpen&&jsxRuntimeExports.jsxs(motion.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:onClose}),jsxRuntimeExports.jsx(motion.div,{className:"relative w-full max-w-md",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.5},children:jsxRuntimeExports.jsxs(ModernCard,{variant:"glass",padding:"xl",shadow:"glow",className:"backdrop-blur-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("img",{src:logoImage,alt:"SafarBot Logo",className:"w-20 h-20 object-contain"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Forgot Password?"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Enter your email to reset your password"})]})]}),jsxRuntimeExports.jsx("button",{onClick:onClose,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5 text-gray-500"})})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:error&&jsxRuntimeExports.jsx(motion.div,{className:"mb-4 bg-red-50 border border-red-200 rounded-xl p-3",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-4 h-4 text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-red-700 text-sm",children:error})]})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:success&&jsxRuntimeExports.jsx(motion.div,{className:"mb-4 bg-green-50 border border-green-200 rounded-xl p-3",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-green-500"}),jsxRuntimeExports.jsx("span",{className:"text-green-700 text-sm",children:success})]})})}),jsxRuntimeExports.jsxs("form",{onSubmit:handleSubmit,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),jsxRuntimeExports.jsx("input",{id:"email",name:"email",type:"email",value:email,onChange:handleInputChange,placeholder:"Enter your email address",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500 placeholder:text-sm transition-all duration-200",required:!0})]})]}),jsxRuntimeExports.jsx(ModernButton,{type:"submit",loading:isSubmitting,icon:isSubmitting?Loader2:Mail,className:"w-full bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",size:"md",disabled:isSubmitting,children:isSubmitting?"Sending...":"Send Reset Instructions"})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsxs("button",{onClick:()=>{onClose(),navigate("/login")},className:"inline-flex items-center justify-center w-full px-4 py-2.5 border border-gray-300 text-gray-700 text-sm rounded-xl hover:bg-gray-50 transition-all duration-200",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]})}),jsxRuntimeExports.jsx("div",{className:"mt-4 text-center",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>{onClose(),navigate("/signup")},className:"text-primary-600 hover:text-primary-500 underline transition-colors",children:"Sign up here"})]})})]})})]})})},OTPVerificationModal=({isOpen,onClose,email,onVerificationSuccess,onBackToSignup})=>{const[otp,setOtp]=reactExports.useState(["","","","","",""]),[isVerifying,setIsVerifying]=reactExports.useState(!1),[isResending,setIsResending]=reactExports.useState(!1),[error,setError]=reactExports.useState(null),[success,setSuccess]=reactExports.useState(null),[resendCooldown,setResendCooldown]=reactExports.useState(0),[attempts,setAttempts]=reactExports.useState(0),inputRefs=reactExports.useRef([]);reactExports.useEffect(()=>{isOpen&&(setOtp(["","","","","",""]),setError(null),setSuccess(null),setAttempts(0),setResendCooldown(120),setTimeout(()=>{var _a;(_a=inputRefs.current[0])==null||_a.focus()},100))},[isOpen]),reactExports.useEffect(()=>{if(resendCooldown>0){const timer=setTimeout(()=>{setResendCooldown(resendCooldown-1)},1e3);return()=>clearTimeout(timer)}},[resendCooldown]);const handleOtpChange=(index,value)=>{var _a;if(!/^\d*$/.test(value))return;const newOtp=[...otp];newOtp[index]=value,setOtp(newOtp),error&&setError(null),value&&index<5&&((_a=inputRefs.current[index+1])==null||_a.focus())},handleKeyDown=(index,e)=>{var _a;e.key==="Backspace"&&!otp[index]&&index>0&&((_a=inputRefs.current[index-1])==null||_a.focus()),e.key==="v"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),navigator.clipboard.readText().then(text=>{var _a2;const pastedOtp=text.replace(/\D/g,"").slice(0,6);if(pastedOtp.length===6){const newOtp=pastedOtp.split("");setOtp(newOtp),(_a2=inputRefs.current[5])==null||_a2.focus()}}))},handleVerify=async()=>{const otpString=otp.join("");if(otpString.length!==6){setError("Please enter the complete 6-digit OTP");return}try{setIsVerifying(!0),setError(null),setSuccess(null),(await authAPI$1.verifyOTP({email,otp:otpString})).is_verified?setSuccess("Your email is verified! Click here to login:"):(setError("Invalid OTP. Please try again."),setAttempts(prev=>prev+1))}catch(err){console.error("OTP verification error:",err),setError(err.message||"Verification failed. Please try again."),setAttempts(prev=>prev+1)}finally{setIsVerifying(!1)}},handleResend=async()=>{var _a;if(!(resendCooldown>0))try{setIsResending(!0),setError(null),await authAPI$1.resendOTP(email),setSuccess("OTP sent successfully! Please check your email."),setResendCooldown(120),setOtp(["","","","","",""]),(_a=inputRefs.current[0])==null||_a.focus()}catch(err){console.error("Resend OTP error:",err),setError(err.message||"Failed to resend OTP. Please try again.")}finally{setIsResending(!1)}},formatTime=seconds=>{const mins=Math.floor(seconds/60),secs=seconds%60;return`${mins}:${secs.toString().padStart(2,"0")}`},isOtpComplete=otp.every(digit=>digit!==""),isMaxAttemptsReached=attempts>=3;return jsxRuntimeExports.jsx(AnimatePresence,{children:isOpen&&jsxRuntimeExports.jsxs(motion.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:onClose}),jsxRuntimeExports.jsx(motion.div,{className:"relative w-full max-w-md",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.5},children:jsxRuntimeExports.jsxs(ModernCard,{variant:"glass",padding:"xl",shadow:"glow",className:"backdrop-blur-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("img",{src:logoImage,alt:"SafarBot Logo",className:"w-16 h-16 object-contain drop-shadow-lg"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Verify Email"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Enter the code sent to your email"})]})]}),jsxRuntimeExports.jsx("button",{onClick:onClose,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5 text-gray-500"})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Mail,{className:"w-5 h-5 text-blue-500"}),jsxRuntimeExports.jsx("span",{className:"text-blue-700 font-medium",children:email})]}),jsxRuntimeExports.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"We've sent a 6-digit verification code to this email address."})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:error&&jsxRuntimeExports.jsxs(motion.div,{className:"mb-4 bg-red-50 border border-red-200 rounded-xl p-3",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-4 h-4 text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-red-700 text-sm",children:error})]}),isMaxAttemptsReached&&jsxRuntimeExports.jsx("p",{className:"text-red-600 text-xs mt-1",children:"Maximum attempts reached. Please request a new OTP."})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:success&&jsxRuntimeExports.jsxs(motion.div,{className:"mb-4 bg-green-50 border border-green-200 rounded-xl p-3",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-green-500"}),jsxRuntimeExports.jsx("span",{className:"text-green-700 text-sm",children:success})]}),success.includes("Click here to login")&&jsxRuntimeExports.jsx(ModernButton,{onClick:()=>{onVerificationSuccess()},className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white",size:"sm",children:"Login Now"})]})}),!(success!=null&&success.includes("Click here to login"))&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Enter Verification Code"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center space-x-3",children:otp.map((digit,index)=>jsxRuntimeExports.jsx("input",{ref:el=>inputRefs.current[index]=el,type:"text",inputMode:"numeric",maxLength:1,value:digit,onChange:e=>handleOtpChange(index,e.target.value),onKeyDown:e=>handleKeyDown(index,e),className:`w-12 h-12 text-center text-xl font-bold border-2 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-gray-900 transition-all duration-200 ${error?"border-red-300":"border-gray-300"}`,disabled:isVerifying||isMaxAttemptsReached},index))})]}),jsxRuntimeExports.jsx(ModernButton,{onClick:handleVerify,loading:isVerifying,icon:isVerifying?Loader2:CheckCircle,className:"w-full disabled:opacity-50 disabled:cursor-not-allowed mb-4",size:"lg",disabled:!isOtpComplete||isVerifying||isMaxAttemptsReached,children:isVerifying?"Verifying...":"Verify Email"})]}),!(success!=null&&success.includes("Click here to login"))&&jsxRuntimeExports.jsx("div",{className:"text-center",children:resendCooldown>0?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-500",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),jsxRuntimeExports.jsxs("span",{className:"text-sm",children:["Resend available in ",formatTime(resendCooldown)]})]}):jsxRuntimeExports.jsxs("button",{onClick:handleResend,disabled:isResending,className:"flex items-center justify-center space-x-2 text-primary-600 hover:text-primary-500 transition-colors disabled:opacity-50",children:[isResending?jsxRuntimeExports.jsx(Loader2,{className:"w-4 h-4 animate-spin"}):jsxRuntimeExports.jsx(RotateCcw,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:isResending?"Sending...":"Resend OTP"})]})}),!(success!=null&&success.includes("Click here to login"))&&jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Wrong email?"," ",jsxRuntimeExports.jsx("button",{onClick:onBackToSignup,className:"font-medium text-primary-600 hover:text-primary-500 transition-colors",children:"Go back to signup"})]})})]})})]})})},AuthModal=({isOpen,onClose,defaultMode="login",onLoginSuccess,onSignupSuccess})=>{const[mode,setMode]=reactExports.useState(defaultMode),[signupEmail,setSignupEmail]=reactExports.useState("");reactExports.useEffect(()=>{console.log("AuthModal: defaultMode changed to",defaultMode),setMode(defaultMode)},[defaultMode]),reactExports.useEffect(()=>{console.log("AuthModal: isOpen changed to",isOpen,"mode:",mode)},[isOpen,mode]);const handleLoginSuccess=()=>{onLoginSuccess==null||onLoginSuccess(),onClose()},handleSignupSuccess=email=>{email?(setSignupEmail(email),setMode("otp-verification")):(onSignupSuccess==null||onSignupSuccess(),onClose())},handleOTPVerificationSuccess=()=>{setMode("login")},switchToSignup=()=>setMode("signup");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoginPopup,{isOpen:isOpen&&mode==="login",onClose,onLoginSuccess:handleLoginSuccess}),jsxRuntimeExports.jsx(SignupPopup,{isOpen:isOpen&&mode==="signup",onClose,onSignupSuccess:handleSignupSuccess}),jsxRuntimeExports.jsx(OTPVerificationModal,{isOpen:isOpen&&mode==="otp-verification",onClose,email:signupEmail,onVerificationSuccess:handleOTPVerificationSuccess,onBackToSignup:switchToSignup}),jsxRuntimeExports.jsx(ForgotPasswordPopup,{isOpen:isOpen&&mode==="forgot-password",onClose})]})},ConfirmModal=({isOpen,onClose,onConfirm,title="Confirm Action",message="Are you sure you want to proceed?",confirmText="Confirm",cancelText="Cancel",type="warning"})=>{const handleConfirm=()=>{onConfirm(),onClose()},getIconColor=()=>{switch(type){case"danger":return"text-red-500";case"warning":return"text-yellow-500";case"info":return"text-blue-500"}},getConfirmButtonStyle=()=>{switch(type){case"danger":return"bg-red-600 hover:bg-red-700 focus:ring-red-500 text-white";case"warning":return"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500 text-white";case"info":return"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 text-white"}};return jsxRuntimeExports.jsx(AnimatePresence,{children:isOpen&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998]",onClick:onClose}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:e=>e.stopPropagation(),children:jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-md",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:`flex-shrink-0 ${getIconColor()}`,children:jsxRuntimeExports.jsx(ForwardRef$8,{className:"w-8 h-8"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:title})})]}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:message})}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:onClose,className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:cancelText}),jsxRuntimeExports.jsx("button",{onClick:handleConfirm,className:`flex-1 px-4 py-2.5 text-sm font-medium rounded-xl transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 ${getConfirmButtonStyle()}`,children:confirmText})]})]})})})]})})};var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded),key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};for(var key in source)if(Object.prototype.hasOwnProperty.call(source,key)){if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function ownKeys(e,r2){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r2&&(o=o.filter(function(r3){return Object.getOwnPropertyDescriptor(e,r3).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r2=1;r2<arguments.length;r2++){var t=arguments[r2]!=null?arguments[r2]:{};r2%2?ownKeys(Object(t),!0).forEach(function(r3){_defineProperty(e,r3,t[r3])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r3){Object.defineProperty(e,r3,Object.getOwnPropertyDescriptor(t,r3))})}return e}function _defineProperty(obj,key,value){return key=_toPropertyKey(key),key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive(t,r2){if(typeof t!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var i=e.call(t,r2);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r2==="string"?String:Number)(t)}function Tree2Element(tree){return tree&&tree.map((node,i)=>React.createElement(node.tag,_objectSpread({key:i},node.attr),Tree2Element(node.child)))}function GenIcon(data){return props=>React.createElement(IconBase,_extends({attr:_objectSpread({},data.attr)},props),Tree2Element(data.child))}function IconBase(props){var elem=conf=>{var{attr,size,title}=props,svgProps=_objectWithoutProperties(props,_excluded),computedSize=size||conf.size||"1em",className;return conf.className&&(className=conf.className),props.className&&(className=(className?className+" ":"")+props.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},conf.attr,attr,svgProps,{className,style:_objectSpread(_objectSpread({color:props.color||conf.color},conf.style),props.style),height:computedSize,width:computedSize,xmlns:"http://www.w3.org/2000/svg"}),title&&React.createElement("title",null,title),props.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,conf=>elem(conf)):elem(DefaultContext)}function RiHomeSmileLine(props){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M6 19H18V9.15745L12 3.7029L6 9.15745V19ZM19 21H5C4.44772 21 4 20.5523 4 20V11L1 11L11.3273 1.6115C11.7087 1.26475 12.2913 1.26475 12.6727 1.6115L23 11L20 11V20C20 20.5523 19.5523 21 19 21ZM7.5 13H9.5C9.5 14.3807 10.6193 15.5 12 15.5C13.3807 15.5 14.5 14.3807 14.5 13H16.5C16.5 15.4853 14.4853 17.5 12 17.5C9.51472 17.5 7.5 15.4853 7.5 13Z"},child:[]}]})(props)}function RiHotelLine(props){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 21H2V19H3V4C3 3.44772 3.44772 3 4 3H18C18.5523 3 19 3.44772 19 4V9H21V19H22V21ZM17 19H19V11H13V19H15V13H17V19ZM17 9V5H5V19H11V9H17ZM7 11H9V13H7V11ZM7 15H9V17H7V15ZM7 7H9V9H7V7Z"},child:[]}]})(props)}function RiFlightTakeoffLine(props){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.949 10.1118C22.1634 10.912 21.6886 11.7345 20.8884 11.9489L5.2218 16.1467C4.77856 16.2655 4.31138 16.0674 4.08866 15.6662L1.46582 10.9415L2.91471 10.5533L5.3825 12.9979L10.4778 11.6326L5.96728 4.55896L7.89913 4.04132L14.8505 10.4609L20.1119 9.05113C20.9121 8.83671 21.7346 9.31159 21.949 10.1118ZM4.00013 19H20.0001V21H4.00013V19Z"},child:[]}]})(props)}function RiSuitcaseLine(props){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 3C15.5523 3 16 3.44772 16 4V6H21C21.5523 6 22 6.44772 22 7V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V7C2 6.44772 2.44772 6 3 6H8V4C8 3.44772 8.44772 3 9 3H15ZM16 8H8V19H16V8ZM4 8V19H6V8H4ZM14 5H10V6H14V5ZM18 8V19H20V8H18Z"},child:[]}]})(props)}function RiDashboardLine(props){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 21C13.4477 21 13 20.5523 13 20V12C13 11.4477 13.4477 11 14 11H20C20.5523 11 21 11.4477 21 12V20C21 20.5523 20.5523 21 20 21H14ZM4 13C3.44772 13 3 12.5523 3 12V4C3 3.44772 3.44772 3 4 3H10C10.5523 3 11 3.44772 11 4V12C11 12.5523 10.5523 13 10 13H4ZM9 11V5H5V11H9ZM4 21C3.44772 21 3 20.5523 3 20V16C3 15.4477 3.44772 15 4 15H10C10.5523 15 11 15.4477 11 16V20C11 20.5523 10.5523 21 10 21H4ZM5 19H9V17H5V19ZM15 19H19V13H15V19ZM13 4C13 3.44772 13.4477 3 14 3H20C20.5523 3 21 3.44772 21 4V8C21 8.55228 20.5523 9 20 9H14C13.4477 9 13 8.55228 13 8V4ZM15 5V7H19V5H15Z"},child:[]}]})(props)}const ModernHeader=()=>{var _a,_b;const[isMobileMenuOpen,setIsMobileMenuOpen]=reactExports.useState(!1),[isProfileMenuOpen,setIsProfileMenuOpen]=reactExports.useState(!1),[isScrolled,setIsScrolled]=reactExports.useState(!1),[isAuthModalOpen,setIsAuthModalOpen]=reactExports.useState(!1),[authMode,setAuthMode]=reactExports.useState("login"),[isLogoutModalOpen,setIsLogoutModalOpen]=reactExports.useState(!1),[showNotifications,setShowNotifications]=reactExports.useState(!1),[hasNewNotifications,setHasNewNotifications]=reactExports.useState(!0),{isAuthenticated,user,logout}=useAuth(),{isDarkMode,toggleDarkMode}=useTheme(),{showSuccess}=useToast(),location2=useLocation(),navigate=useNavigate();reactExports.useEffect(()=>{const handleScroll=()=>{setIsScrolled(window.scrollY>10)};return window.addEventListener("scroll",handleScroll),()=>window.removeEventListener("scroll",handleScroll)},[]),reactExports.useEffect(()=>{const handleClickOutside=event=>{const target=event.target;showNotifications&&!target.closest("[data-notifications]")&&setShowNotifications(!1)};return showNotifications&&document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}},[showNotifications]),reactExports.useEffect(()=>{setIsMobileMenuOpen(!1),setIsProfileMenuOpen(!1)},[location2.pathname]);const handleOpenAuthModal=mode=>{console.log("Opening auth modal:",mode),setAuthMode(mode),setIsAuthModalOpen(!0)},handleCloseAuthModal=()=>{setIsAuthModalOpen(!1)},handleAuthSuccess=()=>{console.log("Authentication successful"),showSuccess("Welcome back! ","You've successfully logged in to your account.")},handleLogoutClick=()=>{setIsLogoutModalOpen(!0)},handleNotificationClick=()=>{setShowNotifications(!showNotifications),hasNewNotifications&&setHasNewNotifications(!1)},handleLogoutConfirm=async()=>{try{await logout(),showSuccess("Logged out successfully! ","You have been logged out of your account.")}catch(error){console.error("Logout error:",error)}},baseNavItems=[{name:"Home",href:"/",icon:RiHomeSmileLine,iconBg:"bg-blue-100/80 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-300",iconRing:"ring-blue-200 dark:ring-blue-500/40"},{name:"Flights",href:"/flights",icon:RiFlightTakeoffLine,iconBg:"bg-sky-100/80 dark:bg-sky-900/30",iconColor:"text-sky-600 dark:text-sky-300",iconRing:"ring-sky-200 dark:ring-sky-500/40"},{name:"Hotels",href:"/hotels",icon:RiHotelLine,iconBg:"bg-amber-100/80 dark:bg-amber-900/30",iconColor:"text-amber-600 dark:text-amber-300",iconRing:"ring-amber-200 dark:ring-amber-500/40"},{name:"Packages",href:"/packages",icon:RiSuitcaseLine,iconBg:"bg-emerald-100/80 dark:bg-emerald-900/30",iconColor:"text-emerald-600 dark:text-emerald-300",iconRing:"ring-emerald-200 dark:ring-emerald-500/40"}],navItems=baseNavItems,authenticatedNavItems=[...baseNavItems,{name:"Dashboard",href:"/dashboard",icon:RiDashboardLine,iconBg:"bg-violet-100/80 dark:bg-violet-900/30",iconColor:"text-violet-600 dark:text-violet-300",iconRing:"ring-violet-200 dark:ring-violet-500/40"}],profileMenuItems=[{name:"Dashboard",icon:ForwardRef$2,href:"/dashboard"},{name:"Profile",icon:ForwardRef$2,href:"/profile"},{name:"Settings",icon:ForwardRef$9,href:"/settings"},{name:"Sign Out",icon:ForwardRef$4,action:handleLogoutClick}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(motion.header,{initial:{y:-100},animate:{y:0},transition:{duration:.6,ease:"easeOut"},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${isScrolled?"bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl shadow-lg border-b border-gray-200/50 dark:border-gray-700/50":"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md"}`,children:[jsxRuntimeExports.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-16",children:[jsxRuntimeExports.jsx(Link,{to:"/",className:"flex items-center",children:jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("img",{src:logoImage,alt:"SafarBot Logo",className:"w-50 h-36 object-contain"})})}),jsxRuntimeExports.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:(isAuthenticated?authenticatedNavItems:navItems).map(item=>{const isActive=location2.pathname===item.href;return jsxRuntimeExports.jsxs(Link,{to:item.href,className:cn("relative group flex items-center gap-3 px-4 py-2 rounded-xl font-medium transition-all duration-200",isActive?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800/50"),children:[jsxRuntimeExports.jsx("span",{className:cn("flex h-8 w-8 items-center justify-center rounded-lg transition-all duration-200",item.iconBg,item.iconRing,isActive?"ring-2 ring-offset-2 ring-offset-white dark:ring-offset-gray-900 shadow-sm":"group-hover:shadow-sm group-hover:ring-2 group-hover:ring-offset-2 group-hover:ring-offset-white dark:group-hover:ring-offset-gray-900"),children:jsxRuntimeExports.jsx(item.icon,{className:cn("w-4 h-4",item.iconColor)})}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:item.name}),isActive&&jsxRuntimeExports.jsx(motion.div,{layoutId:"activeTab",className:"absolute inset-0 bg-blue-50 dark:bg-blue-900/30 rounded-xl -z-10",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},item.name)})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("button",{className:"p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200",children:jsxRuntimeExports.jsx(ForwardRef$6,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:toggleDarkMode,className:"p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200",children:isDarkMode?jsxRuntimeExports.jsx(ForwardRef$3,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(ForwardRef$5,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"relative","data-notifications":!0,children:[jsxRuntimeExports.jsxs("button",{onClick:handleNotificationClick,className:`relative p-2 rounded-xl transition-all duration-200 ${showNotifications?"text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20":"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[jsxRuntimeExports.jsx(ForwardRef$c,{className:"w-5 h-5"}),hasNewNotifications&&jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:showNotifications&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full right-4 mt-2 w-80 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 py-2 z-50",children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Notifications"})}),jsxRuntimeExports.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Welcome to SafarBot! "}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Start planning your next adventure with AI-powered travel recommendations."}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Just now"})]})]})}),jsxRuntimeExports.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"New features available"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Check out our latest travel planning tools and collaboration features."}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"2 hours ago"})]})]})})]}),jsxRuntimeExports.jsx("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsx("button",{className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium",children:"View all notifications"})})]})})]}),isAuthenticated?jsxRuntimeExports.jsxs("div",{className:"relative ml-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>setIsProfileMenuOpen(!isProfileMenuOpen),className:"flex items-center space-x-2 p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-white text-sm font-medium",children:((_a=user==null?void 0:user.first_name)==null?void 0:_a[0])||((_b=user==null?void 0:user.email)==null?void 0:_b[0])||"U"})}),jsxRuntimeExports.jsx(ForwardRef$a,{className:`w-4 h-4 text-gray-500 transition-transform duration-200 ${isProfileMenuOpen?"rotate-180":""}`})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:isProfileMenuOpen&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.2},className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 py-2",children:profileMenuItems.map(item=>jsxRuntimeExports.jsxs("button",{onClick:()=>{item.action?item.action():item.href&&navigate(item.href),setIsProfileMenuOpen(!1)},className:`w-full flex items-center space-x-3 px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 ${item.name==="Sign Out"?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:[jsxRuntimeExports.jsx(item.icon,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:item.name})]},item.name))})})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[jsxRuntimeExports.jsx(ModernButton,{variant:"ghost",size:"sm",onClick:()=>{console.log("Sign In button clicked"),handleOpenAuthModal("login")},children:"Sign In"}),jsxRuntimeExports.jsx(ModernButton,{variant:"solid",size:"sm",onClick:()=>{console.log("Sign Up button clicked"),handleOpenAuthModal("signup")},children:"Sign Up"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>setIsMobileMenuOpen(!isMobileMenuOpen),className:"md:hidden p-2 rounded-xl text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200",children:isMobileMenuOpen?jsxRuntimeExports.jsx(ForwardRef,{className:"w-6 h-6"}):jsxRuntimeExports.jsx(ForwardRef$d,{className:"w-6 h-6"})})]})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:isMobileMenuOpen&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"md:hidden border-t border-gray-200 dark:border-gray-700 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl",children:jsxRuntimeExports.jsxs("div",{className:"px-4 py-4 space-y-2",children:[(isAuthenticated?authenticatedNavItems:navItems).map(item=>{const isActive=location2.pathname===item.href;return jsxRuntimeExports.jsxs(Link,{to:item.href,className:cn("flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-all duration-200",isActive?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800/50"),children:[jsxRuntimeExports.jsx("span",{className:cn("flex h-9 w-9 items-center justify-center rounded-xl transition-all duration-200",item.iconBg,item.iconRing,isActive?"ring-2 ring-offset-2 ring-offset-white dark:ring-offset-gray-900 shadow-sm":""),children:jsxRuntimeExports.jsx(item.icon,{className:cn("w-5 h-5",item.iconColor)})}),jsxRuntimeExports.jsx("span",{children:item.name})]},item.name)}),!isAuthenticated&&jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[jsxRuntimeExports.jsx(ModernButton,{variant:"ghost",size:"sm",fullWidth:!0,onClick:()=>{console.log("Mobile Sign In button clicked"),handleOpenAuthModal("login")},children:"Sign In"}),jsxRuntimeExports.jsx(ModernButton,{variant:"solid",size:"sm",fullWidth:!0,onClick:()=>{console.log("Mobile Sign Up button clicked"),handleOpenAuthModal("signup")},children:"Sign Up"})]})]})})})]}),(isMobileMenuOpen||isProfileMenuOpen)&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{setIsMobileMenuOpen(!1),setIsProfileMenuOpen(!1)}}),jsxRuntimeExports.jsx(AuthModal,{isOpen:isAuthModalOpen,onClose:handleCloseAuthModal,defaultMode:authMode,onLoginSuccess:handleAuthSuccess,onSignupSuccess:handleAuthSuccess}),jsxRuntimeExports.jsx(ConfirmModal,{isOpen:isLogoutModalOpen,onClose:()=>setIsLogoutModalOpen(!1),onConfirm:handleLogoutConfirm,title:"Sign Out",message:"Are you sure you want to sign out? You'll need to log in again to access your account.",confirmText:"Sign Out",cancelText:"Cancel",type:"warning"})]})};function BsFacebook(props){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"},child:[]}]})(props)}function BsInstagram(props){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"},child:[]}]})(props)}function BsLinkedin(props){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"},child:[]}]})(props)}function BsTwitter(props){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334q.002-.211-.006-.422A6.7 6.7 0 0 0 16 3.542a6.7 6.7 0 0 1-1.889.518 3.3 3.3 0 0 0 1.447-1.817 6.5 6.5 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.32 9.32 0 0 1-6.767-3.429 3.29 3.29 0 0 0 1.018 4.382A3.3 3.3 0 0 1 .64 6.575v.045a3.29 3.29 0 0 0 2.632 3.218 3.2 3.2 0 0 1-.865.115 3 3 0 0 1-.614-.057 3.28 3.28 0 0 0 3.067 2.277A6.6 6.6 0 0 1 .78 13.58a6 6 0 0 1-.78-.045A9.34 9.34 0 0 0 5.026 15"},child:[]}]})(props)}const Footer=()=>{const currentYear=new Date().getFullYear(),footerLinks={company:[{name:"About Us",href:"/about"},{name:"Careers",href:"/careers"},{name:"Press",href:"/press"}],support:[{name:"Help Center",href:"/help"},{name:"Contact Us",href:"/contact"},{name:"Privacy Policy",href:"/privacy"},{name:"Terms of Service",href:"/terms"}],services:[{name:"Flight Booking",href:"/flights"},{name:"Hotel Booking",href:"/hotels"},{name:"Travel Insurance",href:"/insurance"},{name:"Car Rental",href:"/cars"}]},socialLinks=[{name:"Facebook",icon:jsxRuntimeExports.jsx(BsFacebook,{}),href:"#"},{name:"Twitter",icon:jsxRuntimeExports.jsx(BsTwitter,{}),href:"#"},{name:"Instagram",icon:jsxRuntimeExports.jsx(BsInstagram,{}),href:"#"},{name:"LinkedIn",icon:jsxRuntimeExports.jsx(BsLinkedin,{}),href:"#"}];return jsxRuntimeExports.jsx("footer",{className:"bg-gray-50 dark:bg-gray-900",children:jsxRuntimeExports.jsxs("div",{className:"w-full py-12",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-8 px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start gap-8 lg:gap-12",children:[jsxRuntimeExports.jsxs("div",{className:"lg:flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-4",children:[jsxRuntimeExports.jsx("img",{src:logoImage,alt:"SafarBot Logo",className:"w-10 h-10 object-contain mr-3"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"SafarBot"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"AI-Powered Travel Intelligence"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6 leading-relaxed",children:"AI-powered travel planning platform that makes booking flights and hotels effortless."}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Mail,{className:"w-4 h-4 mr-3 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"info@safarbot.com"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Phone,{className:"w-4 h-4 mr-3 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"+918127889889"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 mr-3 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"India"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-8 lg:gap-12",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4 uppercase tracking-wide",children:"Company"}),jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:footerLinks.company.map(link=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:link.href,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:link.name})},link.name))})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4 uppercase tracking-wide",children:"Support"}),jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:footerLinks.support.map(link=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:link.href,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:link.name})},link.name))})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4 uppercase tracking-wide",children:"Services"}),jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:footerLinks.services.map(link=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:link.href,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:link.name})},link.name))})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 mt-8 pt-8 px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 sm:mb-0",children:[" ",currentYear," SafarBot. All rights reserved."]}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-4",children:socialLinks.map(social=>jsxRuntimeExports.jsx("a",{href:social.href,className:"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200","aria-label":social.name,children:jsxRuntimeExports.jsx("span",{className:"text-lg",children:social.icon})},social.name))})]})})]})})};class ErrorBoundary extends reactExports.Component{constructor(props){super(props);__publicField(this,"handleReload",()=>{window.location.reload()});__publicField(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1}}static getDerivedStateFromError(error){return{hasError:!0,error}}componentDidCatch(error,errorInfo){console.error("ErrorBoundary caught an error:",error,errorInfo),this.setState({error,errorInfo})}render(){return this.state.hasError?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-orange-50 flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl w-full text-center",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:jsxRuntimeExports.jsx(AlertTriangle,{className:"w-12 h-12 text-red-600"})}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Oops! Something went wrong"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"We encountered an unexpected error while loading this page."}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Don't worry, our team has been notified and we're working to fix it."})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[jsxRuntimeExports.jsxs(ModernButton,{onClick:this.handleReload,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 text-sm",children:[jsxRuntimeExports.jsx(RefreshCw,{className:"w-5 h-5 mr-2"}),"Try Again"]}),jsxRuntimeExports.jsxs(ModernButton,{onClick:this.handleGoHome,variant:"bordered",className:"px-4 py-2 text-sm",children:[jsxRuntimeExports.jsx(Home,{className:"w-5 h-5 mr-2"}),"Go Home"]})]}),!1,jsxRuntimeExports.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Need Help?"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:"If this error persists, please contact our support team."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[jsxRuntimeExports.jsx(ModernButton,{onClick:()=>window.open("mailto:support@safarbot.com","_blank"),variant:"bordered",className:"flex items-center justify-center",children:"Contact Support"}),jsxRuntimeExports.jsx(ModernButton,{onClick:()=>window.open("https://github.com/safarbot/issues","_blank"),variant:"bordered",className:"flex items-center justify-center",children:"Report Issue"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center mt-8 text-gray-500 text-sm",children:[jsxRuntimeExports.jsxs("p",{children:["Error Code: 500 | Timestamp: ",new Date().toISOString()]}),jsxRuntimeExports.jsx("p",{className:"mt-2",children:"SafarBot - Your AI Travel Companion"})]})]})}):this.props.children}}const LoadingSpinner=({size="md",variant="primary",className="",text})=>{const sizeClasses={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"},variantClasses={primary:"border-primary-500",secondary:"border-gray-500",white:"border-white"};return jsxRuntimeExports.jsxs("div",{className:cn("flex flex-col items-center justify-center",className),children:[jsxRuntimeExports.jsx("div",{className:cn("animate-spin rounded-full border-2 border-t-transparent",sizeClasses[size],variantClasses[variant])}),text&&jsxRuntimeExports.jsx("p",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400 text-center",children:text})]})},ProtectedRoute=({children,redirectTo="/login",preserveState=!0})=>{const{isAuthenticated,isLoading}=useAuth(),navigate=useNavigate(),location2=useLocation();return reactExports.useEffect(()=>{if(!isLoading&&!isAuthenticated)if(console.log("ProtectedRoute: User not authenticated - redirecting to login"),preserveState){const currentPath=location2.pathname+location2.search,state={from:currentPath,message:"Please log in to access this page",timestamp:Date.now()};sessionStorage.setItem("authRedirect",JSON.stringify(state)),navigate(redirectTo,{state:{from:currentPath,message:"Please log in to access this page"}})}else navigate(redirectTo)},[isAuthenticated,isLoading,navigate,location2,redirectTo,preserveState]),isLoading?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:jsxRuntimeExports.jsx(LoadingSpinner,{size:"lg",text:"Checking authentication..."})}):isAuthenticated?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children}):null},GOOGLE_MAPS_API_KEY="",GOOGLE_MAPS_MAP_ID="DEMO_MAP_ID",HomePage=reactExports.lazy(()=>__vitePreload(()=>import("./HomePage-B3FffqNG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),FlightBookingPage=reactExports.lazy(()=>__vitePreload(()=>import("./FlightBookingPage-jWnD3XsN.js"),__vite__mapDeps([8,1,9,6,7]))),HotelBookingPage=reactExports.lazy(()=>__vitePreload(()=>import("./HotelBookingPage-Do2s5NQC.js"),__vite__mapDeps([10,1,4,2,3,7,6]))),BookingOptionsPage=reactExports.lazy(()=>__vitePreload(()=>import("./BookingOptionsPage-XYHvUIRn.js"),__vite__mapDeps([11,1,9,7,6]))),BookingConfirmationPage=reactExports.lazy(()=>__vitePreload(()=>import("./BookingConfirmationPage-D0bbIVSY.js"),__vite__mapDeps([12,1,7,6]))),UserDashboard=reactExports.lazy(()=>__vitePreload(()=>import("./UserDashboard-Coc81MU9.js"),__vite__mapDeps([13,1,7,6,4,14,15]))),ProfilePage=reactExports.lazy(()=>__vitePreload(()=>import("./ProfilePage-BwSx8j3f.js"),__vite__mapDeps([16,1,6,7]))),SettingsPage=reactExports.lazy(()=>__vitePreload(()=>import("./SettingsPage-ScUYe83J.js"),__vite__mapDeps([17,1,6,7]))),SearchPage=reactExports.lazy(()=>__vitePreload(()=>import("./SearchPage-CKNHLy9E.js"),__vite__mapDeps([18,1,4,3,7,6]))),ResultsPage=reactExports.lazy(()=>__vitePreload(()=>import("./ResultsPage-B9MpI-1N.js"),__vite__mapDeps([19,1,20,21,6,9,7]))),TripPlannerPage=reactExports.lazy(()=>__vitePreload(()=>import("./TripPlannerPage-COVU0LhW.js"),__vite__mapDeps([22,1,2,3,14,6,5,4,7]))),ItineraryPage=reactExports.lazy(()=>__vitePreload(()=>import("./ItineraryPage-TWdIFIkL.js"),__vite__mapDeps([23,1,9,7,6]))),ItineraryGenerationPage=reactExports.lazy(()=>__vitePreload(()=>import("./ItineraryGenerationPage-xPbcN96K.js"),__vite__mapDeps([24,1,9,7,6]))),EditItineraryPage=reactExports.lazy(()=>__vitePreload(()=>import("./EditItineraryPage-CQqvw3RS.js"),__vite__mapDeps([25,1,9,21,6,26,27,7]))),PackagesPage=reactExports.lazy(()=>__vitePreload(()=>import("./PackagesPage-Czzk6hIX.js"),__vite__mapDeps([28,1,6,7]))),CreateBlogPage=reactExports.lazy(()=>__vitePreload(()=>import("./CreateBlogPage-Tkga24er.js"),__vite__mapDeps([29,1,9,7,6]))),CreateAlbumPage=reactExports.lazy(()=>__vitePreload(()=>import("./CreateAlbumPage-BOvus7M8.js"),__vite__mapDeps([30,1,9,7,6]))),CreateGuidePage=reactExports.lazy(()=>__vitePreload(()=>import("./CreateGuidePage-Csh35gsy.js"),__vite__mapDeps([31,1,9,7,6]))),ChatPage=reactExports.lazy(()=>__vitePreload(()=>import("./ChatPage-bkAbhrQG.js"),__vite__mapDeps([32,1,27,7,6])).then(module=>({default:module.ChatPage}))),PublicItineraryPage=reactExports.lazy(()=>__vitePreload(()=>import("./PublicItineraryPage-zCowPT1H.js"),__vite__mapDeps([33,1,7,6]))),ItineraryRedirectPage=reactExports.lazy(()=>__vitePreload(()=>import("./ItineraryRedirectPage-tSsqOUbp.js"),__vite__mapDeps([34,1,7,6]))),SavedItineraryViewPage=reactExports.lazy(()=>__vitePreload(()=>import("./SavedItineraryViewPage-CXLWkMAe.js"),__vite__mapDeps([35,1,15,6,26,27,7]))),MapTestPage=reactExports.lazy(()=>__vitePreload(()=>import("./MapTestPage-Dbtn-3ES.js"),__vite__mapDeps([36,1,20,7,6]))),LoginPage=reactExports.lazy(()=>__vitePreload(()=>import("./LoginPage-DZRr7SvK.js"),__vite__mapDeps([37,1,7,6]))),SignupPage=reactExports.lazy(()=>__vitePreload(()=>import("./SignupPage-BJtu-7Je.js"),__vite__mapDeps([38,1,7,6]))),ForgotPasswordPage=reactExports.lazy(()=>__vitePreload(()=>import("./ForgotPasswordPage-BVPOY4td.js"),__vite__mapDeps([39,1,7,6]))),ResetPasswordPage=reactExports.lazy(()=>__vitePreload(()=>import("./ResetPasswordPage-DwWF-yJJ.js"),__vite__mapDeps([40,1,7,6]))),CollaborationAcceptPage=reactExports.lazy(()=>__vitePreload(()=>import("./CollaborationAcceptPage-Wn0R7CaX.js"),__vite__mapDeps([41,1,7,6]))),NotFoundPage=reactExports.lazy(()=>__vitePreload(()=>import("./NotFoundPage-Bhb6DVKQ.js"),__vite__mapDeps([42,7,1,6]))),ServerErrorPage=reactExports.lazy(()=>__vitePreload(()=>import("./ServerErrorPage-D4rdOIG_.js"),__vite__mapDeps([43,7,1,6]))),OfflinePage=reactExports.lazy(()=>__vitePreload(()=>import("./OfflinePage-B6zoEoSX.js"),__vite__mapDeps([44,1,7,6]))),ConditionalHeader=()=>{const location2=useLocation();return location2.pathname==="/results"||location2.pathname==="/itinerary"||location2.pathname.startsWith("/itinerary/")||location2.pathname.startsWith("/saved-itinerary/")||location2.pathname==="/itinerary-generation"||location2.pathname==="/edit-itinerary"||location2.pathname==="/create-blog"||location2.pathname==="/create-album"||location2.pathname==="/create-guide"||location2.pathname.startsWith("/public/itinerary/")||location2.pathname==="/otp-test"||location2.pathname==="/404"||location2.pathname==="/500"||location2.pathname==="/offline"||location2.pathname==="/not-found"?null:jsxRuntimeExports.jsx(ModernHeader,{})},ConditionalFooter=()=>useLocation().pathname==="/"?jsxRuntimeExports.jsx(Footer,{}):null;function App(){return jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(APIProvider,{apiKey:GOOGLE_MAPS_API_KEY,libraries:["places"],onLoad:()=>console.log("Maps API has loaded."),children:jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(ToastProvider,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full bg-secondary-50 dark:bg-dark-bg text-secondary-900 dark:text-dark-text",children:[jsxRuntimeExports.jsx(ConditionalHeader,{}),jsxRuntimeExports.jsx("main",{className:"mt-0 pt-0 w-full",children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(LoadingSpinner,{}),children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(HomePage,{})}),jsxRuntimeExports.jsx(Route,{path:"/flights",element:jsxRuntimeExports.jsx(FlightBookingPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/hotels",element:jsxRuntimeExports.jsx(HotelBookingPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/packages",element:jsxRuntimeExports.jsx(PackagesPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(UserDashboard,{})})}),jsxRuntimeExports.jsx(Route,{path:"/profile",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(ProfilePage,{})})}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(SettingsPage,{})})}),jsxRuntimeExports.jsx(Route,{path:"/search",element:jsxRuntimeExports.jsx(SearchPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/booking-options/:bookingToken",element:jsxRuntimeExports.jsx(BookingOptionsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/booking-confirmation",element:jsxRuntimeExports.jsx(BookingConfirmationPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/results",element:jsxRuntimeExports.jsx(ResultsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/itinerary",element:jsxRuntimeExports.jsx(ItineraryPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/saved-itinerary/:id",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(SavedItineraryViewPage,{})})}),jsxRuntimeExports.jsx(Route,{path:"/itinerary/:id",element:jsxRuntimeExports.jsx(ItineraryRedirectPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/itinerary-generation",element:jsxRuntimeExports.jsx(ItineraryGenerationPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/edit-itinerary",element:jsxRuntimeExports.jsx(EditItineraryPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/trip-planner",element:jsxRuntimeExports.jsx(TripPlannerPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/create-blog",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(CreateBlogPage,{})})}),jsxRuntimeExports.jsx(Route,{path:"/create-album",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(CreateAlbumPage,{})})}),jsxRuntimeExports.jsx(Route,{path:"/create-guide",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(CreateGuidePage,{})})}),jsxRuntimeExports.jsx(Route,{path:"/public/itinerary/:shareToken",element:jsxRuntimeExports.jsx(PublicItineraryPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/signup",element:jsxRuntimeExports.jsx(SignupPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/forgot-password",element:jsxRuntimeExports.jsx(ForgotPasswordPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/reset-password",element:jsxRuntimeExports.jsx(ResetPasswordPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/collaboration/accept/:invitationToken",element:jsxRuntimeExports.jsx(CollaborationAcceptPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/chat",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(ChatPage,{})})}),jsxRuntimeExports.jsx(Route,{path:"/map-test",element:jsxRuntimeExports.jsx(MapTestPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/404",element:jsxRuntimeExports.jsx(NotFoundPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/500",element:jsxRuntimeExports.jsx(ServerErrorPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/offline",element:jsxRuntimeExports.jsx(OfflinePage,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFoundPage,{})})]})})}),jsxRuntimeExports.jsx(ConditionalFooter,{})]})})})})})})})}const root=client.createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{AnimatePresence as A,Button as B,GenIcon as G,InfoWindow as I,LoadingSpinner as L,ModernButton as M,ModernCard as a,useToast as b,collaborationAPI as c,dashboardAPI as d,dashboardAPI$1 as e,flightAPI as f,ModernHeader as g,AuthModal as h,itineraryAPI as i,jsxRuntimeExports as j,cn as k,savedItineraryAPI$1 as l,motion as m,notificationsAPI as n,getApiBaseUrl as o,getWebSocketUrl as p,Map$1 as q,GOOGLE_MAPS_MAP_ID as r,savedItineraryAPI as s,useMap as t,useAuth as u,AdvancedMarker as v,weatherAPI as w,logoImage as x,GoogleSignIn as y};
